!function(modules){function __webpack_require__(moduleId){if(installedModules[moduleId])return installedModules[moduleId].exports;var module=installedModules[moduleId]={exports:{},id:moduleId,loaded:false};modules[moduleId].call(module.exports,module,module.exports,__webpack_require__);module.loaded=true;return module.exports}var installedModules={};__webpack_require__.m=modules;__webpack_require__.c=installedModules;__webpack_require__.p="";return __webpack_require__(0)}([function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}var _vars=__webpack_require__(1);var _environment=__webpack_require__(21);var _environment2=_interopRequireDefault(_environment);if(_environment2["default"].isBrowser()){if("undefined"!=typeof OneSignal)var predefinedOneSignalPushes=OneSignal;__webpack_require__(22);if(predefinedOneSignalPushes)OneSignal._process_pushes(predefinedOneSignalPushes)}else if(_environment2["default"].isServiceWorker())__webpack_require__(54)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.API_URL=exports.HOST_URL=exports.PROD_HOST=exports.DEV_FRAME_HOST=exports.DEV_HOST=void 0;var _utils=__webpack_require__(2);var DEV_HOST=exports.DEV_HOST="https://oregon:3001";var DEV_FRAME_HOST=exports.DEV_FRAME_HOST="https://nevada:3001";var PROD_HOST=exports.PROD_HOST="https://onesignal.com";var HOST_URL=exports.HOST_URL=(0,_utils.isDev)()?DEV_HOST:PROD_HOST;var API_URL=exports.API_URL=((0,_utils.isDev)()?DEV_HOST:PROD_HOST)+"/api/v1/"},function(module,exports,__webpack_require__){"use strict";function _interopRequireWildcard(obj){if(obj&&obj.__esModule)return obj;else{var newObj={};if(null!=obj)for(var key in obj)if(Object.prototype.hasOwnProperty.call(obj,key))newObj[key]=obj[key];newObj["default"]=obj;return newObj}}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function isArray(variable){return"[object Array]"===Object.prototype.toString.call(variable)}function getHumanizedTimeDuration(timeDurationInMilliseconds){function addPluralSuffix(number){return number>1?"s":""}var duration=Math.floor(timeDurationInMilliseconds/1e3);var years=Math.floor(duration/31536e3);if(years)return years+" year"+addPluralSuffix(years);var days=Math.floor((duration%=31536e3)/86400);if(days)return days+" day"+addPluralSuffix(days);var hours=Math.floor((duration%=86400)/3600);if(hours)return hours+" hour"+addPluralSuffix(hours);var minutes=Math.floor((duration%=3600)/60);if(minutes)return minutes+" minute"+addPluralSuffix(minutes);var seconds=duration%60;if(seconds)return seconds+" second"+addPluralSuffix(seconds);return"just now"}function isDev(){return false}function isPushNotificationsSupportedAndWarn(){var isSupported=isPushNotificationsSupported();if(!isSupported)_loglevel2["default"].warn("Your browser does not support push notifications.");return isSupported}function logError(e){_stacktraceJs2["default"].fromError(e).then(function(s){if(s&&s.length>0){var stackInfo=s[0];var filename=stackInfo.fileName.replace("webpack:///","webpack:///./");_loglevel2["default"].error(e,"@ "+filename+":"+stackInfo.lineNumber+":"+stackInfo.columnNumber)}else _loglevel2["default"].error(e)})["catch"](function(x){return _loglevel2["default"].error(e)})}function decodeHtmlEntities(text){if(decodeTextArea){decodeTextArea.innerHTML=text;return decodeTextArea.value}else return text}function isPushNotificationsSupported(){var chromeVersion=navigator.appVersion.match(/Chrome\/(.*?) /);if(Browser.firefox&&"44.0"==Browser.version&&(Browser.mobile||Browser.tablet))return false;if(isSupportedFireFox())return true;if(isSupportedSafari())return true;if(!chromeVersion)return false;if(navigator.appVersion.match(/Edge/))return false;if(navigator.appVersion.match(/ wv/))return false;if(navigator.appVersion.match(/OPR\//))return false;if(/iPad|iPhone|iPod/.test(navigator.platform))return false;return parseInt(chromeVersion[1].substring(0,2))>41}function isBrowserSafari(){var safariVersion=navigator.appVersion.match("Version/([0-9]?).* Safari");return null!=safariVersion}function isSupportedFireFox(){var fireFoxVersion=navigator.userAgent.match(/(Firefox\/)([0-9]{2,}\.[0-9]{1,})/);if(fireFoxVersion)return parseInt(fireFoxVersion[2].substring(0,2))>43;return false}function isBrowserFirefox(){var fireFoxVersion=navigator.userAgent.match(/(Firefox\/)([0-9]{2,}\.[0-9]{1,})/);return null!=fireFoxVersion}function getFirefoxVersion(){var fireFoxVersion=navigator.userAgent.match(/(Firefox\/)([0-9]{2,}\.[0-9]{1,})/);if(fireFoxVersion)return parseInt(fireFoxVersion[2].substring(0,2));else return-1}function isSupportedSafari(){var safariVersion=navigator.appVersion.match("Version/([0-9]?).* Safari");if(null==safariVersion)return false;if(/iPhone|iPad|iPod/i.test(navigator.userAgent))return false;return parseInt(safariVersion[1])>7}function removeDomElement(selector){var els=document.querySelectorAll(selector);if(els.length>0)for(var i=0;i<els.length;i++)els[i].parentNode.removeChild(els[i])}function addDomElement(targetSelectorOrElement,addOrder,elementHtml){if("string"==typeof targetSelectorOrElement)document.querySelector(targetSelectorOrElement).insertAdjacentHTML(addOrder,elementHtml);else if("object"===("undefined"==typeof targetSelectorOrElement?"undefined":_typeof(targetSelectorOrElement)))targetSelectorOrElement.insertAdjacentHTML(addOrder,elementHtml);else throw new Error(targetSelectorOrElement+" must be a CSS selector string or DOM Element object.")}function clearDomElementChildren(targetSelectorOrElement){if("string"==typeof targetSelectorOrElement){var element=document.querySelector(targetSelectorOrElement);for(;element.firstChild;)element.removeChild(element.firstChild)}else if("object"===("undefined"==typeof targetSelectorOrElement?"undefined":_typeof(targetSelectorOrElement)))for(;targetSelectorOrElement.firstChild;)targetSelectorOrElement.removeChild(targetSelectorOrElement.firstChild);else throw new Error(targetSelectorOrElement+" must be a CSS selector string or DOM Element object.")}function addCssClass(targetSelectorOrElement,cssClass){if("string"==typeof targetSelectorOrElement)document.querySelector(targetSelectorOrElement).classList.add(cssClass);else if("object"===("undefined"==typeof targetSelectorOrElement?"undefined":_typeof(targetSelectorOrElement)))targetSelectorOrElement.classList.add(cssClass);else throw new Error(targetSelectorOrElement+" must be a CSS selector string or DOM Element object.")}function removeCssClass(targetSelectorOrElement,cssClass){if("string"==typeof targetSelectorOrElement)document.querySelector(targetSelectorOrElement).classList.remove(cssClass);else if("object"===("undefined"==typeof targetSelectorOrElement?"undefined":_typeof(targetSelectorOrElement)))targetSelectorOrElement.classList.remove(cssClass);else throw new Error(targetSelectorOrElement+" must be a CSS selector string or DOM Element object.")}function hasCssClass(targetSelectorOrElement,cssClass){if("string"==typeof targetSelectorOrElement)return document.querySelector(targetSelectorOrElement).classList.contains(cssClass);else if("object"===("undefined"==typeof targetSelectorOrElement?"undefined":_typeof(targetSelectorOrElement)))return targetSelectorOrElement.classList.contains(cssClass);else throw new Error(targetSelectorOrElement+" must be a CSS selector string or DOM Element object.")}function on(targetSelectorOrElement,event,task){if(!event)_loglevel2["default"].error("Cannot call on() with no event: ",event);if(!task)_loglevel2["default"].error("Cannot call on() with no task: ",task);if("string"==typeof targetSelectorOrElement){var els=document.querySelectorAll(selector);if(els.length>0)for(var i=0;i<els.length;i++)on(els[i],task)}else if(isArray(targetSelectorOrElement))for(var _i=0;_i<targetSelectorOrElement.length;_i++)on(targetSelectorOrElement[_i],task);else if("object"===("undefined"==typeof targetSelectorOrElement?"undefined":_typeof(targetSelectorOrElement)))targetSelectorOrElement.addEventListener(event,task);else throw new Error(targetSelectorOrElement+" must be a CSS selector string or DOM Element object.")}function once(targetSelectorOrElement,event,task){var manualDestroy=arguments.length<=3||void 0===arguments[3]?false:arguments[3];if(!event)_loglevel2["default"].error("Cannot call on() with no event: ",event);if(!task)_loglevel2["default"].error("Cannot call on() with no task: ",task);if("string"==typeof targetSelectorOrElement){var els=document.querySelectorAll(selector);if(els.length>0)for(var i=0;i<els.length;i++)once(els[i],task)}else if(isArray(targetSelectorOrElement))for(var _i2=0;_i2<targetSelectorOrElement.length;_i2++)once(targetSelectorOrElement[_i2],task);else if("object"===("undefined"==typeof targetSelectorOrElement?"undefined":_typeof(targetSelectorOrElement))){var taskWrapper=function(){var internalTaskFunction=function internalTaskFunction(e){var destroyEventListener=function destroyEventListener(){targetSelectorOrElement.removeEventListener(e.type,taskWrapper)};if(!manualDestroy)destroyEventListener();task(e,destroyEventListener)};return internalTaskFunction}();targetSelectorOrElement.addEventListener(event,taskWrapper)}else throw new Error(targetSelectorOrElement+" must be a CSS selector string or DOM Element object.")}function off(targetSelectorOrElement,event,task){if("string"==typeof targetSelectorOrElement){var els=document.querySelectorAll(selector);if(els.length>0)for(var i=0;i<els.length;i++)off(els[i],task)}else if(isArray(targetSelectorOrElement))for(var _i3=0;_i3<targetSelectorOrElement.length;_i3++)off(targetSelectorOrElement[_i3],task);else if("object"===("undefined"==typeof targetSelectorOrElement?"undefined":_typeof(targetSelectorOrElement)))if(task)targetSelectorOrElement.removeEventListener(event,task);else targetSelectorOrElement.removeEventListener(event);else throw new Error(targetSelectorOrElement+" must be a CSS selector string or DOM Element object.")}function getConsoleStyle(style){if("code"==style)return'\n    padding: 0 5px 2px;\n    border: 1px solid #ddd;\n    -webkit-border-radius: 3px;\n    -moz-border-radius: 3px;\n    border-radius: 3px;\n    background-clip: padding-box;\n    font-family: Monaco,"DejaVu Sans Mono","Courier New",monospace;\n    color: #666;\n    ';else if("bold"==style)return"\n      font-weight: 600;\n    color: rgb(51, 51, 51);\n    ";else if("alert"==style)return"\n      font-weight: 600;\n    color: red;\n    ";else if("event"==style)return"\n    color: green;\n    ";else if("postmessage"==style)return"\n    color: orange;\n    ";else if("serviceworkermessage"==style)return"\n    color: purple;\n    "}function delay(durationMs){return new Promise(function(resolve){setTimeout(resolve,durationMs)})}function nothing(){return Promise.resolve()}function when(condition,promiseIfTrue,promiseIfFalse){if(void 0===promiseIfTrue)promiseIfTrue=nothing();if(void 0===promiseIfFalse)promiseIfFalse=nothing();return condition?promiseIfTrue:promiseIfFalse}function guid(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(c){var r=crypto.getRandomValues(new Uint8Array(1))[0]%16|0,v="x"==c?r:3&r|8;return v.toString(16)})}function contains(indexOfAble,match){if(!indexOfAble)return false;return-1!==indexOfAble.indexOf(match)}function trimUndefined(object){for(var property in object)if(object.hasOwnProperty(property))if(void 0===object[property])delete object[property];return object}function normalizeSubdomain(subdomain){subdomain=subdomain.trim();var removeSubstrings=["http://www.","https://www.","http://","https://",".onesignal.com/",".onesignal.com"];var _iteratorNormalCompletion=true;var _didIteratorError=false;var _iteratorError=void 0;try{for(var _iterator=removeSubstrings[Symbol.iterator](),_step;!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=true){var removeSubstring=_step.value;subdomain=subdomain.replace(removeSubstring,"")}}catch(err){_didIteratorError=true;_iteratorError=err}finally{try{if(!_iteratorNormalCompletion&&_iterator["return"])_iterator["return"]()}finally{if(_didIteratorError)throw _iteratorError}}return subdomain}Object.defineProperty(exports,"__esModule",{value:true});var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol?"symbol":typeof obj};exports.isArray=isArray;exports.getHumanizedTimeDuration=getHumanizedTimeDuration;exports.isDev=isDev;exports.isPushNotificationsSupportedAndWarn=isPushNotificationsSupportedAndWarn;exports.logError=logError;exports.decodeHtmlEntities=decodeHtmlEntities;exports.isPushNotificationsSupported=isPushNotificationsSupported;exports.isBrowserSafari=isBrowserSafari;exports.isSupportedFireFox=isSupportedFireFox;exports.isBrowserFirefox=isBrowserFirefox;exports.getFirefoxVersion=getFirefoxVersion;exports.isSupportedSafari=isSupportedSafari;exports.removeDomElement=removeDomElement;exports.addDomElement=addDomElement;exports.clearDomElementChildren=clearDomElementChildren;exports.addCssClass=addCssClass;exports.removeCssClass=removeCssClass;exports.hasCssClass=hasCssClass;exports.on=on;exports.once=once;exports.off=off;exports.getConsoleStyle=getConsoleStyle;exports.delay=delay;exports.nothing=nothing;exports.when=when;exports.guid=guid;exports.contains=contains;exports.trimUndefined=trimUndefined;exports.normalizeSubdomain=normalizeSubdomain;var _loglevel=__webpack_require__(3);var _loglevel2=_interopRequireDefault(_loglevel);var _stacktraceJs=__webpack_require__(4);var _stacktraceJs2=_interopRequireDefault(_stacktraceJs);var _bowser=__webpack_require__(20);var Browser=_interopRequireWildcard(_bowser);var _environment=__webpack_require__(21);var _environment2=_interopRequireDefault(_environment);if(_environment2["default"].isBrowser())var decodeTextArea=document.createElement("textarea")},function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_FACTORY__,__WEBPACK_AMD_DEFINE_RESULT__;!function(root,definition){"use strict";if("object"==typeof module&&module.exports&&true)module.exports=definition();else if(true)!(__WEBPACK_AMD_DEFINE_FACTORY__=definition,__WEBPACK_AMD_DEFINE_RESULT__="function"==typeof __WEBPACK_AMD_DEFINE_FACTORY__?__WEBPACK_AMD_DEFINE_FACTORY__.call(exports,__webpack_require__,exports,module):__WEBPACK_AMD_DEFINE_FACTORY__,void 0!==__WEBPACK_AMD_DEFINE_RESULT__&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__));else root.log=definition()}(this,function(){"use strict";function realMethod(methodName){if(typeof console===undefinedType)return false;else if(void 0!==console[methodName])return bindMethod(console,methodName);else if(void 0!==console.log)return bindMethod(console,"log");else return noop}function bindMethod(obj,methodName){var method=obj[methodName];if("function"==typeof method.bind)return method.bind(obj);else try{return Function.prototype.bind.call(method,obj)}catch(e){return function(){return Function.prototype.apply.apply(method,[obj,arguments])}}}function enableLoggingWhenConsoleArrives(methodName,level,loggerName){return function(){if(typeof console!==undefinedType){replaceLoggingMethods.call(this,level,loggerName);this[methodName].apply(this,arguments)}}}function replaceLoggingMethods(level,loggerName){for(var i=0;i<logMethods.length;i++){var methodName=logMethods[i];this[methodName]=level>i?noop:this.methodFactory(methodName,level,loggerName)}}function defaultMethodFactory(methodName,level,loggerName){return realMethod(methodName)||enableLoggingWhenConsoleArrives.apply(this,arguments)}function Logger(name,defaultLevel,factory){function persistLevelIfPossible(levelNum){var levelName=(logMethods[levelNum]||"silent").toUpperCase();try{window.localStorage[storageKey]=levelName;return}catch(ignore){}try{window.document.cookie=encodeURIComponent(storageKey)+"="+levelName+";"}catch(ignore){}}function getPersistedLevel(){var storedLevel;try{storedLevel=window.localStorage[storageKey]}catch(ignore){}if(typeof storedLevel===undefinedType)try{var cookie=window.document.cookie;var location=cookie.indexOf(encodeURIComponent(storageKey)+"=");if(location)storedLevel=/^([^;]+)/.exec(cookie.slice(location))[1]}catch(ignore){}if(void 0===self.levels[storedLevel])storedLevel=void 0;return storedLevel}var self=this;var currentLevel;var storageKey="loglevel";if(name)storageKey+=":"+name;self.levels={TRACE:0,DEBUG:1,INFO:2,WARN:3,ERROR:4,SILENT:5};self.methodFactory=factory||defaultMethodFactory;self.getLevel=function(){return currentLevel};self.setLevel=function(level,persist){if("string"==typeof level&&void 0!==self.levels[level.toUpperCase()])level=self.levels[level.toUpperCase()];if("number"==typeof level&&level>=0&&level<=self.levels.SILENT){currentLevel=level;if(false!==persist)persistLevelIfPossible(level);replaceLoggingMethods.call(self,level,name);if(typeof console===undefinedType&&level<self.levels.SILENT)return"No console available for logging"}else throw"log.setLevel() called with invalid level: "+level};self.setDefaultLevel=function(level){if(!getPersistedLevel())self.setLevel(level,false)};self.enableAll=function(persist){self.setLevel(self.levels.TRACE,persist)};self.disableAll=function(persist){self.setLevel(self.levels.SILENT,persist)};var initialLevel=getPersistedLevel();if(null==initialLevel)initialLevel=null==defaultLevel?"WARN":defaultLevel;self.setLevel(initialLevel,false)}var noop=function(){};var undefinedType="undefined";var logMethods=["trace","debug","info","warn","error"];var defaultLogger=new Logger;var _loggersByName={};defaultLogger.getLogger=function getLogger(name){if("string"!=typeof name||""===name)throw new TypeError("You must supply a name when creating a logger.");var logger=_loggersByName[name];if(!logger)logger=_loggersByName[name]=new Logger(name,defaultLogger.getLevel(),defaultLogger.methodFactory);return logger};var _log=typeof window!==undefinedType?window.log:void 0;defaultLogger.noConflict=function(){if(typeof window!==undefinedType&&window.log===defaultLogger)window.log=_log;return defaultLogger};return defaultLogger})},function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_FACTORY__,__WEBPACK_AMD_DEFINE_ARRAY__,__WEBPACK_AMD_DEFINE_RESULT__;!function(root,factory){"use strict";if(true)!(__WEBPACK_AMD_DEFINE_ARRAY__=[__webpack_require__(5),__webpack_require__(7),__webpack_require__(8)],__WEBPACK_AMD_DEFINE_FACTORY__=factory,__WEBPACK_AMD_DEFINE_RESULT__="function"==typeof __WEBPACK_AMD_DEFINE_FACTORY__?__WEBPACK_AMD_DEFINE_FACTORY__.apply(exports,__WEBPACK_AMD_DEFINE_ARRAY__):__WEBPACK_AMD_DEFINE_FACTORY__,void 0!==__WEBPACK_AMD_DEFINE_RESULT__&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__));else if("object"==typeof exports)module.exports=factory(require("error-stack-parser"),require("stack-generator"),require("stacktrace-gps"));else root.StackTrace=factory(root.ErrorStackParser,root.StackGenerator,root.StackTraceGPS)}(this,function StackTrace(ErrorStackParser,StackGenerator,StackTraceGPS){function _merge(first,second){var target={};[first,second].forEach(function(obj){for(var prop in obj)if(obj.hasOwnProperty(prop))target[prop]=obj[prop];return target});return target}function _isShapedLikeParsableError(err){return err.stack||err["opera#sourceloc"]}var _options={filter:function(stackframe){return-1===(stackframe.functionName||"").indexOf("StackTrace$$")&&-1===(stackframe.functionName||"").indexOf("ErrorStackParser$$")&&-1===(stackframe.functionName||"").indexOf("StackTraceGPS$$")&&-1===(stackframe.functionName||"").indexOf("StackGenerator$$")}};return{get:function StackTrace$$get(opts){try{throw new Error}catch(err){if(_isShapedLikeParsableError(err))return this.fromError(err,opts);else return this.generateArtificially(opts)}},fromError:function StackTrace$$fromError(error,opts){opts=_merge(_options,opts);return new Promise(function(resolve){var stackframes=ErrorStackParser.parse(error);if("function"==typeof opts.filter)stackframes=stackframes.filter(opts.filter);resolve(Promise.all(stackframes.map(function(sf){return new Promise(function(resolve){function resolveOriginal(){resolve(sf)}new StackTraceGPS(opts).pinpoint(sf).then(resolve,resolveOriginal)["catch"](resolveOriginal)})})))}.bind(this))},generateArtificially:function StackTrace$$generateArtificially(opts){opts=_merge(_options,opts);var stackFrames=StackGenerator.backtrace(opts);if("function"==typeof opts.filter)stackFrames=stackFrames.filter(opts.filter);return Promise.resolve(stackFrames)},instrument:function StackTrace$$instrument(fn,callback,errback,thisArg){if("function"!=typeof fn)throw new Error("Cannot instrument non-function object");else if("function"==typeof fn.__stacktraceOriginalFn)return fn;var instrumented=function StackTrace$$instrumented(){try{this.get().then(callback,errback)["catch"](errback);return fn.apply(thisArg||this,arguments)}catch(e){if(_isShapedLikeParsableError(e))this.fromError(e).then(callback,errback)["catch"](errback);throw e}}.bind(this);instrumented.__stacktraceOriginalFn=fn;return instrumented},deinstrument:function StackTrace$$deinstrument(fn){if("function"!=typeof fn)throw new Error("Cannot de-instrument non-function object");else if("function"==typeof fn.__stacktraceOriginalFn)return fn.__stacktraceOriginalFn;else return fn},report:function StackTrace$$report(stackframes,url){return new Promise(function(resolve,reject){var req=new XMLHttpRequest;req.onerror=reject;req.onreadystatechange=function onreadystatechange(){if(4===req.readyState)if(req.status>=200&&req.status<400)resolve(req.responseText);else reject(new Error("POST to "+url+" failed with status: "+req.status))};req.open("post",url);req.setRequestHeader("Content-Type","application/json");req.send(JSON.stringify({stack:stackframes}))})}}})},function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_FACTORY__,__WEBPACK_AMD_DEFINE_ARRAY__,__WEBPACK_AMD_DEFINE_RESULT__;!function(root,factory){"use strict";if(true)!(__WEBPACK_AMD_DEFINE_ARRAY__=[__webpack_require__(6)],__WEBPACK_AMD_DEFINE_FACTORY__=factory,__WEBPACK_AMD_DEFINE_RESULT__="function"==typeof __WEBPACK_AMD_DEFINE_FACTORY__?__WEBPACK_AMD_DEFINE_FACTORY__.apply(exports,__WEBPACK_AMD_DEFINE_ARRAY__):__WEBPACK_AMD_DEFINE_FACTORY__,void 0!==__WEBPACK_AMD_DEFINE_RESULT__&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__));else if("object"==typeof exports)module.exports=factory(require("stackframe"));else root.ErrorStackParser=factory(root.StackFrame)}(this,function ErrorStackParser(StackFrame){"use strict";var FIREFOX_SAFARI_STACK_REGEXP=/(^|@)\S+\:\d+/;var CHROME_IE_STACK_REGEXP=/\s+at .*(\S+\:\d+|\(native\))/;return{parse:function ErrorStackParser$$parse(error){if("undefined"!=typeof error.stacktrace||"undefined"!=typeof error["opera#sourceloc"])return this.parseOpera(error);else if(error.stack&&error.stack.match(CHROME_IE_STACK_REGEXP))return this.parseV8OrIE(error);else if(error.stack&&error.stack.match(FIREFOX_SAFARI_STACK_REGEXP))return this.parseFFOrSafari(error);else throw new Error("Cannot parse given Error object")},extractLocation:function ErrorStackParser$$extractLocation(urlLike){if(-1===urlLike.indexOf(":"))return[urlLike];var locationParts=urlLike.replace(/[\(\)\s]/g,"").split(":");var lastNumber=locationParts.pop();var possibleNumber=locationParts[locationParts.length-1];if(!isNaN(parseFloat(possibleNumber))&&isFinite(possibleNumber)){var lineNumber=locationParts.pop();return[locationParts.join(":"),lineNumber,lastNumber]}else return[locationParts.join(":"),lastNumber,void 0]},parseV8OrIE:function ErrorStackParser$$parseV8OrIE(error){return error.stack.split("\n").filter(function(line){return!!line.match(CHROME_IE_STACK_REGEXP)},this).map(function(line){var tokens=line.replace(/^\s+/,"").split(/\s+/).slice(1);var locationParts=this.extractLocation(tokens.pop());var functionName=!tokens[0]||"Anonymous"===tokens[0]?void 0:tokens[0];return new StackFrame(functionName,void 0,locationParts[0],locationParts[1],locationParts[2],line)},this)},parseFFOrSafari:function ErrorStackParser$$parseFFOrSafari(error){return error.stack.split("\n").filter(function(line){return!!line.match(FIREFOX_SAFARI_STACK_REGEXP)},this).map(function(line){var tokens=line.split("@");var locationParts=this.extractLocation(tokens.pop());var functionName=tokens.shift()||void 0;return new StackFrame(functionName,void 0,locationParts[0],locationParts[1],locationParts[2],line)},this)},parseOpera:function ErrorStackParser$$parseOpera(e){if(!e.stacktrace||e.message.indexOf("\n")>-1&&e.message.split("\n").length>e.stacktrace.split("\n").length)return this.parseOpera9(e);else if(!e.stack)return this.parseOpera10(e);else return this.parseOpera11(e)},parseOpera9:function ErrorStackParser$$parseOpera9(e){var lineRE=/Line (\d+).*script (?:in )?(\S+)/i;var lines=e.message.split("\n");var result=[];for(var i=2,len=lines.length;len>i;i+=2){var match=lineRE.exec(lines[i]);if(match)result.push(new StackFrame(void 0,void 0,match[2],match[1],void 0,lines[i]))}return result},parseOpera10:function ErrorStackParser$$parseOpera10(e){var lineRE=/Line (\d+).*script (?:in )?(\S+)(?:: In function (\S+))?$/i;var lines=e.stacktrace.split("\n");var result=[];for(var i=0,len=lines.length;len>i;i+=2){var match=lineRE.exec(lines[i]);if(match)result.push(new StackFrame(match[3]||void 0,void 0,match[2],match[1],void 0,lines[i]))}return result},parseOpera11:function ErrorStackParser$$parseOpera11(error){return error.stack.split("\n").filter(function(line){return!!line.match(FIREFOX_SAFARI_STACK_REGEXP)&&!line.match(/^Error created at/)},this).map(function(line){var tokens=line.split("@");var locationParts=this.extractLocation(tokens.pop());var functionCall=tokens.shift()||"";var functionName=functionCall.replace(/<anonymous function(: (\w+))?>/,"$2").replace(/\([^\)]*\)/g,"")||void 0;var argsRaw;if(functionCall.match(/\(([^\)]*)\)/))argsRaw=functionCall.replace(/^[^\(]+\(([^\)]*)\)$/,"$1");var args=void 0===argsRaw||"[arguments not available]"===argsRaw?void 0:argsRaw.split(",");return new StackFrame(functionName,args,locationParts[0],locationParts[1],locationParts[2],line)},this)}}})},function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_FACTORY__,__WEBPACK_AMD_DEFINE_ARRAY__,__WEBPACK_AMD_DEFINE_RESULT__;!function(root,factory){"use strict";if(true)!(__WEBPACK_AMD_DEFINE_ARRAY__=[],__WEBPACK_AMD_DEFINE_FACTORY__=factory,__WEBPACK_AMD_DEFINE_RESULT__="function"==typeof __WEBPACK_AMD_DEFINE_FACTORY__?__WEBPACK_AMD_DEFINE_FACTORY__.apply(exports,__WEBPACK_AMD_DEFINE_ARRAY__):__WEBPACK_AMD_DEFINE_FACTORY__,void 0!==__WEBPACK_AMD_DEFINE_RESULT__&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__));else if("object"==typeof exports)module.exports=factory();else root.StackFrame=factory()}(this,function(){"use strict";function _isNumber(n){return!isNaN(parseFloat(n))&&isFinite(n)}function StackFrame(functionName,args,fileName,lineNumber,columnNumber,source){if(void 0!==functionName)this.setFunctionName(functionName);if(void 0!==args)this.setArgs(args);if(void 0!==fileName)this.setFileName(fileName);if(void 0!==lineNumber)this.setLineNumber(lineNumber);if(void 0!==columnNumber)this.setColumnNumber(columnNumber);if(void 0!==source)this.setSource(source)}StackFrame.prototype={getFunctionName:function(){return this.functionName},setFunctionName:function(v){this.functionName=String(v)},getArgs:function(){return this.args},setArgs:function(v){if("[object Array]"!==Object.prototype.toString.call(v))throw new TypeError("Args must be an Array");this.args=v},getFileName:function(){return this.fileName},setFileName:function(v){this.fileName=String(v)},getLineNumber:function(){return this.lineNumber},setLineNumber:function(v){if(!_isNumber(v))throw new TypeError("Line Number must be a Number");this.lineNumber=Number(v)},getColumnNumber:function(){return this.columnNumber},setColumnNumber:function(v){if(!_isNumber(v))throw new TypeError("Column Number must be a Number");this.columnNumber=Number(v)},getSource:function(){return this.source},setSource:function(v){this.source=String(v)},toString:function(){var functionName=this.getFunctionName()||"{anonymous}";var args="("+(this.getArgs()||[]).join(",")+")";var fileName=this.getFileName()?"@"+this.getFileName():"";var lineNumber=_isNumber(this.getLineNumber())?":"+this.getLineNumber():"";var columnNumber=_isNumber(this.getColumnNumber())?":"+this.getColumnNumber():"";return functionName+args+fileName+lineNumber+columnNumber}};return StackFrame})},function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_FACTORY__,__WEBPACK_AMD_DEFINE_ARRAY__,__WEBPACK_AMD_DEFINE_RESULT__;!function(root,factory){"use strict";if(true)!(__WEBPACK_AMD_DEFINE_ARRAY__=[__webpack_require__(6)],__WEBPACK_AMD_DEFINE_FACTORY__=factory,__WEBPACK_AMD_DEFINE_RESULT__="function"==typeof __WEBPACK_AMD_DEFINE_FACTORY__?__WEBPACK_AMD_DEFINE_FACTORY__.apply(exports,__WEBPACK_AMD_DEFINE_ARRAY__):__WEBPACK_AMD_DEFINE_FACTORY__,void 0!==__WEBPACK_AMD_DEFINE_RESULT__&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__));else if("object"==typeof exports)module.exports=factory(require("stackframe"));else root.StackGenerator=factory(root.StackFrame)}(this,function(StackFrame){return{backtrace:function StackGenerator$$backtrace(opts){var stack=[];var maxStackSize=10;if("object"==typeof opts&&"number"==typeof opts.maxStackSize)maxStackSize=opts.maxStackSize;var curr=arguments.callee;for(;curr&&stack.length<maxStackSize;){var args=new Array(curr.arguments.length);for(var i=0;i<args.length;++i)args[i]=curr.arguments[i];if(/function(?:\s+([\w$]+))+\s*\(/.test(curr.toString()))stack.push(new StackFrame(RegExp.$1||void 0,args));else stack.push(new StackFrame(void 0,args));try{curr=curr.caller}catch(e){break}}return stack}}})},function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_FACTORY__,__WEBPACK_AMD_DEFINE_ARRAY__,__WEBPACK_AMD_DEFINE_RESULT__;!function(root,factory){"use strict";if(true)!(__WEBPACK_AMD_DEFINE_ARRAY__=[__webpack_require__(9),__webpack_require__(6)],__WEBPACK_AMD_DEFINE_FACTORY__=factory,__WEBPACK_AMD_DEFINE_RESULT__="function"==typeof __WEBPACK_AMD_DEFINE_FACTORY__?__WEBPACK_AMD_DEFINE_FACTORY__.apply(exports,__WEBPACK_AMD_DEFINE_ARRAY__):__WEBPACK_AMD_DEFINE_FACTORY__,void 0!==__WEBPACK_AMD_DEFINE_RESULT__&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__));else if("object"==typeof exports)module.exports=factory(require("source-map/lib/source-map-consumer"),require("stackframe"));else root.StackTraceGPS=factory(root.SourceMap||root.sourceMap,root.StackFrame)}(this,function(SourceMap,StackFrame){"use strict";function _xdr(url){return new Promise(function(resolve,reject){var req=new XMLHttpRequest;req.open("get",url);req.onerror=reject;req.onreadystatechange=function onreadystatechange(){if(4===req.readyState)if(req.status>=200&&req.status<300)resolve(req.responseText);else reject(new Error("HTTP status: "+req.status+" retrieving "+url))};req.send()})}function _atob(b64str){if("undefined"!=typeof window&&window.atob)return window.atob(b64str);else throw new Error("You must supply a polyfill for window.atob in this environment")}function _parseJson(string){if("undefined"!=typeof JSON&&JSON.parse)return JSON.parse(string);else throw new Error("You must supply a polyfill for JSON.parse in this environment")}function _findFunctionName(source,lineNumber){var reFunctionDeclaration=/function\s+([^(]*?)\s*\(([^)]*)\)/;var reFunctionExpression=/['"]?([$_A-Za-z][$_A-Za-z0-9]*)['"]?\s*[:=]\s*function\b/;var reFunctionEvaluation=/['"]?([$_A-Za-z][$_A-Za-z0-9]*)['"]?\s*[:=]\s*(?:eval|new Function)\b/;var lines=source.split("\n");var code="";var maxLines=Math.min(lineNumber,20);var m;for(var i=0;maxLines>i;++i){var line=lines[lineNumber-i-1];var commentPos=line.indexOf("//");if(commentPos>=0)line=line.substr(0,commentPos);if(line){code=line+code;m=reFunctionExpression.exec(code);if(m&&m[1])return m[1];m=reFunctionDeclaration.exec(code);if(m&&m[1])return m[1];m=reFunctionEvaluation.exec(code);
if(m&&m[1])return m[1]}}return}function _ensureSupportedEnvironment(){if("function"!=typeof Object.defineProperty||"function"!=typeof Object.create)throw new Error("Unable to consume source maps in older browsers")}function _ensureStackFrameIsLegit(stackframe){if("object"!=typeof stackframe)throw new TypeError("Given StackFrame is not an object");else if("string"!=typeof stackframe.fileName)throw new TypeError("Given file name is not a String");else if("number"!=typeof stackframe.lineNumber||stackframe.lineNumber%1!==0||stackframe.lineNumber<1)throw new TypeError("Given line number must be a positive integer");else if("number"!=typeof stackframe.columnNumber||stackframe.columnNumber%1!==0||stackframe.columnNumber<0)throw new TypeError("Given column number must be a non-negative integer");return true}function _findSourceMappingURL(source){var m=/\/\/[#@] ?sourceMappingURL=([^\s'"]+)\s*$/.exec(source);if(m&&m[1])return m[1];else throw new Error("sourceMappingURL not found")}function _extractLocationInfoFromSourceMap(rawSourceMap,args,lineNumber,columnNumber,sourceCache){var mapConsumer=new SourceMap.SourceMapConsumer(rawSourceMap);var loc=mapConsumer.originalPositionFor({line:lineNumber,column:columnNumber});var mappedSource=mapConsumer.sourceContentFor(loc.source);if(mappedSource)sourceCache[loc.source]=mappedSource;return new StackFrame(loc.name,args,loc.source,loc.line,loc.column)}return function StackTraceGPS(opts){if(!(this instanceof StackTraceGPS))return new StackTraceGPS(opts);opts=opts||{};this.sourceCache=opts.sourceCache||{};this.ajax=opts.ajax||_xdr;this._atob=opts.atob||_atob;this._get=function _get(location){return new Promise(function(resolve,reject){var isDataUrl="data:"===location.substr(0,5);if(this.sourceCache[location])resolve(this.sourceCache[location]);else if(opts.offline&&!isDataUrl)reject(new Error("Cannot make network requests in offline mode"));else if(isDataUrl){var supportedEncodingRegexp=/^data:application\/json;([\w=:"-]+;)*base64,/;var match=location.match(supportedEncodingRegexp);if(match){var sourceMapStart=match[0].length;var encodedSource=location.substr(sourceMapStart);var source=this._atob(encodedSource);this.sourceCache[location]=source;resolve(source)}else reject(new Error("The encoding of the inline sourcemap is not supported"))}else{var xhrPromise=this.ajax(location,{method:"get"});this.sourceCache[location]=xhrPromise;xhrPromise.then(resolve,reject)}}.bind(this))};this.pinpoint=function StackTraceGPS$$pinpoint(stackframe){return new Promise(function(resolve,reject){this.getMappedLocation(stackframe).then(function(mappedStackFrame){function resolveMappedStackFrame(){resolve(mappedStackFrame)}this.findFunctionName(mappedStackFrame).then(resolve,resolveMappedStackFrame)["catch"](resolveMappedStackFrame)}.bind(this),reject)}.bind(this))};this.findFunctionName=function StackTraceGPS$$findFunctionName(stackframe){return new Promise(function(resolve,reject){_ensureStackFrameIsLegit(stackframe);this._get(stackframe.fileName).then(function getSourceCallback(source){var guessedFunctionName=_findFunctionName(source,stackframe.lineNumber,stackframe.columnNumber);resolve(new StackFrame(guessedFunctionName,stackframe.args,stackframe.fileName,stackframe.lineNumber,stackframe.columnNumber))},reject)["catch"](reject)}.bind(this))};this.getMappedLocation=function StackTraceGPS$$getMappedLocation(stackframe){return new Promise(function(resolve,reject){_ensureSupportedEnvironment();_ensureStackFrameIsLegit(stackframe);var sourceCache=this.sourceCache;var fileName=stackframe.fileName;this._get(fileName).then(function(source){var sourceMappingURL=_findSourceMappingURL(source);var isDataUrl="data:"===sourceMappingURL.substr(0,5);var base=fileName.substring(0,fileName.lastIndexOf("/")+1);if("/"!==sourceMappingURL[0]&&!isDataUrl&&!/^https?:\/\/|^\/\//i.test(sourceMappingURL))sourceMappingURL=base+sourceMappingURL;this._get(sourceMappingURL).then(function(map){var line=stackframe.lineNumber;var column=stackframe.columnNumber;if("string"==typeof map)map=_parseJson(map.replace(/^\)\]\}'/,""));if("undefined"==typeof map.sourceRoot)map.sourceRoot=base;resolve(_extractLocationInfoFromSourceMap(map,stackframe.args,line,column,sourceCache))},reject)["catch"](reject)}.bind(this),reject)["catch"](reject)}.bind(this))}}})},function(module,exports,__webpack_require__){exports.SourceMapGenerator=__webpack_require__(10).SourceMapGenerator;exports.SourceMapConsumer=__webpack_require__(16).SourceMapConsumer;exports.SourceNode=__webpack_require__(19).SourceNode},function(module,exports,__webpack_require__){function SourceMapGenerator(aArgs){if(!aArgs)aArgs={};this._file=util.getArg(aArgs,"file",null);this._sourceRoot=util.getArg(aArgs,"sourceRoot",null);this._skipValidation=util.getArg(aArgs,"skipValidation",false);this._sources=new ArraySet;this._names=new ArraySet;this._mappings=new MappingList;this._sourcesContents=null}var base64VLQ=__webpack_require__(11);var util=__webpack_require__(13);var ArraySet=__webpack_require__(14).ArraySet;var MappingList=__webpack_require__(15).MappingList;SourceMapGenerator.prototype._version=3;SourceMapGenerator.fromSourceMap=function SourceMapGenerator_fromSourceMap(aSourceMapConsumer){var sourceRoot=aSourceMapConsumer.sourceRoot;var generator=new SourceMapGenerator({file:aSourceMapConsumer.file,sourceRoot:sourceRoot});aSourceMapConsumer.eachMapping(function(mapping){var newMapping={generated:{line:mapping.generatedLine,column:mapping.generatedColumn}};if(null!=mapping.source){newMapping.source=mapping.source;if(null!=sourceRoot)newMapping.source=util.relative(sourceRoot,newMapping.source);newMapping.original={line:mapping.originalLine,column:mapping.originalColumn};if(null!=mapping.name)newMapping.name=mapping.name}generator.addMapping(newMapping)});aSourceMapConsumer.sources.forEach(function(sourceFile){var content=aSourceMapConsumer.sourceContentFor(sourceFile);if(null!=content)generator.setSourceContent(sourceFile,content)});return generator};SourceMapGenerator.prototype.addMapping=function SourceMapGenerator_addMapping(aArgs){var generated=util.getArg(aArgs,"generated");var original=util.getArg(aArgs,"original",null);var source=util.getArg(aArgs,"source",null);var name=util.getArg(aArgs,"name",null);if(!this._skipValidation)this._validateMapping(generated,original,source,name);if(null!=source&&!this._sources.has(source))this._sources.add(source);if(null!=name&&!this._names.has(name))this._names.add(name);this._mappings.add({generatedLine:generated.line,generatedColumn:generated.column,originalLine:null!=original&&original.line,originalColumn:null!=original&&original.column,source:source,name:name})};SourceMapGenerator.prototype.setSourceContent=function SourceMapGenerator_setSourceContent(aSourceFile,aSourceContent){var source=aSourceFile;if(null!=this._sourceRoot)source=util.relative(this._sourceRoot,source);if(null!=aSourceContent){if(!this._sourcesContents)this._sourcesContents={};this._sourcesContents[util.toSetString(source)]=aSourceContent}else if(this._sourcesContents){delete this._sourcesContents[util.toSetString(source)];if(0===Object.keys(this._sourcesContents).length)this._sourcesContents=null}};SourceMapGenerator.prototype.applySourceMap=function SourceMapGenerator_applySourceMap(aSourceMapConsumer,aSourceFile,aSourceMapPath){var sourceFile=aSourceFile;if(null==aSourceFile){if(null==aSourceMapConsumer.file)throw new Error('SourceMapGenerator.prototype.applySourceMap requires either an explicit source file, or the source map\'s "file" property. Both were omitted.');sourceFile=aSourceMapConsumer.file}var sourceRoot=this._sourceRoot;if(null!=sourceRoot)sourceFile=util.relative(sourceRoot,sourceFile);var newSources=new ArraySet;var newNames=new ArraySet;this._mappings.unsortedForEach(function(mapping){if(mapping.source===sourceFile&&null!=mapping.originalLine){var original=aSourceMapConsumer.originalPositionFor({line:mapping.originalLine,column:mapping.originalColumn});if(null!=original.source){mapping.source=original.source;if(null!=aSourceMapPath)mapping.source=util.join(aSourceMapPath,mapping.source);if(null!=sourceRoot)mapping.source=util.relative(sourceRoot,mapping.source);mapping.originalLine=original.line;mapping.originalColumn=original.column;if(null!=original.name)mapping.name=original.name}}var source=mapping.source;if(null!=source&&!newSources.has(source))newSources.add(source);var name=mapping.name;if(null!=name&&!newNames.has(name))newNames.add(name)},this);this._sources=newSources;this._names=newNames;aSourceMapConsumer.sources.forEach(function(sourceFile){var content=aSourceMapConsumer.sourceContentFor(sourceFile);if(null!=content){if(null!=aSourceMapPath)sourceFile=util.join(aSourceMapPath,sourceFile);if(null!=sourceRoot)sourceFile=util.relative(sourceRoot,sourceFile);this.setSourceContent(sourceFile,content)}},this)};SourceMapGenerator.prototype._validateMapping=function SourceMapGenerator_validateMapping(aGenerated,aOriginal,aSource,aName){if(aGenerated&&"line"in aGenerated&&"column"in aGenerated&&aGenerated.line>0&&aGenerated.column>=0&&!aOriginal&&!aSource&&!aName)return;else if(aGenerated&&"line"in aGenerated&&"column"in aGenerated&&aOriginal&&"line"in aOriginal&&"column"in aOriginal&&aGenerated.line>0&&aGenerated.column>=0&&aOriginal.line>0&&aOriginal.column>=0&&aSource)return;else throw new Error("Invalid mapping: "+JSON.stringify({generated:aGenerated,source:aSource,original:aOriginal,name:aName}))};SourceMapGenerator.prototype._serializeMappings=function SourceMapGenerator_serializeMappings(){var previousGeneratedColumn=0;var previousGeneratedLine=1;var previousOriginalColumn=0;var previousOriginalLine=0;var previousName=0;var previousSource=0;var result="";var mapping;var nameIdx;var sourceIdx;var mappings=this._mappings.toArray();for(var i=0,len=mappings.length;len>i;i++){mapping=mappings[i];if(mapping.generatedLine!==previousGeneratedLine){previousGeneratedColumn=0;for(;mapping.generatedLine!==previousGeneratedLine;){result+=";";previousGeneratedLine++}}else if(i>0){if(!util.compareByGeneratedPositionsInflated(mapping,mappings[i-1]))continue;result+=","}result+=base64VLQ.encode(mapping.generatedColumn-previousGeneratedColumn);previousGeneratedColumn=mapping.generatedColumn;if(null!=mapping.source){sourceIdx=this._sources.indexOf(mapping.source);result+=base64VLQ.encode(sourceIdx-previousSource);previousSource=sourceIdx;result+=base64VLQ.encode(mapping.originalLine-1-previousOriginalLine);previousOriginalLine=mapping.originalLine-1;result+=base64VLQ.encode(mapping.originalColumn-previousOriginalColumn);previousOriginalColumn=mapping.originalColumn;if(null!=mapping.name){nameIdx=this._names.indexOf(mapping.name);result+=base64VLQ.encode(nameIdx-previousName);previousName=nameIdx}}}return result};SourceMapGenerator.prototype._generateSourcesContent=function SourceMapGenerator_generateSourcesContent(aSources,aSourceRoot){return aSources.map(function(source){if(!this._sourcesContents)return null;if(null!=aSourceRoot)source=util.relative(aSourceRoot,source);var key=util.toSetString(source);return Object.prototype.hasOwnProperty.call(this._sourcesContents,key)?this._sourcesContents[key]:null},this)};SourceMapGenerator.prototype.toJSON=function SourceMapGenerator_toJSON(){var map={version:this._version,sources:this._sources.toArray(),names:this._names.toArray(),mappings:this._serializeMappings()};if(null!=this._file)map.file=this._file;if(null!=this._sourceRoot)map.sourceRoot=this._sourceRoot;if(this._sourcesContents)map.sourcesContent=this._generateSourcesContent(map.sources,map.sourceRoot);return map};SourceMapGenerator.prototype.toString=function SourceMapGenerator_toString(){return JSON.stringify(this.toJSON())};exports.SourceMapGenerator=SourceMapGenerator},function(module,exports,__webpack_require__){function toVLQSigned(aValue){return 0>aValue?(-aValue<<1)+1:(aValue<<1)+0}function fromVLQSigned(aValue){var isNegative=1===(1&aValue);var shifted=aValue>>1;return isNegative?-shifted:shifted}var base64=__webpack_require__(12);var VLQ_BASE_SHIFT=5;var VLQ_BASE=1<<VLQ_BASE_SHIFT;var VLQ_BASE_MASK=VLQ_BASE-1;var VLQ_CONTINUATION_BIT=VLQ_BASE;exports.encode=function base64VLQ_encode(aValue){var encoded="";var digit;var vlq=toVLQSigned(aValue);do{digit=vlq&VLQ_BASE_MASK;vlq>>>=VLQ_BASE_SHIFT;if(vlq>0)digit|=VLQ_CONTINUATION_BIT;encoded+=base64.encode(digit)}while(vlq>0);return encoded};exports.decode=function base64VLQ_decode(aStr,aIndex,aOutParam){var strLen=aStr.length;var result=0;var shift=0;var continuation,digit;do{if(aIndex>=strLen)throw new Error("Expected more digits in base 64 VLQ value.");digit=base64.decode(aStr.charCodeAt(aIndex++));if(-1===digit)throw new Error("Invalid base64 digit: "+aStr.charAt(aIndex-1));continuation=!!(digit&VLQ_CONTINUATION_BIT);digit&=VLQ_BASE_MASK;result+=digit<<shift;shift+=VLQ_BASE_SHIFT}while(continuation);aOutParam.value=fromVLQSigned(result);aOutParam.rest=aIndex}},function(module,exports){var intToCharMap="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".split("");exports.encode=function(number){if(number>=0&&number<intToCharMap.length)return intToCharMap[number];throw new TypeError("Must be between 0 and 63: "+number)};exports.decode=function(charCode){var bigA=65;var bigZ=90;var littleA=97;var littleZ=122;var zero=48;var nine=57;var plus=43;var slash=47;var littleOffset=26;var numberOffset=52;if(charCode>=bigA&&bigZ>=charCode)return charCode-bigA;if(charCode>=littleA&&littleZ>=charCode)return charCode-littleA+littleOffset;if(charCode>=zero&&nine>=charCode)return charCode-zero+numberOffset;if(charCode==plus)return 62;if(charCode==slash)return 63;return-1}},function(module,exports){function getArg(aArgs,aName,aDefaultValue){if(aName in aArgs)return aArgs[aName];else if(3===arguments.length)return aDefaultValue;else throw new Error('"'+aName+'" is a required argument.')}function urlParse(aUrl){var match=aUrl.match(urlRegexp);if(!match)return null;return{scheme:match[1],auth:match[2],host:match[3],port:match[4],path:match[5]}}function urlGenerate(aParsedUrl){var url="";if(aParsedUrl.scheme)url+=aParsedUrl.scheme+":";url+="//";if(aParsedUrl.auth)url+=aParsedUrl.auth+"@";if(aParsedUrl.host)url+=aParsedUrl.host;if(aParsedUrl.port)url+=":"+aParsedUrl.port;if(aParsedUrl.path)url+=aParsedUrl.path;return url}function normalize(aPath){var path=aPath;var url=urlParse(aPath);if(url){if(!url.path)return aPath;path=url.path}var isAbsolute=exports.isAbsolute(path);var parts=path.split(/\/+/);for(var part,up=0,i=parts.length-1;i>=0;i--){part=parts[i];if("."===part)parts.splice(i,1);else if(".."===part)up++;else if(up>0)if(""===part){parts.splice(i+1,up);up=0}else{parts.splice(i,2);up--}}path=parts.join("/");if(""===path)path=isAbsolute?"/":".";if(url){url.path=path;return urlGenerate(url)}return path}function join(aRoot,aPath){if(""===aRoot)aRoot=".";if(""===aPath)aPath=".";var aPathUrl=urlParse(aPath);var aRootUrl=urlParse(aRoot);if(aRootUrl)aRoot=aRootUrl.path||"/";if(aPathUrl&&!aPathUrl.scheme){if(aRootUrl)aPathUrl.scheme=aRootUrl.scheme;return urlGenerate(aPathUrl)}if(aPathUrl||aPath.match(dataUrlRegexp))return aPath;if(aRootUrl&&!aRootUrl.host&&!aRootUrl.path){aRootUrl.host=aPath;return urlGenerate(aRootUrl)}var joined="/"===aPath.charAt(0)?aPath:normalize(aRoot.replace(/\/+$/,"")+"/"+aPath);if(aRootUrl){aRootUrl.path=joined;return urlGenerate(aRootUrl)}return joined}function relative(aRoot,aPath){if(""===aRoot)aRoot=".";aRoot=aRoot.replace(/\/$/,"");var level=0;for(;0!==aPath.indexOf(aRoot+"/");){var index=aRoot.lastIndexOf("/");if(0>index)return aPath;aRoot=aRoot.slice(0,index);if(aRoot.match(/^([^\/]+:\/)?\/*$/))return aPath;++level}return Array(level+1).join("../")+aPath.substr(aRoot.length+1)}function toSetString(aStr){return"$"+aStr}function fromSetString(aStr){return aStr.substr(1)}function compareByOriginalPositions(mappingA,mappingB,onlyCompareOriginal){var cmp=mappingA.source-mappingB.source;if(0!==cmp)return cmp;cmp=mappingA.originalLine-mappingB.originalLine;if(0!==cmp)return cmp;cmp=mappingA.originalColumn-mappingB.originalColumn;if(0!==cmp||onlyCompareOriginal)return cmp;cmp=mappingA.generatedColumn-mappingB.generatedColumn;if(0!==cmp)return cmp;cmp=mappingA.generatedLine-mappingB.generatedLine;if(0!==cmp)return cmp;return mappingA.name-mappingB.name}function compareByGeneratedPositionsDeflated(mappingA,mappingB,onlyCompareGenerated){var cmp=mappingA.generatedLine-mappingB.generatedLine;if(0!==cmp)return cmp;cmp=mappingA.generatedColumn-mappingB.generatedColumn;if(0!==cmp||onlyCompareGenerated)return cmp;cmp=mappingA.source-mappingB.source;if(0!==cmp)return cmp;cmp=mappingA.originalLine-mappingB.originalLine;if(0!==cmp)return cmp;cmp=mappingA.originalColumn-mappingB.originalColumn;if(0!==cmp)return cmp;return mappingA.name-mappingB.name}function strcmp(aStr1,aStr2){if(aStr1===aStr2)return 0;if(aStr1>aStr2)return 1;return-1}function compareByGeneratedPositionsInflated(mappingA,mappingB){var cmp=mappingA.generatedLine-mappingB.generatedLine;if(0!==cmp)return cmp;cmp=mappingA.generatedColumn-mappingB.generatedColumn;if(0!==cmp)return cmp;cmp=strcmp(mappingA.source,mappingB.source);if(0!==cmp)return cmp;cmp=mappingA.originalLine-mappingB.originalLine;if(0!==cmp)return cmp;cmp=mappingA.originalColumn-mappingB.originalColumn;if(0!==cmp)return cmp;return strcmp(mappingA.name,mappingB.name)}exports.getArg=getArg;var urlRegexp=/^(?:([\w+\-.]+):)?\/\/(?:(\w+:\w+)@)?([\w.]*)(?::(\d+))?(\S*)$/;var dataUrlRegexp=/^data:.+\,.+$/;exports.urlParse=urlParse;exports.urlGenerate=urlGenerate;exports.normalize=normalize;exports.join=join;exports.isAbsolute=function(aPath){return"/"===aPath.charAt(0)||!!aPath.match(urlRegexp)};exports.relative=relative;exports.toSetString=toSetString;exports.fromSetString=fromSetString;exports.compareByOriginalPositions=compareByOriginalPositions;exports.compareByGeneratedPositionsDeflated=compareByGeneratedPositionsDeflated;exports.compareByGeneratedPositionsInflated=compareByGeneratedPositionsInflated},function(module,exports,__webpack_require__){function ArraySet(){this._array=[];this._set={}}var util=__webpack_require__(13);ArraySet.fromArray=function ArraySet_fromArray(aArray,aAllowDuplicates){var set=new ArraySet;for(var i=0,len=aArray.length;len>i;i++)set.add(aArray[i],aAllowDuplicates);return set};ArraySet.prototype.size=function ArraySet_size(){return Object.getOwnPropertyNames(this._set).length};ArraySet.prototype.add=function ArraySet_add(aStr,aAllowDuplicates){var sStr=util.toSetString(aStr);var isDuplicate=this._set.hasOwnProperty(sStr);var idx=this._array.length;if(!isDuplicate||aAllowDuplicates)this._array.push(aStr);if(!isDuplicate)this._set[sStr]=idx};ArraySet.prototype.has=function ArraySet_has(aStr){var sStr=util.toSetString(aStr);return this._set.hasOwnProperty(sStr)};ArraySet.prototype.indexOf=function ArraySet_indexOf(aStr){var sStr=util.toSetString(aStr);if(this._set.hasOwnProperty(sStr))return this._set[sStr];throw new Error('"'+aStr+'" is not in the set.')};ArraySet.prototype.at=function ArraySet_at(aIdx){if(aIdx>=0&&aIdx<this._array.length)return this._array[aIdx];throw new Error("No element indexed by "+aIdx)};ArraySet.prototype.toArray=function ArraySet_toArray(){return this._array.slice()};exports.ArraySet=ArraySet},function(module,exports,__webpack_require__){function generatedPositionAfter(mappingA,mappingB){var lineA=mappingA.generatedLine;var lineB=mappingB.generatedLine;var columnA=mappingA.generatedColumn;var columnB=mappingB.generatedColumn;return lineB>lineA||lineB==lineA&&columnB>=columnA||util.compareByGeneratedPositionsInflated(mappingA,mappingB)<=0}function MappingList(){this._array=[];this._sorted=true;this._last={generatedLine:-1,generatedColumn:0}}var util=__webpack_require__(13);MappingList.prototype.unsortedForEach=function MappingList_forEach(aCallback,aThisArg){this._array.forEach(aCallback,aThisArg)};MappingList.prototype.add=function MappingList_add(aMapping){if(generatedPositionAfter(this._last,aMapping)){this._last=aMapping;this._array.push(aMapping)}else{this._sorted=false;this._array.push(aMapping)}};MappingList.prototype.toArray=function MappingList_toArray(){if(!this._sorted){this._array.sort(util.compareByGeneratedPositionsInflated);this._sorted=true}return this._array};exports.MappingList=MappingList},function(module,exports,__webpack_require__){function SourceMapConsumer(aSourceMap){var sourceMap=aSourceMap;if("string"==typeof aSourceMap)sourceMap=JSON.parse(aSourceMap.replace(/^\)\]\}'/,""));return null!=sourceMap.sections?new IndexedSourceMapConsumer(sourceMap):new BasicSourceMapConsumer(sourceMap)}function BasicSourceMapConsumer(aSourceMap){var sourceMap=aSourceMap;if("string"==typeof aSourceMap)sourceMap=JSON.parse(aSourceMap.replace(/^\)\]\}'/,""));var version=util.getArg(sourceMap,"version");var sources=util.getArg(sourceMap,"sources");var names=util.getArg(sourceMap,"names",[]);var sourceRoot=util.getArg(sourceMap,"sourceRoot",null);var sourcesContent=util.getArg(sourceMap,"sourcesContent",null);var mappings=util.getArg(sourceMap,"mappings");var file=util.getArg(sourceMap,"file",null);if(version!=this._version)throw new Error("Unsupported version: "+version);sources=sources.map(util.normalize).map(function(source){return sourceRoot&&util.isAbsolute(sourceRoot)&&util.isAbsolute(source)?util.relative(sourceRoot,source):source});this._names=ArraySet.fromArray(names,true);this._sources=ArraySet.fromArray(sources,true);this.sourceRoot=sourceRoot;this.sourcesContent=sourcesContent;this._mappings=mappings;this.file=file}function Mapping(){this.generatedLine=0;this.generatedColumn=0;this.source=null;this.originalLine=null;this.originalColumn=null;this.name=null}function IndexedSourceMapConsumer(aSourceMap){var sourceMap=aSourceMap;if("string"==typeof aSourceMap)sourceMap=JSON.parse(aSourceMap.replace(/^\)\]\}'/,""));var version=util.getArg(sourceMap,"version");var sections=util.getArg(sourceMap,"sections");if(version!=this._version)throw new Error("Unsupported version: "+version);this._sources=new ArraySet;this._names=new ArraySet;var lastOffset={line:-1,column:0};this._sections=sections.map(function(s){if(s.url)throw new Error("Support for url field in sections not implemented.");var offset=util.getArg(s,"offset");var offsetLine=util.getArg(offset,"line");var offsetColumn=util.getArg(offset,"column");if(offsetLine<lastOffset.line||offsetLine===lastOffset.line&&offsetColumn<lastOffset.column)throw new Error("Section offsets must be ordered and non-overlapping.");lastOffset=offset;return{generatedOffset:{generatedLine:offsetLine+1,generatedColumn:offsetColumn+1},consumer:new SourceMapConsumer(util.getArg(s,"map"))}})}var util=__webpack_require__(13);var binarySearch=__webpack_require__(17);var ArraySet=__webpack_require__(14).ArraySet;var base64VLQ=__webpack_require__(11);var quickSort=__webpack_require__(18).quickSort;SourceMapConsumer.fromSourceMap=function(aSourceMap){return BasicSourceMapConsumer.fromSourceMap(aSourceMap)};SourceMapConsumer.prototype._version=3;SourceMapConsumer.prototype.__generatedMappings=null;Object.defineProperty(SourceMapConsumer.prototype,"_generatedMappings",{get:function(){if(!this.__generatedMappings)this._parseMappings(this._mappings,this.sourceRoot);return this.__generatedMappings}});SourceMapConsumer.prototype.__originalMappings=null;Object.defineProperty(SourceMapConsumer.prototype,"_originalMappings",{get:function(){if(!this.__originalMappings)this._parseMappings(this._mappings,this.sourceRoot);return this.__originalMappings}});SourceMapConsumer.prototype._charIsMappingSeparator=function SourceMapConsumer_charIsMappingSeparator(aStr,index){var c=aStr.charAt(index);return";"===c||","===c};SourceMapConsumer.prototype._parseMappings=function SourceMapConsumer_parseMappings(aStr,aSourceRoot){throw new Error("Subclasses must implement _parseMappings")};SourceMapConsumer.GENERATED_ORDER=1;SourceMapConsumer.ORIGINAL_ORDER=2;SourceMapConsumer.GREATEST_LOWER_BOUND=1;SourceMapConsumer.LEAST_UPPER_BOUND=2;SourceMapConsumer.prototype.eachMapping=function SourceMapConsumer_eachMapping(aCallback,aContext,aOrder){var context=aContext||null;var order=aOrder||SourceMapConsumer.GENERATED_ORDER;var mappings;switch(order){case SourceMapConsumer.GENERATED_ORDER:mappings=this._generatedMappings;break;case SourceMapConsumer.ORIGINAL_ORDER:mappings=this._originalMappings;break;default:throw new Error("Unknown order of iteration.")}var sourceRoot=this.sourceRoot;mappings.map(function(mapping){var source=null===mapping.source?null:this._sources.at(mapping.source);if(null!=source&&null!=sourceRoot)source=util.join(sourceRoot,source);return{source:source,generatedLine:mapping.generatedLine,generatedColumn:mapping.generatedColumn,originalLine:mapping.originalLine,originalColumn:mapping.originalColumn,name:null===mapping.name?null:this._names.at(mapping.name)}},this).forEach(aCallback,context)};SourceMapConsumer.prototype.allGeneratedPositionsFor=function SourceMapConsumer_allGeneratedPositionsFor(aArgs){var line=util.getArg(aArgs,"line");var needle={source:util.getArg(aArgs,"source"),originalLine:line,originalColumn:util.getArg(aArgs,"column",0)};if(null!=this.sourceRoot)needle.source=util.relative(this.sourceRoot,needle.source);if(!this._sources.has(needle.source))return[];needle.source=this._sources.indexOf(needle.source);var mappings=[];var index=this._findMapping(needle,this._originalMappings,"originalLine","originalColumn",util.compareByOriginalPositions,binarySearch.LEAST_UPPER_BOUND);if(index>=0){var mapping=this._originalMappings[index];if(void 0===aArgs.column){var originalLine=mapping.originalLine;for(;mapping&&mapping.originalLine===originalLine;){mappings.push({line:util.getArg(mapping,"generatedLine",null),column:util.getArg(mapping,"generatedColumn",null),lastColumn:util.getArg(mapping,"lastGeneratedColumn",null)});mapping=this._originalMappings[++index]}}else{var originalColumn=mapping.originalColumn;for(;mapping&&mapping.originalLine===line&&mapping.originalColumn==originalColumn;){mappings.push({line:util.getArg(mapping,"generatedLine",null),column:util.getArg(mapping,"generatedColumn",null),lastColumn:util.getArg(mapping,"lastGeneratedColumn",null)});mapping=this._originalMappings[++index]}}}return mappings};exports.SourceMapConsumer=SourceMapConsumer;BasicSourceMapConsumer.prototype=Object.create(SourceMapConsumer.prototype);BasicSourceMapConsumer.prototype.consumer=SourceMapConsumer;BasicSourceMapConsumer.fromSourceMap=function SourceMapConsumer_fromSourceMap(aSourceMap){var smc=Object.create(BasicSourceMapConsumer.prototype);var names=smc._names=ArraySet.fromArray(aSourceMap._names.toArray(),true);var sources=smc._sources=ArraySet.fromArray(aSourceMap._sources.toArray(),true);smc.sourceRoot=aSourceMap._sourceRoot;smc.sourcesContent=aSourceMap._generateSourcesContent(smc._sources.toArray(),smc.sourceRoot);smc.file=aSourceMap._file;var generatedMappings=aSourceMap._mappings.toArray().slice();var destGeneratedMappings=smc.__generatedMappings=[];var destOriginalMappings=smc.__originalMappings=[];for(var i=0,length=generatedMappings.length;length>i;i++){var srcMapping=generatedMappings[i];var destMapping=new Mapping;destMapping.generatedLine=srcMapping.generatedLine;destMapping.generatedColumn=srcMapping.generatedColumn;if(srcMapping.source){destMapping.source=sources.indexOf(srcMapping.source);destMapping.originalLine=srcMapping.originalLine;destMapping.originalColumn=srcMapping.originalColumn;if(srcMapping.name)destMapping.name=names.indexOf(srcMapping.name);destOriginalMappings.push(destMapping)}destGeneratedMappings.push(destMapping)}quickSort(smc.__originalMappings,util.compareByOriginalPositions);return smc};BasicSourceMapConsumer.prototype._version=3;Object.defineProperty(BasicSourceMapConsumer.prototype,"sources",{get:function(){return this._sources.toArray().map(function(s){return null!=this.sourceRoot?util.join(this.sourceRoot,s):s},this)}});BasicSourceMapConsumer.prototype._parseMappings=function SourceMapConsumer_parseMappings(aStr,aSourceRoot){var generatedLine=1;var previousGeneratedColumn=0;var previousOriginalLine=0;var previousOriginalColumn=0;var previousSource=0;var previousName=0;var length=aStr.length;var index=0;var cachedSegments={};var temp={};var originalMappings=[];var generatedMappings=[];var mapping,str,segment,end,value;for(;length>index;)if(";"===aStr.charAt(index)){generatedLine++;index++;previousGeneratedColumn=0}else if(","===aStr.charAt(index))index++;else{mapping=new Mapping;mapping.generatedLine=generatedLine;for(end=index;length>end&&!this._charIsMappingSeparator(aStr,end);end++);str=aStr.slice(index,end);segment=cachedSegments[str];if(segment)index+=str.length;else{segment=[];for(;end>index;){base64VLQ.decode(aStr,index,temp);value=temp.value;index=temp.rest;segment.push(value)}if(2===segment.length)throw new Error("Found a source, but no line and column");if(3===segment.length)throw new Error("Found a source and line, but no column");cachedSegments[str]=segment}mapping.generatedColumn=previousGeneratedColumn+segment[0];previousGeneratedColumn=mapping.generatedColumn;if(segment.length>1){mapping.source=previousSource+segment[1];previousSource+=segment[1];mapping.originalLine=previousOriginalLine+segment[2];previousOriginalLine=mapping.originalLine;mapping.originalLine+=1;mapping.originalColumn=previousOriginalColumn+segment[3];previousOriginalColumn=mapping.originalColumn;if(segment.length>4){mapping.name=previousName+segment[4];previousName+=segment[4]}}generatedMappings.push(mapping);if("number"==typeof mapping.originalLine)originalMappings.push(mapping)}quickSort(generatedMappings,util.compareByGeneratedPositionsDeflated);this.__generatedMappings=generatedMappings;quickSort(originalMappings,util.compareByOriginalPositions);this.__originalMappings=originalMappings};BasicSourceMapConsumer.prototype._findMapping=function SourceMapConsumer_findMapping(aNeedle,aMappings,aLineName,aColumnName,aComparator,aBias){if(aNeedle[aLineName]<=0)throw new TypeError("Line must be greater than or equal to 1, got "+aNeedle[aLineName]);if(aNeedle[aColumnName]<0)throw new TypeError("Column must be greater than or equal to 0, got "+aNeedle[aColumnName]);return binarySearch.search(aNeedle,aMappings,aComparator,aBias)};BasicSourceMapConsumer.prototype.computeColumnSpans=function SourceMapConsumer_computeColumnSpans(){for(var index=0;index<this._generatedMappings.length;++index){var mapping=this._generatedMappings[index];if(index+1<this._generatedMappings.length){var nextMapping=this._generatedMappings[index+1];if(mapping.generatedLine===nextMapping.generatedLine){mapping.lastGeneratedColumn=nextMapping.generatedColumn-1;continue}}mapping.lastGeneratedColumn=1/0}};BasicSourceMapConsumer.prototype.originalPositionFor=function SourceMapConsumer_originalPositionFor(aArgs){var needle={generatedLine:util.getArg(aArgs,"line"),generatedColumn:util.getArg(aArgs,"column")};var index=this._findMapping(needle,this._generatedMappings,"generatedLine","generatedColumn",util.compareByGeneratedPositionsDeflated,util.getArg(aArgs,"bias",SourceMapConsumer.GREATEST_LOWER_BOUND));if(index>=0){var mapping=this._generatedMappings[index];if(mapping.generatedLine===needle.generatedLine){var source=util.getArg(mapping,"source",null);if(null!==source){source=this._sources.at(source);if(null!=this.sourceRoot)source=util.join(this.sourceRoot,source)}var name=util.getArg(mapping,"name",null);if(null!==name)name=this._names.at(name);return{source:source,line:util.getArg(mapping,"originalLine",null),column:util.getArg(mapping,"originalColumn",null),name:name}}}return{source:null,line:null,column:null,name:null}};BasicSourceMapConsumer.prototype.hasContentsOfAllSources=function BasicSourceMapConsumer_hasContentsOfAllSources(){if(!this.sourcesContent)return false;return this.sourcesContent.length>=this._sources.size()&&!this.sourcesContent.some(function(sc){return null==sc})};BasicSourceMapConsumer.prototype.sourceContentFor=function SourceMapConsumer_sourceContentFor(aSource,nullOnMissing){
if(!this.sourcesContent)return null;if(null!=this.sourceRoot)aSource=util.relative(this.sourceRoot,aSource);if(this._sources.has(aSource))return this.sourcesContent[this._sources.indexOf(aSource)];var url;if(null!=this.sourceRoot&&(url=util.urlParse(this.sourceRoot))){var fileUriAbsPath=aSource.replace(/^file:\/\//,"");if("file"==url.scheme&&this._sources.has(fileUriAbsPath))return this.sourcesContent[this._sources.indexOf(fileUriAbsPath)];if((!url.path||"/"==url.path)&&this._sources.has("/"+aSource))return this.sourcesContent[this._sources.indexOf("/"+aSource)]}if(nullOnMissing)return null;else throw new Error('"'+aSource+'" is not in the SourceMap.')};BasicSourceMapConsumer.prototype.generatedPositionFor=function SourceMapConsumer_generatedPositionFor(aArgs){var source=util.getArg(aArgs,"source");if(null!=this.sourceRoot)source=util.relative(this.sourceRoot,source);if(!this._sources.has(source))return{line:null,column:null,lastColumn:null};source=this._sources.indexOf(source);var needle={source:source,originalLine:util.getArg(aArgs,"line"),originalColumn:util.getArg(aArgs,"column")};var index=this._findMapping(needle,this._originalMappings,"originalLine","originalColumn",util.compareByOriginalPositions,util.getArg(aArgs,"bias",SourceMapConsumer.GREATEST_LOWER_BOUND));if(index>=0){var mapping=this._originalMappings[index];if(mapping.source===needle.source)return{line:util.getArg(mapping,"generatedLine",null),column:util.getArg(mapping,"generatedColumn",null),lastColumn:util.getArg(mapping,"lastGeneratedColumn",null)}}return{line:null,column:null,lastColumn:null}};exports.BasicSourceMapConsumer=BasicSourceMapConsumer;IndexedSourceMapConsumer.prototype=Object.create(SourceMapConsumer.prototype);IndexedSourceMapConsumer.prototype.constructor=SourceMapConsumer;IndexedSourceMapConsumer.prototype._version=3;Object.defineProperty(IndexedSourceMapConsumer.prototype,"sources",{get:function(){var sources=[];for(var i=0;i<this._sections.length;i++)for(var j=0;j<this._sections[i].consumer.sources.length;j++)sources.push(this._sections[i].consumer.sources[j]);return sources}});IndexedSourceMapConsumer.prototype.originalPositionFor=function IndexedSourceMapConsumer_originalPositionFor(aArgs){var needle={generatedLine:util.getArg(aArgs,"line"),generatedColumn:util.getArg(aArgs,"column")};var sectionIndex=binarySearch.search(needle,this._sections,function(needle,section){var cmp=needle.generatedLine-section.generatedOffset.generatedLine;if(cmp)return cmp;return needle.generatedColumn-section.generatedOffset.generatedColumn});var section=this._sections[sectionIndex];if(!section)return{source:null,line:null,column:null,name:null};return section.consumer.originalPositionFor({line:needle.generatedLine-(section.generatedOffset.generatedLine-1),column:needle.generatedColumn-(section.generatedOffset.generatedLine===needle.generatedLine?section.generatedOffset.generatedColumn-1:0),bias:aArgs.bias})};IndexedSourceMapConsumer.prototype.hasContentsOfAllSources=function IndexedSourceMapConsumer_hasContentsOfAllSources(){return this._sections.every(function(s){return s.consumer.hasContentsOfAllSources()})};IndexedSourceMapConsumer.prototype.sourceContentFor=function IndexedSourceMapConsumer_sourceContentFor(aSource,nullOnMissing){for(var i=0;i<this._sections.length;i++){var section=this._sections[i];var content=section.consumer.sourceContentFor(aSource,true);if(content)return content}if(nullOnMissing)return null;else throw new Error('"'+aSource+'" is not in the SourceMap.')};IndexedSourceMapConsumer.prototype.generatedPositionFor=function IndexedSourceMapConsumer_generatedPositionFor(aArgs){for(var i=0;i<this._sections.length;i++){var section=this._sections[i];if(-1===section.consumer.sources.indexOf(util.getArg(aArgs,"source")))continue;var generatedPosition=section.consumer.generatedPositionFor(aArgs);if(generatedPosition){var ret={line:generatedPosition.line+(section.generatedOffset.generatedLine-1),column:generatedPosition.column+(section.generatedOffset.generatedLine===generatedPosition.line?section.generatedOffset.generatedColumn-1:0)};return ret}}return{line:null,column:null}};IndexedSourceMapConsumer.prototype._parseMappings=function IndexedSourceMapConsumer_parseMappings(aStr,aSourceRoot){this.__generatedMappings=[];this.__originalMappings=[];for(var i=0;i<this._sections.length;i++){var section=this._sections[i];var sectionMappings=section.consumer._generatedMappings;for(var j=0;j<sectionMappings.length;j++){var mapping=sectionMappings[j];var source=section.consumer._sources.at(mapping.source);if(null!==section.consumer.sourceRoot)source=util.join(section.consumer.sourceRoot,source);this._sources.add(source);source=this._sources.indexOf(source);var name=section.consumer._names.at(mapping.name);this._names.add(name);name=this._names.indexOf(name);var adjustedMapping={source:source,generatedLine:mapping.generatedLine+(section.generatedOffset.generatedLine-1),generatedColumn:mapping.generatedColumn+(section.generatedOffset.generatedLine===mapping.generatedLine?section.generatedOffset.generatedColumn-1:0),originalLine:mapping.originalLine,originalColumn:mapping.originalColumn,name:name};this.__generatedMappings.push(adjustedMapping);if("number"==typeof adjustedMapping.originalLine)this.__originalMappings.push(adjustedMapping)}}quickSort(this.__generatedMappings,util.compareByGeneratedPositionsDeflated);quickSort(this.__originalMappings,util.compareByOriginalPositions)};exports.IndexedSourceMapConsumer=IndexedSourceMapConsumer},function(module,exports){function recursiveSearch(aLow,aHigh,aNeedle,aHaystack,aCompare,aBias){var mid=Math.floor((aHigh-aLow)/2)+aLow;var cmp=aCompare(aNeedle,aHaystack[mid],true);if(0===cmp)return mid;else if(cmp>0){if(aHigh-mid>1)return recursiveSearch(mid,aHigh,aNeedle,aHaystack,aCompare,aBias);if(aBias==exports.LEAST_UPPER_BOUND)return aHigh<aHaystack.length?aHigh:-1;else return mid}else{if(mid-aLow>1)return recursiveSearch(aLow,mid,aNeedle,aHaystack,aCompare,aBias);if(aBias==exports.LEAST_UPPER_BOUND)return mid;else return 0>aLow?-1:aLow}}exports.GREATEST_LOWER_BOUND=1;exports.LEAST_UPPER_BOUND=2;exports.search=function search(aNeedle,aHaystack,aCompare,aBias){if(0===aHaystack.length)return-1;var index=recursiveSearch(-1,aHaystack.length,aNeedle,aHaystack,aCompare,aBias||exports.GREATEST_LOWER_BOUND);if(0>index)return-1;for(;index-1>=0&&0===aCompare(aHaystack[index],aHaystack[index-1],true);)--index;return index}},function(module,exports){function swap(ary,x,y){var temp=ary[x];ary[x]=ary[y];ary[y]=temp}function randomIntInRange(low,high){return Math.round(low+Math.random()*(high-low))}function doQuickSort(ary,comparator,p,r){if(r>p){var pivotIndex=randomIntInRange(p,r);var i=p-1;swap(ary,pivotIndex,r);var pivot=ary[r];for(var j=p;r>j;j++)if(comparator(ary[j],pivot)<=0){i+=1;swap(ary,i,j)}swap(ary,i+1,j);var q=i+1;doQuickSort(ary,comparator,p,q-1);doQuickSort(ary,comparator,q+1,r)}}exports.quickSort=function(ary,comparator){doQuickSort(ary,comparator,0,ary.length-1)}},function(module,exports,__webpack_require__){function SourceNode(aLine,aColumn,aSource,aChunks,aName){this.children=[];this.sourceContents={};this.line=null==aLine?null:aLine;this.column=null==aColumn?null:aColumn;this.source=null==aSource?null:aSource;this.name=null==aName?null:aName;this[isSourceNode]=true;if(null!=aChunks)this.add(aChunks)}var SourceMapGenerator=__webpack_require__(10).SourceMapGenerator;var util=__webpack_require__(13);var REGEX_NEWLINE=/(\r?\n)/;var NEWLINE_CODE=10;var isSourceNode="$$$isSourceNode$$$";SourceNode.fromStringWithSourceMap=function SourceNode_fromStringWithSourceMap(aGeneratedCode,aSourceMapConsumer,aRelativePath){function addMappingWithCode(mapping,code){if(null===mapping||void 0===mapping.source)node.add(code);else{var source=aRelativePath?util.join(aRelativePath,mapping.source):mapping.source;node.add(new SourceNode(mapping.originalLine,mapping.originalColumn,source,code,mapping.name))}}var node=new SourceNode;var remainingLines=aGeneratedCode.split(REGEX_NEWLINE);var shiftNextLine=function(){var lineContents=remainingLines.shift();var newLine=remainingLines.shift()||"";return lineContents+newLine};var lastGeneratedLine=1,lastGeneratedColumn=0;var lastMapping=null;aSourceMapConsumer.eachMapping(function(mapping){if(null!==lastMapping)if(lastGeneratedLine<mapping.generatedLine){addMappingWithCode(lastMapping,shiftNextLine());lastGeneratedLine++;lastGeneratedColumn=0}else{var nextLine=remainingLines[0];var code=nextLine.substr(0,mapping.generatedColumn-lastGeneratedColumn);remainingLines[0]=nextLine.substr(mapping.generatedColumn-lastGeneratedColumn);lastGeneratedColumn=mapping.generatedColumn;addMappingWithCode(lastMapping,code);lastMapping=mapping;return}for(;lastGeneratedLine<mapping.generatedLine;){node.add(shiftNextLine());lastGeneratedLine++}if(lastGeneratedColumn<mapping.generatedColumn){var nextLine=remainingLines[0];node.add(nextLine.substr(0,mapping.generatedColumn));remainingLines[0]=nextLine.substr(mapping.generatedColumn);lastGeneratedColumn=mapping.generatedColumn}lastMapping=mapping},this);if(remainingLines.length>0){if(lastMapping)addMappingWithCode(lastMapping,shiftNextLine());node.add(remainingLines.join(""))}aSourceMapConsumer.sources.forEach(function(sourceFile){var content=aSourceMapConsumer.sourceContentFor(sourceFile);if(null!=content){if(null!=aRelativePath)sourceFile=util.join(aRelativePath,sourceFile);node.setSourceContent(sourceFile,content)}});return node};SourceNode.prototype.add=function SourceNode_add(aChunk){if(Array.isArray(aChunk))aChunk.forEach(function(chunk){this.add(chunk)},this);else if(aChunk[isSourceNode]||"string"==typeof aChunk){if(aChunk)this.children.push(aChunk)}else throw new TypeError("Expected a SourceNode, string, or an array of SourceNodes and strings. Got "+aChunk);return this};SourceNode.prototype.prepend=function SourceNode_prepend(aChunk){if(Array.isArray(aChunk))for(var i=aChunk.length-1;i>=0;i--)this.prepend(aChunk[i]);else if(aChunk[isSourceNode]||"string"==typeof aChunk)this.children.unshift(aChunk);else throw new TypeError("Expected a SourceNode, string, or an array of SourceNodes and strings. Got "+aChunk);return this};SourceNode.prototype.walk=function SourceNode_walk(aFn){var chunk;for(var i=0,len=this.children.length;len>i;i++){chunk=this.children[i];if(chunk[isSourceNode])chunk.walk(aFn);else if(""!==chunk)aFn(chunk,{source:this.source,line:this.line,column:this.column,name:this.name})}};SourceNode.prototype.join=function SourceNode_join(aSep){var newChildren;var i;var len=this.children.length;if(len>0){newChildren=[];for(i=0;len-1>i;i++){newChildren.push(this.children[i]);newChildren.push(aSep)}newChildren.push(this.children[i]);this.children=newChildren}return this};SourceNode.prototype.replaceRight=function SourceNode_replaceRight(aPattern,aReplacement){var lastChild=this.children[this.children.length-1];if(lastChild[isSourceNode])lastChild.replaceRight(aPattern,aReplacement);else if("string"==typeof lastChild)this.children[this.children.length-1]=lastChild.replace(aPattern,aReplacement);else this.children.push("".replace(aPattern,aReplacement));return this};SourceNode.prototype.setSourceContent=function SourceNode_setSourceContent(aSourceFile,aSourceContent){this.sourceContents[util.toSetString(aSourceFile)]=aSourceContent};SourceNode.prototype.walkSourceContents=function SourceNode_walkSourceContents(aFn){for(var i=0,len=this.children.length;len>i;i++)if(this.children[i][isSourceNode])this.children[i].walkSourceContents(aFn);var sources=Object.keys(this.sourceContents);for(var i=0,len=sources.length;len>i;i++)aFn(util.fromSetString(sources[i]),this.sourceContents[sources[i]])};SourceNode.prototype.toString=function SourceNode_toString(){var str="";this.walk(function(chunk){str+=chunk});return str};SourceNode.prototype.toStringWithSourceMap=function SourceNode_toStringWithSourceMap(aArgs){var generated={code:"",line:1,column:0};var map=new SourceMapGenerator(aArgs);var sourceMappingActive=false;var lastOriginalSource=null;var lastOriginalLine=null;var lastOriginalColumn=null;var lastOriginalName=null;this.walk(function(chunk,original){generated.code+=chunk;if(null!==original.source&&null!==original.line&&null!==original.column){if(lastOriginalSource!==original.source||lastOriginalLine!==original.line||lastOriginalColumn!==original.column||lastOriginalName!==original.name)map.addMapping({source:original.source,original:{line:original.line,column:original.column},generated:{line:generated.line,column:generated.column},name:original.name});lastOriginalSource=original.source;lastOriginalLine=original.line;lastOriginalColumn=original.column;lastOriginalName=original.name;sourceMappingActive=true}else if(sourceMappingActive){map.addMapping({generated:{line:generated.line,column:generated.column}});lastOriginalSource=null;sourceMappingActive=false}for(var idx=0,length=chunk.length;length>idx;idx++)if(chunk.charCodeAt(idx)===NEWLINE_CODE){generated.line++;generated.column=0;if(idx+1===length){lastOriginalSource=null;sourceMappingActive=false}else if(sourceMappingActive)map.addMapping({source:original.source,original:{line:original.line,column:original.column},generated:{line:generated.line,column:generated.column},name:original.name})}else generated.column++});this.walkSourceContents(function(sourceFile,sourceContent){map.setSourceContent(sourceFile,sourceContent)});return{code:generated.code,map:map}};exports.SourceNode=SourceNode},function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_FACTORY__,__WEBPACK_AMD_DEFINE_RESULT__;!function(name,definition){if("undefined"!=typeof module&&module.exports)module.exports=definition();else if(true)!(__WEBPACK_AMD_DEFINE_FACTORY__=definition,__WEBPACK_AMD_DEFINE_RESULT__="function"==typeof __WEBPACK_AMD_DEFINE_FACTORY__?__WEBPACK_AMD_DEFINE_FACTORY__.call(exports,__webpack_require__,exports,module):__WEBPACK_AMD_DEFINE_FACTORY__,void 0!==__WEBPACK_AMD_DEFINE_RESULT__&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__));else this[name]=definition()}("bowser",function(){function detect(ua){function getFirstMatch(regex){var match=ua.match(regex);return match&&match.length>1&&match[1]||""}function getSecondMatch(regex){var match=ua.match(regex);return match&&match.length>1&&match[2]||""}var iosdevice=getFirstMatch(/(ipod|iphone|ipad)/i).toLowerCase(),likeAndroid=/like android/i.test(ua),android=!likeAndroid&&/android/i.test(ua),chromeBook=/CrOS/.test(ua),edgeVersion=getFirstMatch(/edge\/(\d+(\.\d+)?)/i),versionIdentifier=getFirstMatch(/version\/(\d+(\.\d+)?)/i),tablet=/tablet/i.test(ua),mobile=!tablet&&/[^-]mobi/i.test(ua),result;if(/opera|opr/i.test(ua))result={name:"Opera",opera:t,version:versionIdentifier||getFirstMatch(/(?:opera|opr)[\s\/](\d+(\.\d+)?)/i)};else if(/yabrowser/i.test(ua))result={name:"Yandex Browser",yandexbrowser:t,version:versionIdentifier||getFirstMatch(/(?:yabrowser)[\s\/](\d+(\.\d+)?)/i)};else if(/windows phone/i.test(ua)){result={name:"Windows Phone",windowsphone:t};if(edgeVersion){result.msedge=t;result.version=edgeVersion}else{result.msie=t;result.version=getFirstMatch(/iemobile\/(\d+(\.\d+)?)/i)}}else if(/msie|trident/i.test(ua))result={name:"Internet Explorer",msie:t,version:getFirstMatch(/(?:msie |rv:)(\d+(\.\d+)?)/i)};else if(chromeBook)result={name:"Chrome",chromeBook:t,chrome:t,version:getFirstMatch(/(?:chrome|crios|crmo)\/(\d+(\.\d+)?)/i)};else if(/chrome.+? edge/i.test(ua))result={name:"Microsoft Edge",msedge:t,version:edgeVersion};else if(/chrome|crios|crmo/i.test(ua))result={name:"Chrome",chrome:t,version:getFirstMatch(/(?:chrome|crios|crmo)\/(\d+(\.\d+)?)/i)};else if(iosdevice){result={name:"iphone"==iosdevice?"iPhone":"ipad"==iosdevice?"iPad":"iPod"};if(versionIdentifier)result.version=versionIdentifier}else if(/sailfish/i.test(ua))result={name:"Sailfish",sailfish:t,version:getFirstMatch(/sailfish\s?browser\/(\d+(\.\d+)?)/i)};else if(/seamonkey\//i.test(ua))result={name:"SeaMonkey",seamonkey:t,version:getFirstMatch(/seamonkey\/(\d+(\.\d+)?)/i)};else if(/firefox|iceweasel/i.test(ua)){result={name:"Firefox",firefox:t,version:getFirstMatch(/(?:firefox|iceweasel)[ \/](\d+(\.\d+)?)/i)};if(/\((mobile|tablet);[^\)]*rv:[\d\.]+\)/i.test(ua))result.firefoxos=t}else if(/silk/i.test(ua))result={name:"Amazon Silk",silk:t,version:getFirstMatch(/silk\/(\d+(\.\d+)?)/i)};else if(android)result={name:"Android",version:versionIdentifier};else if(/phantom/i.test(ua))result={name:"PhantomJS",phantom:t,version:getFirstMatch(/phantomjs\/(\d+(\.\d+)?)/i)};else if(/blackberry|\bbb\d+/i.test(ua)||/rim\stablet/i.test(ua))result={name:"BlackBerry",blackberry:t,version:versionIdentifier||getFirstMatch(/blackberry[\d]+\/(\d+(\.\d+)?)/i)};else if(/(web|hpw)os/i.test(ua)){result={name:"WebOS",webos:t,version:versionIdentifier||getFirstMatch(/w(?:eb)?osbrowser\/(\d+(\.\d+)?)/i)};/touchpad\//i.test(ua)&&(result.touchpad=t)}else if(/bada/i.test(ua))result={name:"Bada",bada:t,version:getFirstMatch(/dolfin\/(\d+(\.\d+)?)/i)};else if(/tizen/i.test(ua))result={name:"Tizen",tizen:t,version:getFirstMatch(/(?:tizen\s?)?browser\/(\d+(\.\d+)?)/i)||versionIdentifier};else if(/safari/i.test(ua))result={name:"Safari",safari:t,version:versionIdentifier};else result={name:getFirstMatch(/^(.*)\/(.*) /),version:getSecondMatch(/^(.*)\/(.*) /)};if(!result.msedge&&/(apple)?webkit/i.test(ua)){result.name=result.name||"Webkit";result.webkit=t;if(!result.version&&versionIdentifier)result.version=versionIdentifier}else if(!result.opera&&/gecko\//i.test(ua)){result.name=result.name||"Gecko";result.gecko=t;result.version=result.version||getFirstMatch(/gecko\/(\d+(\.\d+)?)/i)}if(!result.msedge&&(android||result.silk))result.android=t;else if(iosdevice){result[iosdevice]=t;result.ios=t}var osVersion="";if(result.windowsphone)osVersion=getFirstMatch(/windows phone (?:os)?\s?(\d+(\.\d+)*)/i);else if(iosdevice){osVersion=getFirstMatch(/os (\d+([_\s]\d+)*) like mac os x/i);osVersion=osVersion.replace(/[_\s]/g,".")}else if(android)osVersion=getFirstMatch(/android[ \/-](\d+(\.\d+)*)/i);else if(result.webos)osVersion=getFirstMatch(/(?:web|hpw)os\/(\d+(\.\d+)*)/i);else if(result.blackberry)osVersion=getFirstMatch(/rim\stablet\sos\s(\d+(\.\d+)*)/i);else if(result.bada)osVersion=getFirstMatch(/bada\/(\d+(\.\d+)*)/i);else if(result.tizen)osVersion=getFirstMatch(/tizen[\/\s](\d+(\.\d+)*)/i);if(osVersion)result.osversion=osVersion;var osMajorVersion=osVersion.split(".")[0];if(tablet||"ipad"==iosdevice||android&&(3==osMajorVersion||4==osMajorVersion&&!mobile)||result.silk)result.tablet=t;else if(mobile||"iphone"==iosdevice||"ipod"==iosdevice||android||result.blackberry||result.webos||result.bada)result.mobile=t;if(result.msedge||result.msie&&result.version>=10||result.yandexbrowser&&result.version>=15||result.chrome&&result.version>=20||result.firefox&&result.version>=20||result.safari&&result.version>=6||result.opera&&result.version>=10||result.ios&&result.osversion&&result.osversion.split(".")[0]>=6||result.blackberry&&result.version>=10.1)result.a=t;else if(result.msie&&result.version<10||result.chrome&&result.version<20||result.firefox&&result.version<20||result.safari&&result.version<6||result.opera&&result.version<10||result.ios&&result.osversion&&result.osversion.split(".")[0]<6)result.c=t;else result.x=t;return result}var t=true;var bowser=detect("undefined"!=typeof navigator?navigator.userAgent:"");bowser.test=function(browserList){for(var i=0;i<browserList.length;++i){var browserItem=browserList[i];if("string"==typeof browserItem)if(browserItem in bowser)return true}return false};bowser._detect=detect;return bowser})},function(module,exports,__webpack_require__){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:true});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();var _utils=__webpack_require__(2);var Environment=function(){function Environment(){_classCallCheck(this,Environment)}_createClass(Environment,null,[{key:"getEnv",value:function getEnv(){if("undefined"==typeof window){if("undefined"!=typeof WorkerLocation&&location instanceof WorkerLocation)return Environment.SERVICE_WORKER}else if(window.self===window.top)if((0,_utils.contains)(location.href,"initOneSignal"))return Environment.POPUP;else return Environment.HOST;else return Environment.IFRAME}},{key:"isServiceWorker",value:function isServiceWorker(){return Environment.getEnv()===Environment.SERVICE_WORKER}},{key:"isHost",value:function isHost(){return Environment.getEnv()===Environment.HOST}},{key:"isPopup",value:function isPopup(){return Environment.getEnv()===Environment.POPUP}},{key:"isIframe",value:function isIframe(){return Environment.getEnv()===Environment.IFRAME}},{key:"isBrowser",value:function isBrowser(){return"undefined"!=typeof window}},{key:"SERVICE_WORKER",get:function get(){return"ServiceWorker"}},{key:"HOST",get:function get(){return"host"}},{key:"POPUP",get:function get(){return"popup"}},{key:"IFRAME",get:function get(){return"iFrame"}}]);return Environment}();exports["default"]=Environment},function(module,exports,__webpack_require__){(function(global){module.exports=global.OneSignal=__webpack_require__(23)}).call(exports,function(){return this}())},function(module,exports,__webpack_require__){(function(fetch){"use strict";function _interopRequireWildcard(obj){if(obj&&obj.__esModule)return obj;else{var newObj={};if(null!=obj)for(var key in obj)if(Object.prototype.hasOwnProperty.call(obj,key))newObj[key]=obj[key];newObj["default"]=obj;return newObj}}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}var _vars=__webpack_require__(1);var _environment=__webpack_require__(21);var _environment2=_interopRequireDefault(_environment);__webpack_require__(25);var _api=__webpack_require__(26);var _loglevel=__webpack_require__(3);var _loglevel2=_interopRequireDefault(_loglevel);var _limitStore=__webpack_require__(27);var _limitStore2=_interopRequireDefault(_limitStore);var _events=__webpack_require__(28);var _events2=_interopRequireDefault(_events);var _bell=__webpack_require__(29);var _bell2=_interopRequireDefault(_bell);var _database=__webpack_require__(43);var _database2=_interopRequireDefault(_database);var _bowser=__webpack_require__(20);var Browser=_interopRequireWildcard(_bowser);var _utils=__webpack_require__(2);var _objectAssign=__webpack_require__(32);var _objectAssign2=_interopRequireDefault(_objectAssign);var _swivel=__webpack_require__(44);var _swivel2=_interopRequireDefault(_swivel);var OneSignal={_VERSION:"109160",_API_URL:_vars.API_URL,_app_id:null,_futureSendTags:null,_futureSendTagsPromiseResolves:[],_notificationOpenedCallbacks:[],_idsAvailable_callback:[],_defaultLaunchURL:null,_initOptions:null,_httpRegistration:false,_main_page_port:null,_isNotificationEnabledCallback:[],_subscriptionSet:true,_initOneSignalHttp:null,_sessionIframeAdded:false,_useHttpMode:null,_windowWidth:550,_windowHeight:480,_isUninitiatedVisitor:false,_isNewVisitor:false,_channel:null,logError:_utils.logError,initialized:false,notifyButton:null,store:_limitStore2["default"],environment:_environment2["default"],database:_database2["default"],event:_events2["default"],browser:Browser,log:_loglevel2["default"],swivel:_swivel2["default"],SERVICE_WORKER_UPDATER_PATH:"OneSignalSDKUpdaterWorker.js",SERVICE_WORKER_PATH:"OneSignalSDKWorker.js",SERVICE_WORKER_PARAM:{},EVENTS:{CUSTOM_PROMPT_CLICKED:"onesignal.prompt.custom.clicked",NATIVE_PROMPT_PERMISSIONCHANGED:"onesignal.prompt.native.permissionchanged",SUBSCRIPTION_CHANGED:"onesignal.subscription.changed",WELCOME_NOTIFICATION_SENT:"onesignal.actions.welcomenotificationsent",INTERNAL_SUBSCRIPTIONSET:"onesignal.internal.subscriptionset",SDK_INITIALIZED:"onesignal.sdk.initialized"},_sendToOneSignalApi:function _sendToOneSignalApi(url,action,inData,callback,failedCallback){_loglevel2["default"].debug("Calling "+action+" "+(OneSignal._API_URL+url)+" with data:",inData);var contents={method:action};if(inData){contents.headers={"Content-type":"application/json;charset=UTF-8"};contents.body=JSON.stringify(inData)}fetch(OneSignal._API_URL+url,contents).then(function status(response){if(response.status>=200&&response.status<300)return Promise.resolve(response);else return Promise.reject(new Error(response.statusText))}).then(function status(response){return response.json()}).then(function(jsonData){if(null!=callback)callback(jsonData)})["catch"](function(e){_loglevel2["default"].error("OneSignal._sendToOneSignalApi() failed:",e);if(null!=failedCallback)failedCallback()})},_getLanguage:function _getLanguage(){return navigator.language?navigator.language.length>3?navigator.language.substring(0,2):navigator.language:"en"},_getPlayerId:function _getPlayerId(value,callback){if(value)callback(value);else _database2["default"].get("Ids","userId").then(function _getPlayerId_gotUserId(result){if(result)callback(result.id);else callback(null)})["catch"](function(e){_loglevel2["default"].error(e)})},_registerWithOneSignal:function _registerWithOneSignal(appId,registrationId,deviceType){_database2["default"].get("Ids","userId").then(function _registerWithOneSignal_GotUserId(userIdResult){OneSignal._getNotificationTypes(function(notif_types){var requestUrl="players";var jsonData={app_id:appId,device_type:deviceType,language:OneSignal._getLanguage(),timezone:-60*(new Date).getTimezoneOffset(),device_model:navigator.platform+" "+Browser.name,device_os:Browser.version,sdk:OneSignal._VERSION};if(userIdResult){requestUrl="players/"+userIdResult.id+"/on_session";jsonData.notification_types=notif_types}else if(1!=notif_types)jsonData.notification_types=notif_types;if(registrationId){jsonData.identifier=registrationId;_database2["default"].put("Ids",{type:"registrationId",id:registrationId})}OneSignal._sendToOneSignalApi(requestUrl,"POST",jsonData,function registeredCallback(responseJSON){sessionStorage.setItem("ONE_SIGNAL_SESSION",true);if(responseJSON.id){_database2["default"].put("Ids",{type:"userId",id:responseJSON.id});OneSignal._sendUnsentTags()}OneSignal._getPlayerId(responseJSON.id,function(userId){if(OneSignal._idsAvailable_callback.length>0)for(;OneSignal._idsAvailable_callback.length>0;){var curr_callback=OneSignal._idsAvailable_callback.pop();curr_callback({userId:userId,registrationId:registrationId})}if(OneSignal._httpRegistration)OneSignal._getNotificationPermission().then(function(permission){_loglevel2["default"].debug("Sending player Id and registrationId back to host page");_loglevel2["default"].debug(OneSignal._initOptions);var creator=opener||parent;OneSignal._safePostMessage(creator,{idsAvailable:{userId:userId,registrationId:registrationId},from:_environment2["default"].getEnv()},OneSignal._initOptions.origin,null);OneSignal._safePostMessage(creator,{httpNativePromptPermissionChanged:permission,from:_environment2["default"].getEnv()},OneSignal._initOptions.origin,null);if(opener)window.close()})["catch"](function(e){return _loglevel2["default"].error(e)})})})})})["catch"](function(e){_loglevel2["default"].error(e)})},_sendUnsentTags:function _sendUnsentTags(){if(OneSignal._futureSendTags){OneSignal.sendTags(OneSignal._futureSendTags);for(;OneSignal._futureSendTagsPromiseResolves.length>0;){var promiseResolveFn=OneSignal._futureSendTagsPromiseResolves.shift();promiseResolveFn()}OneSignal._futureSendTags=null}},setDefaultNotificationUrl:function setDefaultNotificationUrl(url){if(!(0,_utils.isPushNotificationsSupported)()){_loglevel2["default"].warn("Your browser does not support push notifications.");return}_database2["default"].put("Options",{key:"defaultUrl",value:url})},setDefaultIcon:function setDefaultIcon(icon){if(!(0,_utils.isPushNotificationsSupported)()){_loglevel2["default"].warn("Your browser does not support push notifications.");return}_database2["default"].put("Options",{key:"defaultIcon",value:icon})},setDefaultTitle:function setDefaultTitle(title){if(!(0,_utils.isPushNotificationsSupported)()){_loglevel2["default"].warn("Your browser does not support push notifications.");return}_database2["default"].put("Options",{key:"defaultTitle",value:title})},onCustomPromptClicked:function onCustomPromptClicked(event){},onNativePromptChanged:function onNativePromptChanged(event){OneSignal._checkTrigger_eventSubscriptionChanged()},_sendSelfNotification:function _sendSelfNotification(title,message,url,icon,data){if(!title)title="OneSignal Test Message";if(!message)message="This is an example notification.";if(!url)url=new URL(location.href).origin+"?_osp=do_not_open";_database2["default"].get("Ids","userId").then(function(result){if(result&&result.id)(0,_api.sendNotification)(OneSignal._app_id,[result.id],{en:title},{en:message},url,icon,data);else _loglevel2["default"].warn("Could not send self a test notification because there is no valid user ID.")})},_closeAllNotifications:function _closeAllNotifications(){navigator.serviceWorker.getRegistration().then(function(registration){if(void 0===registration||!registration.active){_loglevel2["default"].debug("There is no active service worker.");return Promise.reject()}else OneSignal._messageServiceWorker("notification.closeall")})},_messageServiceWorker:function _messageServiceWorker(message){if(OneSignal._channel)return OneSignal._channel.emit("data",message);else _loglevel2["default"].error("Please initialize the SDK before trying to communicate with the service worker. The communication channel isn't initialized yet.")},_onSubscriptionChanged:function _onSubscriptionChanged(event){if(OneSignal._isUninitiatedVisitor&&true===event.detail)_database2["default"].get("Ids","userId").then(function(result){var welcome_notification_opts=OneSignal._initOptions.welcomeNotification;var welcome_notification_disabled=void 0!==welcome_notification_opts&&true===welcome_notification_opts.disable;var title=void 0!==welcome_notification_opts&&void 0!==welcome_notification_opts.title&&null!==welcome_notification_opts.title?welcome_notification_opts.title:"";var message=void 0!==welcome_notification_opts&&void 0!==welcome_notification_opts.message&&null!==welcome_notification_opts.message&&welcome_notification_opts.message.length>0?welcome_notification_opts.message:"Thanks for subscribing!";var unopenableWelcomeNotificationUrl=new URL(location.href);unopenableWelcomeNotificationUrl=unopenableWelcomeNotificationUrl.origin+"?_osp=do_not_open";var url=welcome_notification_opts&&welcome_notification_opts.url&&welcome_notification_opts.url.length>0?welcome_notification_opts.url:unopenableWelcomeNotificationUrl;title=(0,_utils.decodeHtmlEntities)(title);message=(0,_utils.decodeHtmlEntities)(message);if(!welcome_notification_disabled){_loglevel2["default"].debug("Because this user is a new site visitor, a welcome notification will be sent.");(0,_api.sendNotification)(OneSignal._app_id,[result.id],{en:title},{en:message},url,null,{__isOneSignalWelcomeNotification:true});_events2["default"].trigger(OneSignal.EVENTS.WELCOME_NOTIFICATION_SENT,{title:title,message:message,url:url});OneSignal._isUninitiatedVisitor=false}})["catch"](function(e){_loglevel2["default"].error(e)});_limitStore2["default"].put("subscription.value",event.detail)},_onDbValueRetrieved:function _onDbValueRetrieved(event){},_onDbValueSet:function _onDbValueSet(event){var info=event.detail;if("userId"===info.type){_limitStore2["default"].put("db.ids.userId",info.id);OneSignal._checkTrigger_eventSubscriptionChanged()}},_onInternalSubscriptionSet:function _onInternalSubscriptionSet(event){
var newSubscriptionValue=event.detail;_limitStore2["default"].put("setsubscription.value",newSubscriptionValue);OneSignal._checkTrigger_eventSubscriptionChanged()},_establishServiceWorkerChannel:function _establishServiceWorkerChannel(serviceWorkerRegistration){if(OneSignal._channel){OneSignal._channel.off("data");OneSignal._channel.off("notification.clicked")}OneSignal._channel=_swivel2["default"].at(serviceWorkerRegistration.active);OneSignal._channel.on("data",function handler(context,data){_loglevel2["default"].debug("%c"+_environment2["default"].getEnv().capitalize()+" ⬸ ServiceWorker:",(0,_utils.getConsoleStyle)("serviceworkermessage"),data,context)});OneSignal._channel.on("notification.clicked",function handler(context,data){if(_environment2["default"].isHost())OneSignal._fireTransmittedNotificationClickedCallbacks(data);else if(_environment2["default"].isIframe()){var creator=opener||parent;OneSignal._safePostMessage(creator,{openedNotification:data,from:_environment2["default"].getEnv()},OneSignal._initOptions.origin,null)}});_loglevel2["default"].info("Service worker messaging channel established!")},_onSdkInitialized:function _onSdkInitialized(){if(OneSignal.initialized){_loglevel2["default"].warn("SDK initialized event occured more than once, so skipping running init trigger code.");return}OneSignal._storeInitialValues();if(navigator.serviceWorker&&"https:"===window.location.protocol)navigator.serviceWorker.getRegistration().then(function(registration){if(registration&&registration.active)OneSignal._establishServiceWorkerChannel(registration)})["catch"](function(e){if(9===e.code){if("http:"===location.protocol||_environment2["default"].isIframe())_loglevel2["default"].debug("Expected error getting service worker registration on "+location.href+":",e)}else _loglevel2["default"].error("Error getting Service Worker registration on "+location.href+":",e)});if(_environment2["default"].isBrowser()&&!OneSignal.notifyButton){OneSignal._initOptions.notifyButton=OneSignal._initOptions.notifyButton||{};if(OneSignal._initOptions.bell){(0,_objectAssign2["default"])(OneSignal._initOptions.bell,OneSignal._initOptions.notifyButton);(0,_objectAssign2["default"])(OneSignal._initOptions.notifyButton,OneSignal._initOptions.bell)}OneSignal.notifyButton=new _bell2["default"](OneSignal._initOptions.notifyButton);OneSignal.notifyButton.create();OneSignal.initialized=true}},_onDatabaseRebuilt:function _onDatabaseRebuilt(){OneSignal._isNewVisitor=true},_checkTrigger_nativePermissionChanged:function _checkTrigger_nativePermissionChanged(){OneSignal._getNotificationPermission(OneSignal._initOptions.safari_web_id).then(function(permission){var currentPermission=permission;var lastPermission=_limitStore2["default"].getLast("notification.permission");if(lastPermission!==currentPermission)OneSignal._triggerEvent_nativePromptPermissionChanged(lastPermission,currentPermission)})["catch"](function(e){return _loglevel2["default"].error(e)})},_checkTrigger_eventSubscriptionChanged:function _checkTrigger_eventSubscriptionChanged(){_loglevel2["default"].debug("Called %c_checkTrigger_eventSubscriptionChanged()",(0,_utils.getConsoleStyle)("code"),"in",_environment2["default"].getEnv());var permissions=_limitStore2["default"].get("notification.permission");var lastPermission=permissions[permissions.length-2];var currentPermission=permissions[permissions.length-1];_loglevel2["default"].debug("%c_checkTrigger_eventSubscriptionChanged():",(0,_utils.getConsoleStyle)("code"),"Permissions:",{lastPermission:lastPermission,currentPermission:currentPermission});var ids=_limitStore2["default"].get("db.ids.userId");var lastId=ids[ids.length-2];var currentId=ids[ids.length-1];_loglevel2["default"].debug("%c_checkTrigger_eventSubscriptionChanged():",(0,_utils.getConsoleStyle)("code"),"Ids:",{lastId:lastId,currentId:currentId});var subscriptionStates=_limitStore2["default"].get("setsubscription.value");var lastSubscriptionState=subscriptionStates[subscriptionStates.length-2];var currentSubscriptionState=subscriptionStates[subscriptionStates.length-1];_loglevel2["default"].debug("%c_checkTrigger_eventSubscriptionChanged():",(0,_utils.getConsoleStyle)("code"),"Subscriptions:",{lastSubscriptionState:lastSubscriptionState,currentSubscriptionState:currentSubscriptionState});var newSubscriptionState="unchanged";if("granted"!==lastPermission&&"granted"===currentPermission&&null!==currentId&&true===currentSubscriptionState||false===lastSubscriptionState&&true===currentSubscriptionState&&null!=currentId&&"granted"===currentPermission||"granted"===lastPermission&&"granted"===currentPermission&&true===currentSubscriptionState&&true!==lastSubscriptionState&&null!==currentId&&null!==lastId||"granted"===lastPermission&&"granted"===currentPermission&&true===currentSubscriptionState&&true!==lastSubscriptionState&&null!==currentId&&null===lastId)newSubscriptionState=true;if("denied"!==lastPermission&&"denied"===currentPermission||"granted"===lastPermission&&"granted"!==currentPermission||null!==lastId&&null===currentId||false!==lastSubscriptionState&&false===currentSubscriptionState)newSubscriptionState=false;if("unchanged"!==newSubscriptionState){var lastTriggerTimes=_limitStore2["default"].put("event.subscriptionchanged.lastriggered",Date.now());var currentTime=lastTriggerTimes[lastTriggerTimes.length-1];var lastTriggerTime=lastTriggerTimes[lastTriggerTimes.length-2];var elapsedTimeSeconds=(currentTime-lastTriggerTime)/1e3;var lastEventStates=_limitStore2["default"].put("event.subscriptionchanged.laststates",newSubscriptionState);var currentState=lastEventStates[lastEventStates.length-1];var lastState=lastEventStates[lastEventStates.length-2];var shouldNotTriggerEvent=null!=lastTriggerTime&&1>=elapsedTimeSeconds||currentState===lastState;if(false===shouldNotTriggerEvent)OneSignal._triggerEvent_subscriptionChanged(newSubscriptionState)}},isPushNotificationsSupported:function isPushNotificationsSupported(){return(0,_utils.isPushNotificationsSupported)()},_installNativePromptPermissionChangedHook:function _installNativePromptPermissionChangedHook(){if(navigator.permissions&&!((0,_utils.isBrowserFirefox)()&&(0,_utils.getFirefoxVersion)()<=45)){OneSignal._usingNativePermissionHook=true;navigator.permissions.query({name:"notifications"}).then(function(permissionStatus){permissionStatus.onchange=function(){var permissionBeforePrompt=_limitStore2["default"].getFirst("notification.permission");OneSignal._triggerEvent_nativePromptPermissionChanged(permissionBeforePrompt)}})["catch"](function(e){_loglevel2["default"].error(e)})}},_fixWordpressManifestIfMisplaced:function _fixWordpressManifestIfMisplaced(){var manifests=document.querySelectorAll("link[rel=manifest]");if(!manifests||manifests.length<=1)return;for(var i=0;i<manifests.length;i++){var manifest=manifests[i];var url=manifest.href;if((0,_utils.contains)(url,"gcm_sender_id")){document.querySelector("head").insertBefore(manifest,document.querySelector("head").children[0]);_loglevel2["default"].warn("OneSignal: Moved the WordPress push <manifest> to the first element in <head>.")}}},_init_getNormalizedSubdomain:function _init_getNormalizedSubdomain(subdomain){if(!subdomain){_loglevel2["default"].error("OneSignal: Missing required init parameter %csubdomainName",(0,_utils.getConsoleStyle)("code"),". You must supply a subdomain name to the SDK initialization options. (See: https://documentation.onesignal.com/docs/website-sdk-http-installation#2-include-and-initialize-onesignal)");throw new Error("OneSignal: Missing required init parameter subdomainName. You must supply a subdomain name to the SDK initialization options. (See: https://documentation.onesignal.com/docs/website-sdk-http-installation#2-include-and-initialize-onesignal)")}return(0,_utils.normalizeSubdomain)(subdomain)},init:function init(options){_loglevel2["default"].debug("Called %cinit("+JSON.stringify(options,null,4)+")",(0,_utils.getConsoleStyle)("code"));if(_environment2["default"].isBrowser()&&window.localStorage["onesignal.debugger.init"])debugger;if(OneSignal._initCalled){_loglevel2["default"].error("OneSignal: Please don't call init() more than once. Any extra calls to init() are ignored. The following parameters were not processed: %c"+JSON.stringify(Object.keys(options)),(0,_utils.getConsoleStyle)("code"));return}OneSignal._initCalled=true;if(!options.path)options.path="/";OneSignal._initOptions=options;OneSignal._app_id=OneSignal._initOptions.appId;if(!(0,_utils.isPushNotificationsSupported)()){_loglevel2["default"].warn("Your browser does not support push notifications.");return}OneSignal._fixWordpressManifestIfMisplaced();if(Browser.safari&&!OneSignal._initOptions.safari_web_id){_loglevel2["default"].warn("You're browsing on Safari, and %csafari_web_id",(0,_utils.getConsoleStyle)("code"),"was not passed to OneSignal.init(), so not initializing the SDK.");return}window.addEventListener(_database2["default"].EVENTS.REBUILT,OneSignal._onDatabaseRebuilt);window.addEventListener(OneSignal.EVENTS.CUSTOM_PROMPT_CLICKED,OneSignal.onCustomPromptClicked);window.addEventListener(OneSignal.EVENTS.NATIVE_PROMPT_PERMISSIONCHANGED,OneSignal.onNativePromptChanged);window.addEventListener(OneSignal.EVENTS.SUBSCRIPTION_CHANGED,OneSignal._onSubscriptionChanged);window.addEventListener(_database2["default"].EVENTS.RETRIEVED,OneSignal._onDbValueRetrieved);window.addEventListener(_database2["default"].EVENTS.SET,OneSignal._onDbValueSet);window.addEventListener(OneSignal.EVENTS.INTERNAL_SUBSCRIPTIONSET,OneSignal._onInternalSubscriptionSet);window.addEventListener(OneSignal.EVENTS.SDK_INITIALIZED,OneSignal._onSdkInitialized);window.addEventListener("focus",function(event){OneSignal._checkTrigger_nativePermissionChanged()});OneSignal._useHttpMode=!(0,_utils.isSupportedSafari)()&&(!OneSignal._supportsDirectPermission()||OneSignal._initOptions.subdomainName);if(OneSignal._useHttpMode){var inputSubdomain=OneSignal._initOptions.subdomainName;var normalizedSubdomain=OneSignal._init_getNormalizedSubdomain(inputSubdomain);if(normalizedSubdomain!==inputSubdomain)_loglevel2["default"].warn("Auto-corrected subdomain '"+inputSubdomain+"' to '"+normalizedSubdomain+"'.");OneSignal._initOptions.subdomainName=normalizedSubdomain;OneSignal._initOneSignalHttp="https://"+OneSignal._initOptions.subdomainName+".onesignal.com/sdks/initOneSignalHttp"}else OneSignal._initOneSignalHttp="https://onesignal.com/sdks/initOneSignalHttps";if(false)OneSignal._initOneSignalHttp=_vars.DEV_FRAME_HOST+"/dev_sdks/initOneSignalHttp";if(false===OneSignal._initOptions.persistNotification)_database2["default"].put("Options",{key:"persistNotification",value:false});else _database2["default"].put("Options",{key:"persistNotification",value:true});var webhookPromises=[];var webhookOptions=OneSignal._initOptions.webhooks;["notification.displayed","notification.clicked"].forEach(function(event){if(webhookOptions&&webhookOptions[event])webhookPromises.push(_database2["default"].put("Options",{key:"webhooks."+event,value:webhookOptions[event]}));else webhookPromises.push(_database2["default"].put("Options",{key:"webhooks."+event,value:false}))});if(webhookOptions&&webhookOptions.cors)webhookPromises.push(_database2["default"].put("Options",{key:"webhooks.cors",value:true}));else webhookPromises.push(_database2["default"].put("Options",{key:"webhooks.cors",value:false}));Promise.all(webhookPromises);if(OneSignal._initOptions.notificationClickHandlerMatch)_database2["default"].put("Options",{key:"notificationClickHandlerMatch",value:OneSignal._initOptions.notificationClickHandlerMatch});else _database2["default"].put("Options",{key:"notificationClickHandlerMatch",value:"exact"});if(false===OneSignal._initOptions.serviceWorkerRefetchRequests)_database2["default"].put("Options",{key:"serviceWorkerRefetchRequests",value:false});else _database2["default"].put("Options",{key:"serviceWorkerRefetchRequests",value:true});if((0,_utils.isSupportedSafari)()&&"undefined"==typeof window.fetch){var s=document.createElement("script");s.setAttribute("src","https://cdnjs.cloudflare.com/ajax/libs/fetch/0.9.0/fetch.js");document.head.appendChild(s)}if("complete"===document.readyState)OneSignal._internalInit();else window.addEventListener("load",OneSignal._internalInit)},_internalInit:function _internalInit(){_loglevel2["default"].debug("Called %c_internalInit()",(0,_utils.getConsoleStyle)("code"));Promise.all([_database2["default"].get("Ids","appId"),_database2["default"].get("Ids","registrationId"),_database2["default"].get("Options","subscription")]).then(function _internalInit_GotAppRegistrationSubscriptionIds(result){var appIdResult=result[0];var registrationIdResult=result[1];var subscriptionResult=result[2];if(appIdResult&&appIdResult.id!=OneSignal._initOptions.appId){_loglevel2["default"].warn("%cWARNING: Because your app ID changed from "+appIdResult.id+" ⤑ "+OneSignal._initOptions.appId+", all IndexedDB and SessionStorage data will be wiped.",(0,_utils.getConsoleStyle)("alert"));sessionStorage.clear();_database2["default"].rebuild().then(function(){OneSignal.init(OneSignal._initOptions)})["catch"](function(e){return _loglevel2["default"].error(e)})}else{if(sessionStorage.getItem("ONE_SIGNAL_SESSION")&&!OneSignal._initOptions.subdomainName&&("denied"==Notification.permission||sessionStorage.getItem("ONE_SIGNAL_NOTIFICATION_PERMISSION")==Notification.permission)){_events2["default"].trigger(OneSignal.EVENTS.SDK_INITIALIZED);return}sessionStorage.setItem("ONE_SIGNAL_NOTIFICATION_PERMISSION",Notification.permission);if(Browser.safari&&false===OneSignal._initOptions.autoRegister){_loglevel2["default"].debug("On Safari and autoregister is false, skipping sessionInit().");_loglevel2["default"].debug("Use http mode: ",OneSignal._useHttpMode);if(!OneSignal._useHttpMode)_events2["default"].trigger(OneSignal.EVENTS.SDK_INITIALIZED);return}if(false===OneSignal._initOptions.autoRegister)OneSignal._updateServiceWorker();if(false===OneSignal._initOptions.autoRegister&&!OneSignal._initOptions.subdomainName){_loglevel2["default"].debug("No autoregister and no subdomain -> skip _internalInit().");_events2["default"].trigger(OneSignal.EVENTS.SDK_INITIALIZED);return}if("visible"!==document.visibilityState){(0,_utils.once)(document,"visibilitychange",function(e,destroyEventListener){if("visible"===document.visibilityState){destroyEventListener();OneSignal._sessionInit({})}},true);return}_loglevel2["default"].debug("Calling _sessionInit() normally from _internalInit().");OneSignal._sessionInit({})}})["catch"](function(e){_loglevel2["default"].error(e)})},registerForPushNotifications:function registerForPushNotifications(options){if(!(0,_utils.isPushNotificationsSupported)()){_loglevel2["default"].warn("Your browser does not support push notifications.");return}if(!options)options={};options.fromRegisterFor=true;OneSignal._sessionInit(options)},_initHttp:function _initHttp(options){_loglevel2["default"].debug("Called %c_initHttp("+JSON.stringify(options,null,4)+")",(0,_utils.getConsoleStyle)("code"));if(_environment2["default"].isBrowser()&&window.localStorage["onesignal.debugger._initHttp"])debugger;if(!(0,_utils.isPushNotificationsSupported)()){_loglevel2["default"].warn("Your browser does not support push notifications.");return}OneSignal._initOptions=options;OneSignal._installNativePromptPermissionChangedHook();if(options.continuePressed)OneSignal.setSubscription(true);var isIframe=null!=parent&&parent!=window;var creator=opener||parent;if(!creator){_loglevel2["default"].error("_initHttp (from <iframe>):","No opener or parent found!");return}var messageChannel=new MessageChannel;messageChannel.port1.onmessage=function(event){_loglevel2["default"].debug("%c"+_environment2["default"].getEnv().capitalize()+" ⬸ "+event.data.from.capitalize()+":",(0,_utils.getConsoleStyle)("postmessage"),event.data);if(event.data.initOptions){OneSignal.setDefaultNotificationUrl(event.data.initOptions.defaultUrl);OneSignal.setDefaultTitle(event.data.initOptions.defaultTitle);if(event.data.initOptions.defaultIcon)OneSignal.setDefaultIcon(event.data.initOptions.defaultIcon);_database2["default"].get("NotificationOpened",event.data.initOptions.parent_url).then(function registerForPushNotifications_GotNotificationOpened(notificationOpenedResult){if(notificationOpenedResult){_database2["default"].remove("NotificationOpened",event.data.initOptions.parent_url);_loglevel2["default"].debug("OneSignal._safePostMessage:targetOrigin:",OneSignal._initOptions.origin);OneSignal._safePostMessage(creator,{openedNotification:notificationOpenedResult.data,from:_environment2["default"].getEnv()},OneSignal._initOptions.origin,null)}})["catch"](function(e){_loglevel2["default"].error(e)})}else if(event.data.getNotificationPermission)OneSignal._getSubdomainState(function(curState){OneSignal._safePostMessage(creator,{currentNotificationPermission:curState,from:_environment2["default"].getEnv()},OneSignal._initOptions.origin,null)});else if(event.data.remoteGetNotificationPermission)!function(){var safariWebId=event.data.safariWebId;var promiseId=event.data.promiseId;OneSignal._getNotificationPermission(safariWebId).then(function(permission){OneSignal._safePostMessage(creator,{remoteGetNotificationPermissionResponse:permission,promiseId:promiseId,from:_environment2["default"].getEnv()},OneSignal._initOptions.origin,null)})["catch"](function(e){return _loglevel2["default"].error(e)})}();else if(event.data.setSubdomainState)!function(){var promiseId=event.data.promiseId;OneSignal.setSubscription(event.data.setSubdomainState.setSubscription).then(function(){OneSignal._safePostMessage(creator,{setSubscriptionComplete:true,from:_environment2["default"].getEnv(),promiseId:promiseId},OneSignal._initOptions.origin,null)})["catch"](function(){OneSignal._safePostMessage(creator,{setSubscriptionComplete:false,from:_environment2["default"].getEnv(),promiseId:promiseId},OneSignal._initOptions.origin,null)})}();else if(event.data.remoteGetDbValue)!function(){var promiseId=event.data.promiseId;var table=event.data.table;var key=event.data.key;if(!promiseId)_loglevel2["default"].error("No promise ID set for remoteGetDbValue.");if(!table)_loglevel2["default"].error("Cannot remotely retrieve database value without being supplied the table to look in!");if(!key)_loglevel2["default"].error("Cannot remotely retrieve database value without being supplied the table's key!");_database2["default"].get(table,key).then(function(result){OneSignal._safePostMessage(creator,{remoteGetDbValue:true,result:result,from:_environment2["default"].getEnv(),promiseId:promiseId},OneSignal._initOptions.origin,null)})["catch"](function(e){_loglevel2["default"].error(e);OneSignal._safePostMessage(creator,{remoteGetDbValue:false,error:e,from:_environment2["default"].getEnv(),promiseId:promiseId},OneSignal._initOptions.origin,null)})}()};OneSignal._getSubdomainState(function(curState){curState.isIframe=isIframe;OneSignal._safePostMessage(creator,{oneSignalInitPageReady:curState,from:_environment2["default"].getEnv()},OneSignal._initOptions.origin,[messageChannel.port2])});OneSignal._initSaveState();OneSignal._httpRegistration=true;if(0==location.search.indexOf("?session=true"))return;OneSignal._getPlayerId(null,function(player_id){if(_environment2["default"].isPopup())navigator.serviceWorker.register(OneSignal.SERVICE_WORKER_PATH,OneSignal.SERVICE_WORKER_PARAM).then(OneSignal._enableNotifications,OneSignal._registerError)})},_getSubdomainState:function _getSubdomainState(callback){var state={};Promise.all([_database2["default"].get("Ids","userId"),_database2["default"].get("Ids","registrationId"),_database2["default"].get("Options","subscription")]).then(function _internalInit_GotAppRegistrationSubscriptionIds(result){var userIdResult=result[0];var registrationIdResult=result[1];var subscriptionResult=result[2];callback({userId:userIdResult?userIdResult.id:null,registrationId:registrationIdResult?registrationIdResult.id:null,notifPermssion:Notification.permission,subscriptionSet:subscriptionResult?subscriptionResult.value:null,isPushEnabled:"granted"==Notification.permission&&userIdResult&&registrationIdResult&&(subscriptionResult&&subscriptionResult.value||null==subscriptionResult)})})["catch"](function(e){_loglevel2["default"].error(e)})},_initSaveState:function _initSaveState(){OneSignal._app_id=OneSignal._initOptions.appId;_database2["default"].put("Ids",{type:"appId",id:OneSignal._app_id});_database2["default"].put("Options",{key:"pageTitle",value:document.title})},_supportsDirectPermission:function _supportsDirectPermission(){return(0,_utils.isSupportedSafari)()||"https:"==location.protocol||0==location.host.indexOf("localhost")||0==location.host.indexOf("127.0.0.1")},_getPromptOptionsQueryString:function _getPromptOptionsQueryString(){var message_localization_opts=OneSignal._initOptions.promptOptions;var message_localization_opts_str="";if(message_localization_opts){var message_localization_params=["actionMessage","exampleNotificationTitleDesktop","exampleNotificationMessageDesktop","exampleNotificationTitleMobile","exampleNotificationMessageMobile","exampleNotificationCaption","acceptButtonText","cancelButtonText","showCredit"];for(var i=0;i<message_localization_params.length;i++){var key=message_localization_params[i];var value=message_localization_opts[key];var encoded_value=encodeURIComponent(value);if(value||false===value||""===value)message_localization_opts_str+="&"+key+"="+encoded_value}}return message_localization_opts_str},_storeInitialValues:function _storeInitialValues(){_loglevel2["default"].debug("Called %c_storeInitialValues()",(0,_utils.getConsoleStyle)("code"));return OneSignal._getNotificationPermission(OneSignal._initOptions.safari_web_id).then(function(permission){_limitStore2["default"].put("notification.permission",permission);OneSignal._installNativePromptPermissionChangedHook();return _database2["default"].get("Ids","userId")}).then(function(result){if(void 0===result)OneSignal._isUninitiatedVisitor=true;var storeValue=result?result.id:null;_limitStore2["default"].put("db.ids.userId",storeValue);return OneSignal._getSubscription()}).then(function(currentSubscription){_limitStore2["default"].put("setsubscription.value",currentSubscription)})["catch"](function(e){return _loglevel2["default"].error(e)})},_sessionInit:function _sessionInit(options){_loglevel2["default"].debug("Called %c_sessionInit("+JSON.stringify(options)+")",(0,_utils.getConsoleStyle)("code"));OneSignal._initSaveState();var hostPageProtocol=location.origin.match(/^http(s|):\/\/(www\.|)/)[0];if(OneSignal._useHttpMode)if(options.fromRegisterFor){var dualScreenLeft=void 0!=window.screenLeft?window.screenLeft:screen.left;var dualScreenTop=void 0!=window.screenTop?window.screenTop:screen.top;var thisWidth=window.innerWidth?window.innerWidth:document.documentElement.clientWidth?document.documentElement.clientWidth:screen.width;var thisHeight=window.innerHeight?window.innerHeight:document.documentElement.clientHeight?document.documentElement.clientHeight:screen.height;var childWidth=OneSignal._windowWidth;var childHeight=OneSignal._windowHeight;var left=thisWidth/2-childWidth/2+dualScreenLeft;var top=thisHeight/2-childHeight/2+dualScreenTop;_loglevel2["default"].debug("Opening popup window.");var message_localization_opts_str=OneSignal._getPromptOptionsQueryString();var childWindow=window.open(OneSignal._initOneSignalHttp+"?"+message_localization_opts_str+"&hostPageProtocol="+hostPageProtocol,"_blank","scrollbars=yes, width="+childWidth+", height="+childHeight+", top="+top+", left="+left);if(childWindow)childWindow.focus()}else OneSignal._addSessionIframe(hostPageProtocol);else{if((0,_utils.isSupportedSafari)()){if(OneSignal._initOptions.safari_web_id)OneSignal._getNotificationPermission(OneSignal._initOptions.safari_web_id).then(function(permission){window.safari.pushNotification.requestPermission(OneSignal._API_URL+"safari",OneSignal._initOptions.safari_web_id,{app_id:OneSignal._app_id},function(data){_loglevel2["default"].info("Safari requestPermission() callback:",data);var notificationPermissionAfterRequest=OneSignal._getNotificationPermission(OneSignal._initOptions.safari_web_id);if(data.deviceToken)OneSignal._registerWithOneSignal(OneSignal._app_id,data.deviceToken.toLowerCase(),7);else sessionStorage.setItem("ONE_SIGNAL_SESSION",true);OneSignal._triggerEvent_nativePromptPermissionChanged(permission)})})["catch"](function(e){return _loglevel2["default"].error(e)})}else if(options.modalPrompt&&options.fromRegisterFor){if(!(0,_utils.isPushNotificationsSupported)()){_loglevel2["default"].warn("An attempt was made to open the HTTPS modal permission prompt, but push notifications are not supported on this browser. Opening canceled.");return}OneSignal.isPushNotificationsEnabled(function(pushEnabled){var element=document.createElement("div");element.setAttribute("id","OneSignal-iframe-modal");element.innerHTML='<div id="notif-permission" style="background: rgba(0, 0, 0, 0.7); position: fixed; top: 0; left: 0; right: 0; bottom: 0; z-index: 3000000000; display: block"></div>';document.body.appendChild(element);var iframeStyle=document.createElement("style");iframeStyle.innerHTML="@media (max-width: 560px) { .OneSignal-permission-iframe { width: 100%; height: 100%;} }@media (min-width: 561px) { .OneSignal-permission-iframe { top: 50%; left: 50%; margin-left: -275px; margin-top: -248px;} }";document.getElementsByTagName("head")[0].appendChild(iframeStyle);var message_localization_opts_str=OneSignal._getPromptOptionsQueryString();var iframeNode=document.createElement("iframe");iframeNode.className="OneSignal-permission-iframe";iframeNode.style.cssText="background: rgba(255, 255, 255, 1); position: fixed;";iframeNode.src=OneSignal._initOneSignalHttp+"?"+message_localization_opts_str+"&id="+OneSignal._app_id+"&httpsPrompt=true&pushEnabled="+pushEnabled+"&permissionBlocked="+("undefined"==typeof Notification||"denied"==Notification.permission)+"&hostPageProtocol="+hostPageProtocol;iframeNode.setAttribute("frameborder","0");iframeNode.width=OneSignal._windowWidth.toString();iframeNode.height=OneSignal._windowHeight.toString();_loglevel2["default"].debug("Opening HTTPS modal prompt.");document.getElementById("notif-permission").appendChild(iframeNode)})}else if("serviceWorker"in navigator)OneSignal._registerForW3CPush(options);else _loglevel2["default"].debug("Service workers are not supported in this browser.");_events2["default"].trigger(OneSignal.EVENTS.SDK_INITIALIZED)}},_updateServiceWorker:function _updateServiceWorker(){var updateCheckAlreadyRan=sessionStorage.getItem("onesignal-update-serviceworker-completed");if(!navigator.serviceWorker||!_environment2["default"].isHost()||"https:"!==location.protocol||"true"==updateCheckAlreadyRan){_loglevel2["default"].warn("Skipping _updateServiceWorker().");return}try{sessionStorage.setItem("onesignal-update-serviceworker-completed","true")}catch(e){_loglevel2["default"].error(e)}return navigator.serviceWorker.getRegistration().then(function(serviceWorkerRegistration){var sw_path="";if(OneSignal._initOptions.path)sw_path=OneSignal._initOptions.path;if(serviceWorkerRegistration&&serviceWorkerRegistration.active){_loglevel2["default"].debug("_updateServiceWorker():","Existing service worker");var previousWorkerUrl=serviceWorkerRegistration.active.scriptURL;if((0,_utils.contains)(previousWorkerUrl,sw_path+OneSignal.SERVICE_WORKER_PATH)){_loglevel2["default"].debug("_updateServiceWorker():","OneSignalSDKWorker is active");return _database2["default"].get("Ids","WORKER1_ONE_SIGNAL_SW_VERSION").then(function(versionResult){if(versionResult){_loglevel2["default"].debug("_updateServiceWorker():","Database version exists:",versionResult);if(versionResult.id!=OneSignal._VERSION){_loglevel2["default"].debug("_updateServiceWorker():","New version exists:",OneSignal._VERSION);_loglevel2["default"].info("Installing new service worker ("+versionResult.id+" -> "+OneSignal._VERSION+")");return navigator.serviceWorker.register(sw_path+OneSignal.SERVICE_WORKER_UPDATER_PATH,OneSignal.SERVICE_WORKER_PARAM)}else{_loglevel2["default"].debug("_updateServiceWorker():","No changed service worker version");return null}}else{_loglevel2["default"].debug("_updateServiceWorker():","No version was saved; somehow this got overwritten; Reinstall the alternate service worker");return navigator.serviceWorker.register(sw_path+OneSignal.SERVICE_WORKER_UPDATER_PATH,OneSignal.SERVICE_WORKER_PARAM)}})["catch"](function(e){_loglevel2["default"].error(e)})}else if((0,_utils.contains)(previousWorkerUrl,sw_path+OneSignal.SERVICE_WORKER_UPDATER_PATH)){_loglevel2["default"].debug("_updateServiceWorker():","OneSignalSDKUpdaterWorker is active");return _database2["default"].get("Ids","WORKER2_ONE_SIGNAL_SW_VERSION").then(function(versionResult){if(versionResult){_loglevel2["default"].debug("_updateServiceWorker():","Database version exists:",versionResult);if(versionResult.id!=OneSignal._VERSION){_loglevel2["default"].debug("_updateServiceWorker():","New version exists:",OneSignal._VERSION);_loglevel2["default"].info("Installing new service worker ("+versionResult.id+" -> "+OneSignal._VERSION+")");return navigator.serviceWorker.register(sw_path+OneSignal.SERVICE_WORKER_PATH,OneSignal.SERVICE_WORKER_PARAM)}else{_loglevel2["default"].debug("_updateServiceWorker():","No changed service worker version");return null}}else{_loglevel2["default"].debug("_updateServiceWorker():","No version was saved; somehow this got overwritten; Reinstall the alternate service worker");return navigator.serviceWorker.register(sw_path+OneSignal.SERVICE_WORKER_PATH,OneSignal.SERVICE_WORKER_PARAM)}})["catch"](function(e){_loglevel2["default"].error(e)})}else;}})["catch"](function(e){_loglevel2["default"].error(e)})},_registerForW3CPush:function _registerForW3CPush(options){_loglevel2["default"].debug("Called %c_registerForW3CPush("+JSON.stringify(options)+")",(0,_utils.getConsoleStyle)("code"));return _database2["default"].get("Ids","registrationId").then(function _registerForW3CPush_GotRegistrationId(registrationIdResult){if(!registrationIdResult||!options.fromRegisterFor||"granted"!=Notification.permission||null==navigator.serviceWorker.controller)navigator.serviceWorker.getRegistration().then(function(serviceWorkerRegistration){var sw_path="";if(OneSignal._initOptions.path)sw_path=OneSignal._initOptions.path;if("undefined"==typeof serviceWorkerRegistration)OneSignal._registerServiceWorker(sw_path+OneSignal.SERVICE_WORKER_PATH);else if(serviceWorkerRegistration.active){var previousWorkerUrl=serviceWorkerRegistration.active.scriptURL;if((0,_utils.contains)(previousWorkerUrl,sw_path+OneSignal.SERVICE_WORKER_PATH))_database2["default"].get("Ids","WORKER1_ONE_SIGNAL_SW_VERSION").then(function(versionResult){if(versionResult)if(versionResult.id!=OneSignal._VERSION){_loglevel2["default"].info("Installing new service worker ("+versionResult.id+" -> "+OneSignal._VERSION+")");OneSignal._registerServiceWorker(sw_path+OneSignal.SERVICE_WORKER_UPDATER_PATH)}else OneSignal._registerServiceWorker(sw_path+OneSignal.SERVICE_WORKER_PATH);else OneSignal._registerServiceWorker(sw_path+OneSignal.SERVICE_WORKER_UPDATER_PATH)})["catch"](function(e){_loglevel2["default"].error(e)});else if((0,_utils.contains)(previousWorkerUrl,sw_path+OneSignal.SERVICE_WORKER_UPDATER_PATH))_database2["default"].get("Ids","WORKER2_ONE_SIGNAL_SW_VERSION").then(function(versionResult){if(versionResult)if(versionResult.id!=OneSignal._VERSION){_loglevel2["default"].info("Installing new service worker ("+versionResult.id+" -> "+OneSignal._VERSION+")");OneSignal._registerServiceWorker(sw_path+OneSignal.SERVICE_WORKER_PATH)}else OneSignal._registerServiceWorker(sw_path+OneSignal.SERVICE_WORKER_UPDATER_PATH);else OneSignal._registerServiceWorker(sw_path+OneSignal.SERVICE_WORKER_PATH)})["catch"](function(e){_loglevel2["default"].error(e)});else{_loglevel2["default"].info("Unregistering previous service worker:",serviceWorkerRegistration);
serviceWorkerRegistration.unregister().then(function(unregistrationSuccessful){_loglevel2["default"].info("Result of unregistering:",unregistrationSuccessful);OneSignal._registerServiceWorker(sw_path+OneSignal.SERVICE_WORKER_PATH)})}}else if(null==serviceWorkerRegistration.installing)OneSignal._registerServiceWorker(sw_path+OneSignal.SERVICE_WORKER_PATH)})["catch"](function(e){_loglevel2["default"].error(e)})})["catch"](function(e){_loglevel2["default"].error(e)})},_registerServiceWorker:function _registerServiceWorker(full_sw_and_path){_loglevel2["default"].debug("Called %c_registerServiceWorker("+JSON.stringify(full_sw_and_path,null,4)+")",(0,_utils.getConsoleStyle)("code"));navigator.serviceWorker.register(full_sw_and_path,OneSignal.SERVICE_WORKER_PARAM).then(OneSignal._enableNotifications,OneSignal._registerError)},_addSessionIframe:function _addSessionIframe(hostPageProtocol){_loglevel2["default"].debug("Called %c_addSessionIframe("+JSON.stringify(hostPageProtocol,null,4)+")",(0,_utils.getConsoleStyle)("code"));var node=document.createElement("iframe");node.style.display="none";node.src=OneSignal._initOneSignalHttp+"Iframe";if(sessionStorage.getItem("ONE_SIGNAL_SESSION"))node.src+="?session=true&hostPageProtocol="+hostPageProtocol;else node.src+="?hostPageProtocol="+hostPageProtocol;document.body.appendChild(node);OneSignal._sessionIframeAdded=true},_registerError:function _registerError(err){_loglevel2["default"].error("ServiceWorker registration",err)},_enableNotifications:function _enableNotifications(existingServiceWorkerRegistration){if(existingServiceWorkerRegistration)_loglevel2["default"].debug("An older ServiceWorker exists:",existingServiceWorkerRegistration);if(!("PushManager"in window)){_loglevel2["default"].error("Push messaging is not supported. No PushManager.");sessionStorage.setItem("ONE_SIGNAL_SESSION",true);return}if(!("showNotification"in ServiceWorkerRegistration.prototype)){_loglevel2["default"].error("Notifications are not supported. showNotification not available in ServiceWorkerRegistration.");sessionStorage.setItem("ONE_SIGNAL_SESSION",true);return}if("denied"===Notification.permission){_loglevel2["default"].warn("The user has blocked notifications.");return}navigator.serviceWorker.ready.then(function(serviceWorkerRegistration){_loglevel2["default"].info("Service worker now active:",serviceWorkerRegistration);OneSignal._establishServiceWorkerChannel(serviceWorkerRegistration);OneSignal._subscribeForPush(serviceWorkerRegistration)})["catch"](function(e){_loglevel2["default"].error(e)})},_getNotificationPermission:function _getNotificationPermission(safariWebId){return new Promise(function(resolve,reject){var isHttpsProtocol="https:"===location.protocol;var noSubdomain=!OneSignal._useHttpMode;if(Browser.safari||isHttpsProtocol&&noSubdomain)if(window.safari)if(safariWebId)resolve(window.safari.pushNotification.permission(safariWebId).permission);else resolve("default");else resolve(Notification.permission);else{var uid=(0,_utils.guid)();_limitStore2["default"].put("_getNotificationPermissionPromiseResolve."+uid,resolve);if(OneSignal._iframePort)OneSignal._iframePort.postMessage({remoteGetNotificationPermission:true,safariWebId:safariWebId,promiseId:uid,from:_environment2["default"].getEnv()});else resolve("default")}})},_triggerEvent_customPromptClicked:function _triggerEvent_customPromptClicked(clickResult){var recentPermissions=_limitStore2["default"].put("prompt.custom.permission",clickResult);_events2["default"].trigger(OneSignal.EVENTS.CUSTOM_PROMPT_CLICKED,{result:clickResult})},_triggerEvent_nativePromptPermissionChanged:function _triggerEvent_nativePromptPermissionChanged(from,to){var updateIfIdentical=arguments.length<=2||void 0===arguments[2]?false:arguments[2];if(void 0===to)var promise=OneSignal._getNotificationPermission(OneSignal._initOptions.safari_web_id).then(function(permission){to=permission})["catch"](function(e){return _loglevel2["default"].error(e)});else var promise=Promise.resolve();promise.then(function(){if(from!==to||updateIfIdentical){var recentPermissions=_limitStore2["default"].put("notification.permission",to);_events2["default"].trigger(OneSignal.EVENTS.NATIVE_PROMPT_PERMISSIONCHANGED,{from:from,to:to})}})},_triggerEvent_subscriptionChanged:function _triggerEvent_subscriptionChanged(to){_events2["default"].trigger(OneSignal.EVENTS.SUBSCRIPTION_CHANGED,to)},_triggerEvent_dbValueRetrieved:function _triggerEvent_dbValueRetrieved(value){_events2["default"].trigger(_database2["default"].EVENTS.RETRIEVED,value)},_triggerEvent_dbValueSet:function _triggerEvent_dbValueSet(value){_events2["default"].trigger(_database2["default"].EVENTS.SET,value)},_triggerEvent_internalSubscriptionSet:function _triggerEvent_internalSubscriptionSet(value){_events2["default"].trigger(OneSignal.EVENTS.INTERNAL_SUBSCRIPTIONSET,value)},_subscribeForPush:function _subscribeForPush(serviceWorkerRegistration){var notificationPermissionBeforeRequest="";OneSignal._getNotificationPermission(OneSignal._initOptions.safari_web_id).then(function(permission){notificationPermissionBeforeRequest=permission}).then(function(){return serviceWorkerRegistration.pushManager.subscribe({userVisibleOnly:true})}).then(function(subscription){sessionStorage.setItem("ONE_SIGNAL_NOTIFICATION_PERMISSION",Notification.permission);_database2["default"].get("Ids","appId").then(function _subscribeForPush_GotAppId(appIdResult){var appId=appIdResult.id;_loglevel2["default"].debug("Called OneSignal._subscribeForPush() -> serviceWorkerRegistration.pushManager.subscribe().");var registrationId=null;if(subscription)if("undefined"!=typeof subscription.subscriptionId)registrationId=subscription.subscriptionId;else registrationId=subscription.endpoint.replace(new RegExp("^(https://android.googleapis.com/gcm/send/|https://updates.push.services.mozilla.com/push/)"),"");else _loglevel2["default"].warn("Could not subscribe your browser for push notifications.");OneSignal._registerWithOneSignal(appId,registrationId,(0,_utils.isSupportedFireFox)()?8:5)})["catch"](function(e){_loglevel2["default"].error(e)})})["catch"](function(e){if("Registration failed - no sender id provided"===e.message){var manifestDom=document.querySelector("link[rel=manifest]");if(manifestDom){var manifestParentTagname=document.querySelector("link[rel=manifest]").parentNode.tagName.toLowerCase();var manifestHtml=document.querySelector("link[rel=manifest]").outerHTML;var manifestLocation=document.querySelector("link[rel=manifest]").href;if("head"!==manifestParentTagname)_loglevel2["default"].error("OneSignal: Your manifest %c"+manifestHtml,(0,_utils.getConsoleStyle)("code"),"must be referenced in the <head> tag to be detected properly. It is currently referenced in <"+manifestParentTagname+">. (See: https://documentation.onesignal.com/docs/website-sdk-installation#3-include-and-initialize-the-sdk)");else{var manifestLocationOrigin=new URL(manifestLocation).origin;var currentOrigin=location.origin;if(currentOrigin!==manifestLocationOrigin)_loglevel2["default"].error("OneSignal: Your manifest is being served from "+manifestLocationOrigin+", which is different from the current page's origin of "+currentOrigin+". Please serve your manifest from the same origin as your page's. If you are using a content delivery network (CDN), please add an exception so that the manifest is not served by your CDN. (See: https://documentation.onesignal.com/docs/website-sdk-installation#2-upload-required-files)");else _loglevel2["default"].error("OneSignal: Please check your manifest at "+manifestLocation+". The %cgcm_sender_id",(0,_utils.getConsoleStyle)("code"),"field is missing or invalid. (See: https://documentation.onesignal.com/docs/website-sdk-installation#2-upload-required-files)")}}else if("https:"===location.protocol)_loglevel2["default"].error("OneSignal: You must reference a %cmanifest.json",(0,_utils.getConsoleStyle)("code"),"in <head>. (See: https://documentation.onesignal.com/docs/website-sdk-installation#2-upload-required-files)")}else _loglevel2["default"].error("Error while subscribing for push:",e);OneSignal._getNotificationPermission().then(function(permission){if("default"===permission)OneSignal._triggerEvent_nativePromptPermissionChanged(notificationPermissionBeforeRequest,permission,true);if(!OneSignal._usingNativePermissionHook)OneSignal._triggerEvent_nativePromptPermissionChanged(notificationPermissionBeforeRequest,permission);if(opener&&OneSignal._httpRegistration)window.close()})["catch"](function(e){return _loglevel2["default"].error(e)})})},sendTag:function sendTag(key,value,callback){if(!(0,_utils.isPushNotificationsSupportedAndWarn)())return;var tag={};tag[key]=value;return OneSignal.sendTags(tag,callback)},sendTags:function sendTags(tags,callback){if(!(0,_utils.isPushNotificationsSupportedAndWarn)())return;if(tags)Object.keys(tags).forEach(function(key){if(false===tags[key])tags[key]="false"});return new Promise(function(resolve,reject){var futureSendTagResolveFn=null;return _database2["default"].get("Ids","userId").then(function(userIdResult){if(userIdResult)return(0,_api.apiCall)("players/"+userIdResult.id,"PUT",{app_id:OneSignal._app_id,tags:tags});else{if(!OneSignal._futureSendTags)OneSignal._futureSendTags={};(0,_objectAssign2["default"])(OneSignal._futureSendTags,tags);futureSendTagResolveFn=function futureSendTagResolveFn(currentTags){if(callback)callback(currentTags);resolve(currentTags)};OneSignal._futureSendTagsPromiseResolves.push(futureSendTagResolveFn.bind(null,tags))}}).then(function(){if(null==futureSendTagResolveFn){if(callback)callback(tags);resolve(tags)}})["catch"](function(e){_loglevel2["default"].error("sendTags:",e);reject(e)})})},deleteTag:function deleteTag(tag){if(!(0,_utils.isPushNotificationsSupportedAndWarn)())return;if("string"==typeof tag||tag instanceof String)return OneSignal.deleteTags([tag]);else return Promise.reject(new Error("OneSignal: Invalid tag '"+tag+"' to delete. You must pass in a string."))},deleteTags:function deleteTags(tags,callback){if(!(0,_utils.isPushNotificationsSupportedAndWarn)())return;return new Promise(function(resolve,reject){if(tags instanceof Array&&tags.length>0){var jsonPair={};var length=tags.length;for(var i=0;length>i;i++)jsonPair[tags[i]]="";return OneSignal.sendTags(jsonPair).then(function(emptySentTagsObj){var emptySentTags=Object.keys(emptySentTagsObj);if(callback)callback(emptySentTags);resolve(emptySentTags)})}else reject(new Error("OneSignal: Invalid tags '"+tags+"' to delete. You must pass in array of strings with at least one tag string to be deleted."))})},_listener_receiveMessage:function receiveMessage(event){if(!(OneSignal._initOptions&&(""===event.origin||"https://onesignal.com"===event.origin||event.origin==="https://"+(OneSignal._initOptions.subdomainName||"")+".onesignal.com"||false)))return;if(event.data.from)var from=event.data.from.capitalize();else var from="IFrame/Popup";_loglevel2["default"].debug("%c"+_environment2["default"].getEnv().capitalize()+" ⬸ "+from+":",(0,_utils.getConsoleStyle)("postmessage"),event.data);if(event.data.oneSignalInitPageReady){var eventData=event.data.oneSignalInitPageReady;if(eventData.isIframe)OneSignal._iframePort=event.ports[0];if(eventData.userId)_database2["default"].put("Ids",{type:"userId",id:eventData.userId});if(eventData.registrationId)_database2["default"].put("Ids",{type:"registrationId",id:eventData.registrationId});OneSignal._fireNotificationEnabledCallback(eventData.isPushEnabled);OneSignal._sendUnsentTags();_database2["default"].get("Options").then(function _listener_receiveMessage(options){if(!options.defaultUrl)options.defaultUrl=document.URL;if(!options.defaultTitle)options.defaultTitle=document.title;options.parent_url=document.URL;event.ports[0].postMessage({initOptions:options,from:_environment2["default"].getEnv()});_events2["default"].trigger(OneSignal.EVENTS.SDK_INITIALIZED)})["catch"](function(e){_loglevel2["default"].error("_listener_receiveMessage:",e)})}else if(event.data.currentNotificationPermission)OneSignal._fireNotificationEnabledCallback(event.data.currentNotificationPermission.isPushEnabled);else if(event.data.remoteGetDbValue){var promiseId=event.data.promiseId;var result=event.data.result;var promiseResolve=_limitStore2["default"].getLast("getSubscriptionPromiseResolve."+promiseId);if(!promiseResolve)_loglevel2["default"].warn("When getSubscription() was previously called, no Promise was stored to be called back now.");else{_limitStore2["default"].remove("getSubscriptionPromiseResolve."+promiseId);promiseResolve(result)}}else if(event.data.remoteGetNotificationPermissionResponse){var permission=event.data.remoteGetNotificationPermissionResponse;var _promiseId=event.data.promiseId;var _promiseResolve=_limitStore2["default"].getLast("_getNotificationPermissionPromiseResolve."+_promiseId);if(!_promiseResolve)_loglevel2["default"].warn("When _getNotificationPermission() was previously called, no Promise was stored to be called back now.");else{_limitStore2["default"].remove("_getNotificationPermissionPromiseResolve."+_promiseId);_promiseResolve(permission)}}else if(event.data.setSubscriptionComplete){var _promiseId2=event.data.promiseId;var _promiseResolve2=_limitStore2["default"].getLast("setSubscriptionPromiseResolve."+_promiseId2);if(!_promiseResolve2)_loglevel2["default"].warn("When setSubscription() was previously called, no Promise was stored to be called back now.");else{_limitStore2["default"].remove("setSubscriptionPromiseResolve."+_promiseId2);_promiseResolve2()}}else if(event.data.remoteEvent){var name=event.data.remoteEvent;var _data=event.data.remoteEventData;var remoteTriggerEnv=event.data.from;if(!name||void 0===_data)_loglevel2["default"].warn("Received an event back from postMessage, but it was undefined!");else _events2["default"].trigger(name,_data,remoteTriggerEnv)}else if(event.data.idsAvailable){sessionStorage.setItem("ONE_SIGNAL_SESSION",true);_database2["default"].put("Ids",{type:"userId",id:event.data.idsAvailable.userId});_database2["default"].put("Ids",{type:"registrationId",id:event.data.idsAvailable.registrationId});if(OneSignal._idsAvailable_callback.length>0)for(;OneSignal._idsAvailable_callback.length>0;){var curr_callback=OneSignal._idsAvailable_callback.pop();curr_callback({userId:event.data.idsAvailable.userId,registrationId:event.data.idsAvailable.registrationId})}OneSignal._sendUnsentTags()}else if(event.data.httpsPromptAccepted){OneSignal.registerForPushNotifications();OneSignal.setSubscription(true);var elem=document.getElementById("OneSignal-iframe-modal");elem.parentNode.removeChild(elem);OneSignal._triggerEvent_customPromptClicked("granted")}else if(event.data.httpsPromptCanceled){var _elem=document.getElementById("OneSignal-iframe-modal");_elem.parentNode.removeChild(_elem);OneSignal._triggerEvent_customPromptClicked("denied")}else if(event.data.httpPromptAccepted)OneSignal._triggerEvent_customPromptClicked("granted");else if(event.data.httpPromptCanceled)OneSignal._triggerEvent_customPromptClicked("denied");else if(event.data.httpNativePromptPermissionChanged){var recentPermissions=_limitStore2["default"].get("notification.permission");var permissionBeforePrompt=recentPermissions[0];OneSignal._triggerEvent_nativePromptPermissionChanged(permissionBeforePrompt,event.data.httpNativePromptPermissionChanged)}else if(OneSignal.openedNotification)OneSignal._fireTransmittedNotificationClickedCallbacks(event,data)},addListenerForNotificationOpened:function addListenerForNotificationOpened(callback){if(!(0,_utils.isPushNotificationsSupported)()){_loglevel2["default"].warn("Your browser does not support push notifications.");return}OneSignal._notificationOpenedCallbacks.push(callback);OneSignal._fireSavedNotificationClickedCallbacks()},_fireTransmittedNotificationClickedCallbacks:function _fireTransmittedNotificationClickedCallbacks(data){var _iteratorNormalCompletion=true;var _didIteratorError=false;var _iteratorError=void 0;try{for(var _iterator=OneSignal._notificationOpenedCallbacks[Symbol.iterator](),_step;!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=true){var notificationOpenedCallback=_step.value;notificationOpenedCallback(data)}}catch(err){_didIteratorError=true;_iteratorError=err}finally{try{if(!_iteratorNormalCompletion&&_iterator["return"])_iterator["return"]()}finally{if(_didIteratorError)throw _iteratorError}}},_fireSavedNotificationClickedCallbacks:function _fireSavedNotificationClickedCallbacks(){_database2["default"].get("NotificationOpened",document.URL).then(function(notificationOpenedResult){if(notificationOpenedResult){_database2["default"].remove("NotificationOpened",document.URL);var notificationData=notificationOpenedResult.data;var timestamp=notificationOpenedResult.timestamp;var discardNotification=false;if(timestamp){var now=Date.now();var diffMilliseconds=Date.now()-timestamp;var diffMinutes=diffMilliseconds/1e3/60;discardNotification=diffMinutes>5}if(discardNotification)return;var _iteratorNormalCompletion2=true;var _didIteratorError2=false;var _iteratorError2=void 0;try{for(var _iterator2=OneSignal._notificationOpenedCallbacks[Symbol.iterator](),_step2;!(_iteratorNormalCompletion2=(_step2=_iterator2.next()).done);_iteratorNormalCompletion2=true){var notificationOpenedCallback=_step2.value;notificationOpenedCallback(notificationData)}}catch(err){_didIteratorError2=true;_iteratorError2=err}finally{try{if(!_iteratorNormalCompletion2&&_iterator2["return"])_iterator2["return"]()}finally{if(_didIteratorError2)throw _iteratorError2}}}})["catch"](function(e){return _loglevel2["default"].error(e)})},_fireNotificationEnabledCallback:function _fireNotificationEnabledCallback(newNotificationPermission){if(OneSignal._isNotificationEnabledCallback)for(;OneSignal._isNotificationEnabledCallback.length>0;){var callback=OneSignal._isNotificationEnabledCallback.pop();callback(newNotificationPermission)}},getIdsAvailable:function getIdsAvailable(callback){if(void 0===callback)return;if(!(0,_utils.isPushNotificationsSupported)()){_loglevel2["default"].warn("Your browser does not support push notifications.");return}OneSignal._idsAvailable_callback.push(callback);Promise.all([_database2["default"].get("Ids","userId"),_database2["default"].get("Ids","registrationId")]).then(function getIdsAvailable_GotUserRegistrationIds(results){var userIdResult=results[0];var registrationIdResult=results[1];if(userIdResult)if(registrationIdResult)for(;OneSignal._idsAvailable_callback.length>0;){var curr_callback=OneSignal._idsAvailable_callback.pop();curr_callback({userId:userIdResult.id,registrationId:registrationIdResult.id})}else for(;OneSignal._idsAvailable_callback.length>0;){var curr_callback=OneSignal._idsAvailable_callback.pop();curr_callback({userId:userIdResult.id,registrationId:null})}})["catch"](function(e){_loglevel2["default"].error(e)})},getTags:function getTags(callback){if(!(0,_utils.isPushNotificationsSupported)()){_loglevel2["default"].warn("Your browser does not support push notifications.");return}return _database2["default"].get("Ids","userId").then(function(userIdResult){if(userIdResult)return(0,_api.apiCall)("players/"+userIdResult.id,"GET",null);else throw new Error("Could not get tags because you are not registered with OneSignal (no user ID).")}).then(function(response){if(callback)callback(response.tags);return response.tags})["catch"](function(e){(0,_utils.logError)(e);return Promise.reject(e)})},isPushNotificationsEnabled:function isPushNotificationsEnabled(callback){if(!(0,_utils.isPushNotificationsSupported)()){_loglevel2["default"].warn("Your browser does not support push notifications.");return}if(OneSignal._initOptions.subdomainName&&!(0,_utils.isBrowserSafari)()){OneSignal._isNotificationEnabledCallback.push(callback);if(OneSignal._iframePort)OneSignal._iframePort.postMessage({getNotificationPermission:true,from:_environment2["default"].getEnv()});return}Promise.all([_database2["default"].get("Ids","registrationId"),_database2["default"].get("Options","subscription")]).then(function(results){var registrationIdResult=results[0];var subscriptionResult=results[1];if(registrationIdResult){if(subscriptionResult&&!subscriptionResult.value)return callback(false);callback("granted"==Notification.permission&&null!==navigator.serviceWorker.controller)}else callback(false)})["catch"](function(e){_loglevel2["default"].error(e)})},_getNotificationTypes:function _getNotificationTypes(callback){return new Promise(function(resolve,reject){OneSignal._getSubscription().then(function(currentSubscription){var notificationType=currentSubscription?1:-2;resolve(notificationType);callback(notificationType)})})},setSubscription:function setSubscription(newSubscription){if(!(0,_utils.isPushNotificationsSupported)()){_loglevel2["default"].warn("Your browser does not support push notifications.");return}return new Promise(function(resolve,reject){if(OneSignal._iframePort){var uid=(0,_utils.guid)();_limitStore2["default"].put("setSubscriptionPromiseResolve."+uid,resolve);OneSignal._iframePort.postMessage({setSubdomainState:{setSubscription:newSubscription},promiseId:uid,from:_environment2["default"].getEnv()})}else OneSignal._getSubscription().then(function(currentSubscription){if(currentSubscription!=newSubscription)return _database2["default"].put("Options",{key:"subscription",value:newSubscription});else{_loglevel2["default"].debug("Called %csetSubscription("+newSubscription+")",(0,_utils.getConsoleStyle)("code"),"but there was no change, so skipping call.");resolve()}}).then(function(){return _database2["default"].get("Ids","userId")}).then(function(userIdResult){if(userIdResult)return(0,_api.apiCall)("players/"+userIdResult.id,"PUT",{app_id:OneSignal._app_id,notification_types:newSubscription?1:-2});else{_loglevel2["default"].warn("Called %csetSubscription("+newSubscription+")",(0,_utils.getConsoleStyle)("code"),"but there was no user ID, so the result was not forwarded to OneSignal.");return Promise.reject("No user ID.")}}).then(function(){OneSignal._triggerEvent_internalSubscriptionSet(newSubscription);resolve()})["catch"](function(e){if("Error"===e.constructor.name){_loglevel2["default"].error(e);reject(e)}else resolve(e)})})},_getSubscription:function _getSubscription(){return new Promise(function(resolve,reject){_loglevel2["default"].debug("Called %c_getSubscription()",(0,_utils.getConsoleStyle)("code"),"(from "+_environment2["default"].getEnv()+")");var promise;if(OneSignal._iframePort)!function(){var uid=(0,_utils.guid)();promise=new Promise(function(resolve,reject){_limitStore2["default"].put("getSubscriptionPromiseResolve."+uid,resolve);OneSignal._iframePort.postMessage({remoteGetDbValue:true,table:"Options",key:"subscription",promiseId:uid,from:_environment2["default"].getEnv()})})}();else promise=_database2["default"].get("Options","subscription");promise.then(function(subscriptionResult){resolve(!(subscriptionResult&&false==subscriptionResult.value))})["catch"](function(e){_loglevel2["default"].error(e);reject(e)})})},_safePostMessage:function _safePostMessage(creator,data,targetOrigin,receiver){var tOrigin=targetOrigin.toLowerCase();if(tOrigin.startsWith("http://")){var queryDict={};location.search.substr(1).split("&").forEach(function(item){queryDict[item.split("=")[0]]=item.split("=")[1]});var validPreURLRegex=/^http(s|):\/\/(www\.|)/;tOrigin=tOrigin.replace(validPreURLRegex,queryDict.hostPageProtocol)}if(!data.from)data.from=_environment2["default"].getEnv();if(receiver)creator.postMessage(data,tOrigin,receiver);else creator.postMessage(data,tOrigin)},_process_pushes:function _process_pushes(array){for(var i=0;i<array.length;i++)OneSignal.push(array[i])},push:function push(item){if("function"==typeof item)item();else{var functionName=item.shift();OneSignal[functionName].apply(null,item)}}};Object.defineProperty(OneSignal,"LOGGING",{get:function get(){if(!OneSignal._LOGGING)OneSignal._LOGGING=false;return OneSignal._LOGGING},set:function set(logLevel){if(logLevel){_loglevel2["default"].setDefaultLevel(_loglevel2["default"].levels.TRACE);OneSignal._LOGGING=true}else{_loglevel2["default"].setDefaultLevel(_loglevel2["default"].levels.ERROR);OneSignal._LOGGING=false}},enumerable:true,configurable:true});if(_environment2["default"].isBrowser())window.addEventListener("message",OneSignal._listener_receiveMessage,false);else;if(OneSignal.LOGGING)_loglevel2["default"].setDefaultLevel(_loglevel2["default"].levels.TRACE);else _loglevel2["default"].setDefaultLevel(_loglevel2["default"].levels.ERROR);_loglevel2["default"].info("%cOneSignal Web SDK loaded (version "+OneSignal._VERSION+", "+_environment2["default"].getEnv()+" environment).",(0,_utils.getConsoleStyle)("bold"));module.exports=OneSignal}).call(exports,__webpack_require__(24))},function(module,exports){(function(global){(function(){!function(self){"use strict";function normalizeName(name){if("string"!=typeof name)name=String(name);if(/[^a-z0-9\-#$%&'*+.\^_`|~]/i.test(name))throw new TypeError("Invalid character in header field name");return name.toLowerCase()}function normalizeValue(value){if("string"!=typeof value)value=String(value);return value}function Headers(headers){this.map={};if(headers instanceof Headers)headers.forEach(function(value,name){this.append(name,value)},this);else if(headers)Object.getOwnPropertyNames(headers).forEach(function(name){this.append(name,headers[name])},this)}function consumed(body){if(body.bodyUsed)return Promise.reject(new TypeError("Already read"));body.bodyUsed=true}function fileReaderReady(reader){return new Promise(function(resolve,reject){reader.onload=function(){resolve(reader.result)};reader.onerror=function(){reject(reader.error)}})}function readBlobAsArrayBuffer(blob){var reader=new FileReader;reader.readAsArrayBuffer(blob);return fileReaderReady(reader)}function readBlobAsText(blob){var reader=new FileReader;reader.readAsText(blob);return fileReaderReady(reader)}function Body(){this.bodyUsed=false;this._initBody=function(body){this._bodyInit=body;if("string"==typeof body)this._bodyText=body;else if(support.blob&&Blob.prototype.isPrototypeOf(body))this._bodyBlob=body;else if(support.formData&&FormData.prototype.isPrototypeOf(body))this._bodyFormData=body;else if(!body)this._bodyText="";else if(support.arrayBuffer&&ArrayBuffer.prototype.isPrototypeOf(body));else throw new Error("unsupported BodyInit type");if(!this.headers.get("content-type"))if("string"==typeof body)this.headers.set("content-type","text/plain;charset=UTF-8");else if(this._bodyBlob&&this._bodyBlob.type)this.headers.set("content-type",this._bodyBlob.type)};if(support.blob){this.blob=function(){var rejected=consumed(this);if(rejected)return rejected;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);else if(this._bodyFormData)throw new Error("could not read FormData body as blob");else return Promise.resolve(new Blob([this._bodyText]))};this.arrayBuffer=function(){return this.blob().then(readBlobAsArrayBuffer)};this.text=function(){var rejected=consumed(this);if(rejected)return rejected;if(this._bodyBlob)return readBlobAsText(this._bodyBlob);else if(this._bodyFormData)throw new Error("could not read FormData body as text");else return Promise.resolve(this._bodyText)}}else this.text=function(){var rejected=consumed(this);return rejected?rejected:Promise.resolve(this._bodyText)};if(support.formData)this.formData=function(){return this.text().then(decode)};this.json=function(){return this.text().then(JSON.parse)};return this}function normalizeMethod(method){var upcased=method.toUpperCase();return methods.indexOf(upcased)>-1?upcased:method}function Request(input,options){options=options||{};var body=options.body;if(Request.prototype.isPrototypeOf(input)){if(input.bodyUsed)throw new TypeError("Already read");this.url=input.url;this.credentials=input.credentials;if(!options.headers)this.headers=new Headers(input.headers);this.method=input.method;this.mode=input.mode;if(!body){body=input._bodyInit;input.bodyUsed=true}}else this.url=input;this.credentials=options.credentials||this.credentials||"omit";if(options.headers||!this.headers)this.headers=new Headers(options.headers);this.method=normalizeMethod(options.method||this.method||"GET");this.mode=options.mode||this.mode||null;this.referrer=null;if(("GET"===this.method||"HEAD"===this.method)&&body)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(body)}function decode(body){var form=new FormData;body.trim().split("&").forEach(function(bytes){if(bytes){var split=bytes.split("=");var name=split.shift().replace(/\+/g," ");var value=split.join("=").replace(/\+/g," ");form.append(decodeURIComponent(name),decodeURIComponent(value))}});return form}function headers(xhr){var head=new Headers;var pairs=xhr.getAllResponseHeaders().trim().split("\n");pairs.forEach(function(header){var split=header.trim().split(":");var key=split.shift().trim();var value=split.join(":").trim();head.append(key,value)});return head}function Response(bodyInit,options){if(!options)options={};this.type="default";this.status=options.status;this.ok=this.status>=200&&this.status<300;this.statusText=options.statusText;this.headers=options.headers instanceof Headers?options.headers:new Headers(options.headers);this.url=options.url||"";this._initBody(bodyInit)}if(self.fetch)return;Headers.prototype.append=function(name,value){name=normalizeName(name);value=normalizeValue(value);var list=this.map[name];if(!list){list=[];this.map[name]=list}list.push(value)};Headers.prototype["delete"]=function(name){delete this.map[normalizeName(name)]};Headers.prototype.get=function(name){var values=this.map[normalizeName(name)];return values?values[0]:null};Headers.prototype.getAll=function(name){return this.map[normalizeName(name)]||[]};Headers.prototype.has=function(name){return this.map.hasOwnProperty(normalizeName(name))};Headers.prototype.set=function(name,value){this.map[normalizeName(name)]=[normalizeValue(value)]};Headers.prototype.forEach=function(callback,thisArg){Object.getOwnPropertyNames(this.map).forEach(function(name){this.map[name].forEach(function(value){callback.call(thisArg,value,name,this)},this)},this)};var support={blob:"FileReader"in self&&"Blob"in self&&function(){try{new Blob;return true}catch(e){return false}}(),formData:"FormData"in self,arrayBuffer:"ArrayBuffer"in self};var methods=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];Request.prototype.clone=function(){return new Request(this)};Body.call(Request.prototype);Body.call(Response.prototype);Response.prototype.clone=function(){return new Response(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new Headers(this.headers),url:this.url})};Response.error=function(){var response=new Response(null,{status:0,statusText:""});response.type="error";return response};var redirectStatuses=[301,302,303,307,308];Response.redirect=function(url,status){if(-1===redirectStatuses.indexOf(status))throw new RangeError("Invalid status code");return new Response(null,{status:status,headers:{location:url}})};self.Headers=Headers;self.Request=Request;self.Response=Response;self.fetch=function(input,init){return new Promise(function(resolve,reject){function responseURL(){if("responseURL"in xhr)return xhr.responseURL;if(/^X-Request-URL:/m.test(xhr.getAllResponseHeaders()))return xhr.getResponseHeader("X-Request-URL");return}var request;if(Request.prototype.isPrototypeOf(input)&&!init)request=input;else request=new Request(input,init);var xhr=new XMLHttpRequest;xhr.onload=function(){var status=1223===xhr.status?204:xhr.status;if(100>status||status>599){reject(new TypeError("Network request failed"));return}var options={status:status,statusText:xhr.statusText,headers:headers(xhr),url:responseURL()};var body="response"in xhr?xhr.response:xhr.responseText;resolve(new Response(body,options))};xhr.onerror=function(){reject(new TypeError("Network request failed"))};xhr.open(request.method,request.url,true);if("include"===request.credentials)xhr.withCredentials=true;
if("responseType"in xhr&&support.blob)xhr.responseType="blob";request.headers.forEach(function(value,name){xhr.setRequestHeader(name,value)});xhr.send("undefined"==typeof request._bodyInit?null:request._bodyInit)})};self.fetch.polyfill=true}("undefined"!=typeof self?self:this);module.exports=global.fetch}).call(global)}).call(exports,function(){return this}())},function(module,exports){"use strict";String.prototype.capitalize=function(){return this.charAt(0).toUpperCase()+this.slice(1)}},function(module,exports,__webpack_require__){(function(fetch){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function apiCall(action,method,data){var headers=new Headers;headers.append("Content-Type","application/json;charset=UTF-8");var contents={method:method||"NO_METHOD_SPECIFIED",headers:headers,cache:"no-cache"};if(data)contents.body=JSON.stringify(data);var status;return fetch(_vars.API_URL+action,contents).then(function(response){status=response.status;return response.json()}).then(function(json){if(status>=200&&300>status)return json;else return Promise.reject(json)})}function sendNotification(appId,playerIds,titles,contents,url,icon,data){var params={app_id:appId,contents:contents,include_player_ids:playerIds,isAnyWeb:true,data:data};if(titles)params.headings=titles;if(url)params.url=url;if(icon){params.chrome_web_icon=icon;params.firefox_icon=icon}(0,_utils.trimUndefined)(params);return apiCall("notifications","POST",params)["catch"](function(e){if(e.warnings){var _iteratorNormalCompletion=true;var _didIteratorError=false;var _iteratorError=void 0;try{for(var _iterator=e.warnings[Symbol.iterator](),_step;!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=true){var warning=_step.value;if((0,_utils.contains)(warning,"Received ERROR 401 (Unauthorized, check your App auth_key.)"))_loglevel2["default"].error("OneSignal: Your Google Server API Key is either invalid, is missing the required 'Google Cloud Messaging for Android' API, or is only accepting requests from certain IPs. (See: https://documentation.onesignal.com/docs/website-push-common-problems#received-error-401-unauthorized-check-your-app-aut)")}}catch(err){_didIteratorError=true;_iteratorError=err}finally{try{if(!_iteratorNormalCompletion&&_iterator["return"])_iterator["return"]()}finally{if(_didIteratorError)throw _iteratorError}}}_loglevel2["default"].error("Failed to send notification:",e)})}Object.defineProperty(exports,"__esModule",{value:true});exports.apiCall=apiCall;exports.sendNotification=sendNotification;var _vars=__webpack_require__(1);var _loglevel=__webpack_require__(3);var _loglevel2=_interopRequireDefault(_loglevel);var _utils=__webpack_require__(2)}).call(exports,__webpack_require__(24))},function(module,exports){"use strict";function LimitStore(){}Object.defineProperty(exports,"__esModule",{value:true});LimitStore.store={};LimitStore.LIMIT=2;LimitStore.put=function(key,value){if(void 0===LimitStore.store[key])LimitStore.store[key]=[null,null];LimitStore.store[key].push(value);if(LimitStore.store[key].length==LimitStore.LIMIT+1)LimitStore.store[key].shift();return LimitStore.store[key]};LimitStore.get=function(key){if(void 0===LimitStore.store[key])LimitStore.store[key]=[null,null];return LimitStore.store[key]};LimitStore.getFirst=function(key){return LimitStore.get(key)[0]};LimitStore.getLast=function(key){return LimitStore.get(key)[1]};LimitStore.remove=function(key){delete LimitStore.store[key]};LimitStore.isEmpty=function(key){var values=LimitStore.get(key);return null===values[0]&&null===values[1]};exports["default"]=LimitStore},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:true});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();var _loglevel=__webpack_require__(3);var _loglevel2=_interopRequireDefault(_loglevel);var _environment=__webpack_require__(21);var _environment2=_interopRequireDefault(_environment);var _utils=__webpack_require__(2);__webpack_require__(25);var SILENT_EVENTS=["onesignal.nb.hovering","onesignal.nb.hovered","onesignal.nb.launcher.button.click","onesignal.nb.launcher.click","onesignal.nb.animatedelement.hiding","onesignal.nb.animatedelement.hidden","onesignal.nb.animatedelement.showing","onesignal.nb.animatedelement.shown","onesignal.nb.activeanimatedelement.activating","onesignal.nb.activeanimatedelement.active","onesignal.nb.activeanimatedelement.inactivating","onesignal.nb.activeanimatedelement.inactive","onesignal.db.retrieved","onesignal.db.set"];var RETRIGGER_REMOTE_EVENTS=["onesignal.prompt.custom.clicked","onesignal.prompt.native.permissionchanged","onesignal.subscription.changed","onesignal.internal.subscriptionset"];var Event=function(){function Event(){_classCallCheck(this,Event)}_createClass(Event,null,[{key:"trigger",value:function trigger(eventName,data){var remoteTriggerEnv=arguments.length<=2||void 0===arguments[2]?null:arguments[2];if(!eventName)_loglevel2["default"].warn("Missing event name.");if(!(0,_utils.contains)(SILENT_EVENTS,eventName))if(!_environment2["default"].isBrowser()){_loglevel2["default"].debug("("+_environment2["default"].getEnv().capitalize()+") » %c"+eventName+":",(0,_utils.getConsoleStyle)("event"),data,"(not triggered in a ServiceWorker environment)");return}else{var displayData=data;if(remoteTriggerEnv)var env=_environment2["default"].getEnv().capitalize()+" ⬸ "+remoteTriggerEnv.capitalize();else var env=_environment2["default"].getEnv().capitalize();if(displayData||false===displayData)_loglevel2["default"].debug("("+env+") » %c"+eventName+":",(0,_utils.getConsoleStyle)("event"),displayData);else _loglevel2["default"].debug("("+env+") » %c"+eventName,(0,_utils.getConsoleStyle)("event"))}if(_environment2["default"].isBrowser()){var event=new CustomEvent(eventName,{bubbles:true,cancelable:true,detail:data});window.dispatchEvent(event);if(!_environment2["default"].isHost()){var creator=opener||parent;if(!creator)_loglevel2["default"].error("Could not send event '"+eventName+"' back to host page because no creator (opener or parent) found!");else if((0,_utils.contains)(RETRIGGER_REMOTE_EVENTS,eventName))OneSignal._safePostMessage(creator,{remoteEvent:eventName,remoteEventData:data,from:_environment2["default"].getEnv()},OneSignal._initOptions.origin,null)}}}}]);return Event}();exports["default"]=Event},function(module,exports,__webpack_require__){"use strict";function _interopRequireWildcard(obj){if(obj&&obj.__esModule)return obj;else{var newObj={};if(null!=obj)for(var key in obj)if(Object.prototype.hasOwnProperty.call(obj,key))newObj[key]=obj[key];newObj["default"]=obj;return newObj}}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:true});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();var _utils=__webpack_require__(2);var _environment=__webpack_require__(21);var _environment2=_interopRequireDefault(_environment);var _limitStore=__webpack_require__(27);var _limitStore2=_interopRequireDefault(_limitStore);var _loglevel=__webpack_require__(3);var _loglevel2=_interopRequireDefault(_loglevel);var _events=__webpack_require__(28);var _events2=_interopRequireDefault(_events);var _bowser=__webpack_require__(20);var Browser=_interopRequireWildcard(_bowser);var _vars=__webpack_require__(1);var _AnimatedElement=__webpack_require__(30);var _AnimatedElement2=_interopRequireDefault(_AnimatedElement);var _ActiveAnimatedElement=__webpack_require__(31);var _ActiveAnimatedElement2=_interopRequireDefault(_ActiveAnimatedElement);var _Launcher=__webpack_require__(33);var _Launcher2=_interopRequireDefault(_Launcher);var _Badge=__webpack_require__(34);var _Badge2=_interopRequireDefault(_Badge);var _Button=__webpack_require__(35);var _Button2=_interopRequireDefault(_Button);var _Dialog=__webpack_require__(37);var _Dialog2=_interopRequireDefault(_Dialog);var _Message=__webpack_require__(36);var _Message2=_interopRequireDefault(_Message);__webpack_require__(38);var logoSvg=__webpack_require__(42);var Bell=function(){function Bell(){var _this=this;var _ref=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];var _ref$enable=_ref.enable;var enable=void 0===_ref$enable?false:_ref$enable;var _ref$size=_ref.size;var size=void 0===_ref$size?"medium":_ref$size;var _ref$position=_ref.position;var position=void 0===_ref$position?"bottom-right":_ref$position;var _ref$theme=_ref.theme;var theme=void 0===_ref$theme?"default":_ref$theme;var _ref$showLauncherAfte=_ref.showLauncherAfter;var showLauncherAfter=void 0===_ref$showLauncherAfte?10:_ref$showLauncherAfte;var _ref$showBadgeAfter=_ref.showBadgeAfter;var showBadgeAfter=void 0===_ref$showBadgeAfter?300:_ref$showBadgeAfter;var _ref$text=_ref.text;var text=void 0===_ref$text?{"tip.state.unsubscribed":"Subscribe to notifications","tip.state.subscribed":"You're subscribed to notifications","tip.state.blocked":"You've blocked notifications","message.prenotify":"Click to subscribe to notifications","message.action.subscribing":"Click <strong>{{prompt.native.grant}}</strong> to receive notifications","message.action.subscribed":"Thanks for subscribing!","message.action.resubscribed":"You're subscribed to notifications","message.action.unsubscribed":"You won't receive notifications again","dialog.main.title":"Manage Site Notifications","dialog.main.button.subscribe":"SUBSCRIBE","dialog.main.button.unsubscribe":"UNSUBSCRIBE","dialog.blocked.title":"Unblock Notifications","dialog.blocked.message":"Follow these instructions to allow notifications:"}:_ref$text;var _ref$prenotify=_ref.prenotify;var prenotify=void 0===_ref$prenotify?true:_ref$prenotify;var _ref$showCredit=_ref.showCredit;var showCredit=void 0===_ref$showCredit?true:_ref$showCredit;var _ref$colors=_ref.colors;var colors=void 0===_ref$colors?null:_ref$colors;var _ref$offset=_ref.offset;var offset=void 0===_ref$offset?null:_ref$offset;_classCallCheck(this,Bell);this.options={enable:enable,size:size,position:position,theme:theme,showLauncherAfter:showLauncherAfter,showBadgeAfter:showBadgeAfter,text:text,prenotify:prenotify,showCredit:showCredit,colors:colors,offset:offset};if(!this.options.enable)return;if(!(0,_utils.contains)(["small","medium","large"],this.options.size))throw new Error("Invalid size "+this.options.size+" for notify button. Choose among 'small', 'medium', or 'large'.");if(!(0,_utils.contains)(["bottom-left","bottom-right"],this.options.position))throw new Error("Invalid position "+this.options.position+" for notify button. Choose either 'bottom-left', or 'bottom-right'.");if(!(0,_utils.contains)(["default","inverse"],this.options.theme))throw new Error("Invalid theme "+this.options.theme+" for notify button. Choose either 'default', or 'inverse'.");if(this.options.showLauncherAfter<0)throw new Error("Invalid delay duration of "+this.options.showLauncherAfter+" for showing the notify button. Choose a value above 0.");if(this.options.showBadgeAfter<0)throw new Error("Invalid delay duration of "+this.options.showBadgeAfter+" for showing the notify button's badge. Choose a value above 0.");this.size=this.options.size;this.position=this.options.position;this.text=this.options.text;if(!this.text["tip.state.unsubscribed"])this.text["tip.state.unsubscribed"]="Subscribe to notifications";if(!this.text["tip.state.subscribed"])this.text["tip.state.subscribed"]="You're subscribed to notifications";if(!this.text["tip.state.blocked"])this.text["tip.state.blocked"]="You've blocked notifications";if(!this.text["message.prenotify"])this.text["message.prenotify"]="Click to subscribe to notifications";if(!this.text["message.action.subscribed"])this.text["message.action.subscribed"]="Thanks for subscribing!";if(!this.text["message.action.resubscribed"])this.text["message.action.resubscribed"]="You're subscribed to notifications";if(!this.text["message.action.subscribing"])this.text["message.action.subscribing"]="Click <strong>{{prompt.native.grant}}</strong> to receive notifications";if(!this.text["message.action.unsubscribed"])this.text["message.action.unsubscribed"]="You won't receive notifications again";if(!this.text["dialog.main.title"])this.text["dialog.main.title"]="Manage Site Notifications";if(!this.text["dialog.main.button.subscribe"])this.text["dialog.main.button.subscribe"]="SUBSCRIBE";if(!this.text["dialog.main.button.unsubscribe"])this.text["dialog.main.button.unsubscribe"]="UNSUBSCRIBE";if(!this.text["dialog.blocked.title"])this.text["dialog.blocked.title"]="Unblock Notifications";if(!this.text["dialog.blocked.message"])this.text["dialog.blocked.message"]="Follow these instructions to allow notifications:";this.substituteText();this.state=Bell.STATES.UNINITIALIZED;window.addEventListener(Bell.EVENTS.SUBSCRIBE_CLICK,function(){_this.dialog.subscribeButton.disabled=true;OneSignal.setSubscription(true).then(function(){_this.dialog.subscribeButton.disabled=false;return _this.dialog.hide()}).then(function(){return _this.message.display(_Message2["default"].TYPES.MESSAGE,_this.text["message.action.resubscribed"],_Message2["default"].TIMEOUT)}).then(function(){_this.launcher.clearIfWasInactive();return _this.launcher.inactivate()})});window.addEventListener(Bell.EVENTS.UNSUBSCRIBE_CLICK,function(){_this.dialog.unsubscribeButton.disabled=true;OneSignal.setSubscription(false).then(function(){_this.dialog.unsubscribeButton.disabled=false;return _this.dialog.hide()}).then(function(){_this.launcher.clearIfWasInactive();return _this.launcher.activate()}).then(function(){return _this.message.display(_Message2["default"].TYPES.MESSAGE,_this.text["message.action.unsubscribed"],_Message2["default"].TIMEOUT)})});window.addEventListener(Bell.EVENTS.HOVERING,function(){_this.hovering=true;_this.launcher.activateIfInactive();if(_this.message.shown||_this.dialog.shown){_this.hovering=false;return}if(_this.message.contentType===_Message2["default"].TYPES.MESSAGE){_this.hovering=false;return}new Promise(function(resolve,reject){if(_this.message.queued.length>0)return _this.message.dequeue().then(function(msg){_this.message.content=msg;_this.message.contentType=_Message2["default"].TYPES.QUEUED;resolve()});else{_this.message.content=_this.message.getTipForState();_this.message.contentType=_Message2["default"].TYPES.TIP;resolve()}}).then(function(){return _this.message.show()}).then(function(){_this.hovering=false})});window.addEventListener(Bell.EVENTS.HOVERED,function(){if(_this.message.contentType===_Message2["default"].TYPES.MESSAGE)return;if(!_this.dialog.hidden)return;if(_this.hovering){_this.hovering=false;_this.message.waitUntilShown().then(function(){return(0,_utils.delay)(_Message2["default"].TIMEOUT)}).then(function(){return _this.message.hide()}).then(function(){if(_this.launcher.wasInactive&&_this.dialog.hidden){_this.launcher.inactivate();_this.launcher.wasInactive=null}})}if(_this.message.shown)_this.message.hide().then(function(){if(_this.launcher.wasInactive&&_this.dialog.hidden){_this.launcher.inactivate();_this.launcher.wasInactive=null}})});window.addEventListener(OneSignal.EVENTS.SUBSCRIPTION_CHANGED,function(e){var isSubscribed=e.detail;_this.setState(isSubscribed?Bell.STATES.SUBSCRIBED:Bell.STATES.UNSUBSCRIBED)});window.addEventListener(OneSignal.EVENTS.NATIVE_PROMPT_PERMISSIONCHANGED,function(from,to){_this.updateState()});window.addEventListener(OneSignal.EVENTS.WELCOME_NOTIFICATION_SENT,function(e){});this.updateState()}_createClass(Bell,[{key:"substituteText",value:function substituteText(){for(var key in this.text)if(this.text.hasOwnProperty(key)){var value=this.text[key];var browserName=Browser.name.toLowerCase();for(var tKey in Bell.TEXT_SUBS)if(Bell.TEXT_SUBS.hasOwnProperty(tKey)){var tValue=Bell.TEXT_SUBS[tKey];var zValue=tValue[browserName];if(value&&(0,_utils.contains)(value,"{{"))this.text[key]=value.replace("{{"+tKey+"}}",void 0!==zValue?zValue:tValue["default"])}}}}],[{key:"EVENTS",get:function get(){return{STATE_CHANGED:"onesignal.nb.state.changed",LAUNCHER_CLICK:"onesignal.nb.launcher.click",BELL_CLICK:"onesignal.nb.launcher.button.click",SUBSCRIBE_CLICK:"onesignal.nb.launcher.dialog.button.subscribe.click",UNSUBSCRIBE_CLICK:"onesignal.nb.launcher.dialog.button.unsubscribe.click",HOVERING:"onesignal.nb.hovering",HOVERED:"onesignal.nb.hovered"}}},{key:"STATES",get:function get(){return{UNINITIALIZED:"uninitialized",SUBSCRIBED:"subscribed",UNSUBSCRIBED:"unsubscribed",BLOCKED:"blocked"}}},{key:"TEXT_SUBS",get:function get(){return{"prompt.native.grant":{"default":"Allow",chrome:"Allow",firefox:"Always Receive Notifications",safari:"Allow"}}}}]);_createClass(Bell,[{key:"showDialogProcedure",value:function showDialogProcedure(){var _this2=this;if(!this.dialog.shown)this.dialog.show().then(function(e){(0,_utils.once)(document,"click",function(e,destroyEventListener){var wasDialogClicked=_this2.dialog.element.contains(e.target);if(wasDialogClicked);else{destroyEventListener();if(_this2.dialog.shown)_this2.dialog.hide().then(function(e){_this2.launcher.inactivateIfWasInactive()})["catch"](function(e){_loglevel2["default"].error(e)})}},true)})["catch"](function(e){_loglevel2["default"].error(e)})}},{key:"create",value:function create(){var _this3=this;if(!(0,_utils.isPushNotificationsSupported)())return;if(!this.options.enable)return;if(this.container)(0,_utils.removeDomElement)("onesignal-bell-container");window.addDomElement=_utils.addDomElement;(0,_utils.addDomElement)("body","beforeend",'<div id="onesignal-bell-container" class="onesignal-bell-container onesignal-reset"></div>');(0,_utils.addDomElement)(this.container,"beforeend",'<div id="onesignal-bell-launcher" class="onesignal-bell-launcher"></div>');(0,_utils.addDomElement)(this.launcher.selector,"beforeend",'<div class="onesignal-bell-launcher-button"></div>');(0,_utils.addDomElement)(this.launcher.selector,"beforeend",'<div class="onesignal-bell-launcher-badge"></div>');(0,_utils.addDomElement)(this.launcher.selector,"beforeend",'<div class="onesignal-bell-launcher-message"></div>');(0,_utils.addDomElement)(this.message.selector,"beforeend",'<div class="onesignal-bell-launcher-message-body"></div>');(0,_utils.addDomElement)(this.launcher.selector,"beforeend",'<div class="onesignal-bell-launcher-dialog"></div>');(0,_utils.addDomElement)(this.dialog.selector,"beforeend",'<div class="onesignal-bell-launcher-dialog-body"></div>');(0,_utils.addDomElement)(this.button.selector,"beforeEnd",logoSvg);new Promise(function(resolve){OneSignal.isPushNotificationsEnabled(function(isPushEnabled){resolve(isPushEnabled)})}).then(function(isPushEnabled){var resizeTo=isPushEnabled?"small":_this3.options.size;_this3.launcher.resize(resizeTo).then(function(){if("bottom-left"===_this3.options.position){(0,_utils.addCssClass)(_this3.container,"onesignal-bell-container-bottom-left");(0,_utils.addCssClass)(_this3.launcher.selector,"onesignal-bell-launcher-bottom-left")}else if("bottom-right"===_this3.options.position){(0,_utils.addCssClass)(_this3.container,"onesignal-bell-container-bottom-right");(0,_utils.addCssClass)(_this3.launcher.selector,"onesignal-bell-launcher-bottom-right")}else throw new Error("Invalid OneSignal notify button position "+_this3.options.position);if("default"===_this3.options.theme)(0,_utils.addCssClass)(_this3.launcher.selector,"onesignal-bell-launcher-theme-default");else if("inverse"===_this3.options.theme)(0,_utils.addCssClass)(_this3.launcher.selector,"onesignal-bell-launcher-theme-inverse");else throw new Error("Invalid OneSignal notify button theme "+_this3.options.theme);_this3.applyOffsetIfSpecified();_this3.setCustomColorsIfSpecified();_loglevel2["default"].info("Showing the notify button.");(isPushEnabled?_this3.launcher.inactivate():(0,_utils.nothing)()).then(function(){return(0,_utils.delay)(_this3.options.showLauncherAfter)}).then(function(){return _this3.launcher.show()}).then(function(){return(0,_utils.delay)(_this3.options.showBadgeAfter)}).then(function(){if(_this3.options.prenotify&&!isPushEnabled&&OneSignal._isNewVisitor)return _this3.message.enqueue(_this3.text["message.prenotify"]).then(function(){return _this3.badge.show()});else return(0,_utils.nothing)()}).then(function(){return _this3.initialized=true})["catch"](function(e){return _loglevel2["default"].error(e)})})["catch"](function(e){return(0,_utils.logError)(e)})})}},{key:"applyOffsetIfSpecified",value:function applyOffsetIfSpecified(){var offset=this.options.offset;if(offset){this.launcher.element.style.cssText="";if(offset.bottom)this.launcher.element.style.cssText+="bottom: "+offset.bottom+";";if("bottom-right"===this.options.position){if(offset.right)this.launcher.element.style.cssText+="right: "+offset.right+";"}else if("bottom-left"===this.options.position)if(offset.left)this.launcher.element.style.cssText+="left: "+offset.left+";"}}},{key:"setCustomColorsIfSpecified",value:function setCustomColorsIfSpecified(){var dialogButton=this.dialog.element.querySelector("button.action");var pulseRing=this.button.element.querySelector(".pulse-ring");this.graphic.querySelector(".background").style.cssText="";var foregroundElements=this.graphic.querySelectorAll(".foreground");for(var i=0;i<foregroundElements.length;i++){var element=foregroundElements[i];element.style.cssText=""}this.graphic.querySelector(".stroke").style.cssText="";this.badge.element.style.cssText="";if(dialogButton){dialogButton.style.cssText="";dialogButton.style.cssText=""}if(pulseRing)pulseRing.style.cssText="";if(this.options.colors){var colors=this.options.colors;if(colors["circle.background"])this.graphic.querySelector(".background").style.cssText+="fill: "+colors["circle.background"];if(colors["circle.foreground"]){var _foregroundElements=this.graphic.querySelectorAll(".foreground");for(var i=0;i<_foregroundElements.length;i++){var element=_foregroundElements[i];element.style.cssText+="fill: "+colors["circle.foreground"]}this.graphic.querySelector(".stroke").style.cssText+="stroke: "+colors["circle.foreground"]}if(colors["badge.background"])this.badge.element.style.cssText+="background: "+colors["badge.background"];if(colors["badge.bordercolor"])this.badge.element.style.cssText+="border-color: "+colors["badge.bordercolor"];if(colors["badge.foreground"])this.badge.element.style.cssText+="color: "+colors["badge.foreground"];if(dialogButton){if(colors["dialog.button.background"])this.dialog.element.querySelector("button.action").style.cssText+="background: "+colors["dialog.button.background"];if(colors["dialog.button.foreground"])this.dialog.element.querySelector("button.action").style.cssText+="color: "+colors["dialog.button.foreground"];if(colors["dialog.button.background.hovering"])this.addCssToHead("onesignal-background-hover-style","#onesignal-bell-container.onesignal-reset .onesignal-bell-launcher .onesignal-bell-launcher-dialog button.action:hover { background: "+colors["dialog.button.background.hovering"]+" !important; }");if(colors["dialog.button.background.active"])this.addCssToHead("onesignal-background-active-style","#onesignal-bell-container.onesignal-reset .onesignal-bell-launcher .onesignal-bell-launcher-dialog button.action:active { background: "+colors["dialog.button.background.active"]+" !important; }")}if(pulseRing)if(colors["pulse.color"])this.button.element.querySelector(".pulse-ring").style.cssText="border-color: "+colors["pulse.color"]}}},{key:"addCssToHead",value:function addCssToHead(id,css){var existingStyleDom=document.getElementById(id);if(existingStyleDom)return;var styleDom=document.createElement("style");styleDom.id=id;styleDom.type="text/css";if(styleDom.styleSheet)styleDom.styleSheet.cssText=css;else styleDom.appendChild(document.createTextNode(css));document.head.appendChild(styleDom)}},{key:"updateState",value:function updateState(){var _this4=this;OneSignal.isPushNotificationsEnabled(function(isEnabled){_this4.setState(isEnabled?Bell.STATES.SUBSCRIBED:Bell.STATES.UNSUBSCRIBED);if("denied"===_limitStore2["default"].getLast("notification.permission"))_this4.setState(Bell.STATES.BLOCKED)})}},{key:"setState",value:function setState(newState){var lastState=this.state;this.state=newState;if(lastState!==newState)_events2["default"].trigger(Bell.EVENTS.STATE_CHANGED,{from:lastState,to:newState})}},{key:"container",get:function get(){return document.querySelector("#onesignal-bell-container")}},{key:"graphic",get:function get(){return this.button.element.querySelector("svg")}},{key:"launcher",get:function get(){if(!this._launcher)this._launcher=new _Launcher2["default"](this);return this._launcher}},{key:"button",get:function get(){if(!this._button)this._button=new _Button2["default"](this);return this._button}},{key:"badge",get:function get(){if(!this._badge)this._badge=new _Badge2["default"](this);return this._badge}},{key:"message",get:function get(){if(!this._message)this._message=new _Message2["default"](this);return this._message}},{key:"dialog",get:function get(){if(!this._dialog)this._dialog=new _Dialog2["default"](this);return this._dialog}},{key:"subscribed",get:function get(){return this.state===Bell.STATES.SUBSCRIBED}},{key:"unsubscribed",get:function get(){return this.state===Bell.STATES.UNSUBSCRIBED}},{key:"blocked",get:function get(){return this.state===Bell.STATES.BLOCKED}}]);return Bell}();exports["default"]=Bell},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:true});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();var _utils=__webpack_require__(2);var _loglevel=__webpack_require__(3);var _loglevel2=_interopRequireDefault(_loglevel);var _events=__webpack_require__(28);var _events2=_interopRequireDefault(_events);var AnimatedElement=function(){function AnimatedElement(selector,showClass,hideClass){var state=arguments.length<=3||void 0===arguments[3]?"shown":arguments[3];var targetTransitionEvents=arguments.length<=4||void 0===arguments[4]?["opacity","transform"]:arguments[4];var nestedContentSelector=arguments.length<=5||void 0===arguments[5]?null:arguments[5];_classCallCheck(this,AnimatedElement);this.selector=selector;this.showClass=showClass;this.hideClass=hideClass;this.state=state;this.targetTransitionEvents=targetTransitionEvents;this.nestedContentSelector=nestedContentSelector;this.transitionCheckTimeout=500}_createClass(AnimatedElement,[{key:"show",value:function show(){var _this=this;if(!this.hidden)return Promise.resolve(this);else return new Promise(function(resolve){_this.state="showing";_events2["default"].trigger(AnimatedElement.EVENTS.SHOWING,_this);if(_this.hideClass)(0,_utils.removeCssClass)(_this.element,_this.hideClass);if(_this.showClass)(0,_utils.addCssClass)(_this.element,_this.showClass);if(0==_this.targetTransitionEvents.length)return resolve(_this);else{var timerId=setTimeout(function(){_loglevel2["default"].warn(_this.constructor.name+" did not completely show (state: "+_this.state+", activeState: "+_this.activeState+").")},_this.transitionCheckTimeout);(0,_utils.once)(_this.element,"transitionend",function(event,destroyListenerFn){if(event.target===_this.element&&(0,_utils.contains)(_this.targetTransitionEvents,event.propertyName)){clearTimeout(timerId);destroyListenerFn();_this.state="shown";_events2["default"].trigger(AnimatedElement.EVENTS.SHOWN,_this);return resolve(_this)}},true)}})}},{key:"hide",value:function hide(){var _this2=this;if(!this.shown)return Promise.resolve(this);else return new Promise(function(resolve){_this2.state="hiding";_events2["default"].trigger(AnimatedElement.EVENTS.HIDING,_this2);if(_this2.showClass)(0,_utils.removeCssClass)(_this2.element,_this2.showClass);if(_this2.hideClass)(0,_utils.addCssClass)(_this2.element,_this2.hideClass);if(0==_this2.targetTransitionEvents.length)return resolve(_this2);else(0,_utils.once)(_this2.element,"transitionend",function(event,destroyListenerFn){var timerId=setTimeout(function(){_loglevel2["default"].warn(_this2.constructor.name+" did not completely hide (state: "+_this2.state+", activeState: "+_this2.activeState+").")},_this2.transitionCheckTimeout);if(event.target===_this2.element&&(0,_utils.contains)(_this2.targetTransitionEvents,event.propertyName)){clearTimeout(timerId);destroyListenerFn();_this2.state="hidden";_events2["default"].trigger(AnimatedElement.EVENTS.HIDDEN,_this2);return resolve(_this2)}},true)})}},{key:"waitUntilShown",value:function waitUntilShown(){var _this3=this;if("shown"===this.state)return Promise.resolve(this);else return new Promise(function(resolve){(0,_utils.once)(window,AnimatedElement.EVENTS.SHOWN,function(event,destroyListenerFn){var self=_this3;if(event.detail===_this3){destroyListenerFn();return resolve(_this3)}},true)})}},{key:"waitUntilHidden",value:function waitUntilHidden(){var _this4=this;if("hidden"===this.state)return Promise.resolve(this);else return new Promise(function(resolve){(0,_utils.once)(window,AnimatedElement.EVENTS.HIDDEN,function(event,destroyListenerFn){if(event.detail===_this4){destroyListenerFn();return resolve(_this4)}},true)})}},{key:"content",get:function get(){if(this.nestedContentSelector)return this.element.querySelector(this.nestedContentSelector).innerHTML;else return this.element.innerHTML},set:function set(value){if(this.nestedContentSelector)this.element.querySelector(this.nestedContentSelector).innerHTML=value;else this.element.innerHTML=value}},{key:"element",get:function get(){return document.querySelector(this.selector)}},{key:"showing",get:function get(){return"showing"===this.state}},{key:"shown",get:function get(){return"shown"===this.state}},{key:"hiding",get:function get(){return"hiding"===this.state}},{key:"hidden",get:function get(){return"hidden"===this.state}}],[{key:"EVENTS",get:function get(){return{SHOWING:"onesignal.nb.animatedelement.showing",SHOWN:"onesignal.nb.animatedelement.shown",HIDING:"onesignal.nb.animatedelement.hiding",HIDDEN:"onesignal.nb.animatedelement.hidden"}}}]);return AnimatedElement}();exports["default"]=AnimatedElement},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){
return obj&&obj.__esModule?obj:{"default":obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return call&&("object"==typeof call||"function"==typeof call)?call:self}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass}Object.defineProperty(exports,"__esModule",{value:true});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();var _utils=__webpack_require__(2);var _loglevel=__webpack_require__(3);var _loglevel2=_interopRequireDefault(_loglevel);var _events=__webpack_require__(28);var _events2=_interopRequireDefault(_events);var _AnimatedElement2=__webpack_require__(30);var _AnimatedElement3=_interopRequireDefault(_AnimatedElement2);var _objectAssign=__webpack_require__(32);var _objectAssign2=_interopRequireDefault(_objectAssign);var ActiveAnimatedElement=function(_AnimatedElement){function ActiveAnimatedElement(selector,showClass,hideClass,activeClass,inactiveClass){var state=arguments.length<=5||void 0===arguments[5]?"shown":arguments[5];var activeState=arguments.length<=6||void 0===arguments[6]?"active":arguments[6];var targetTransitionEvents=arguments.length<=7||void 0===arguments[7]?["opacity","transform"]:arguments[7];var nestedContentSelector=arguments.length<=8||void 0===arguments[8]?null:arguments[8];_classCallCheck(this,ActiveAnimatedElement);var _this=_possibleConstructorReturn(this,Object.getPrototypeOf(ActiveAnimatedElement).call(this,selector,showClass,hideClass,state,targetTransitionEvents,nestedContentSelector));_this.activeClass=activeClass;_this.inactiveClass=inactiveClass;_this.activeState=activeState;return _this}_inherits(ActiveAnimatedElement,_AnimatedElement);_createClass(ActiveAnimatedElement,[{key:"activate",value:function activate(){var _this2=this;if(!this.inactive||!this.shown)return Promise.resolve(this);else return new Promise(function(resolve){_this2.activeState="activating";_events2["default"].trigger(ActiveAnimatedElement.EVENTS.ACTIVATING,_this2);if(_this2.inactiveClass)(0,_utils.removeCssClass)(_this2.element,_this2.inactiveClass);if(_this2.activeClass)(0,_utils.addCssClass)(_this2.element,_this2.activeClass);if(_this2.shown)if(0==_this2.targetTransitionEvents.length)return resolve(_this2);else{var timerId=setTimeout(function(){_loglevel2["default"].warn(_this2.constructor.name+" did not completely activate (state: "+_this2.state+", activeState: "+_this2.activeState+").")},_this2.transitionCheckTimeout);(0,_utils.once)(_this2.element,"transitionend",function(event,destroyListenerFn){if(event.target===_this2.element&&(0,_utils.contains)(_this2.targetTransitionEvents,event.propertyName)){clearTimeout(timerId);destroyListenerFn();_this2.activeState="active";_events2["default"].trigger(ActiveAnimatedElement.EVENTS.ACTIVE,_this2);return resolve(_this2)}},true)}else{call.warn("Ending activate() transition (alternative).");_this2.activeState="active";_events2["default"].trigger(ActiveAnimatedElement.EVENTS.ACTIVE,_this2);return resolve(_this2)}})}},{key:"inactivate",value:function inactivate(){var _this3=this;if(!this.active)return Promise.resolve(this);else return new Promise(function(resolve){_this3.activeState="inactivating";_events2["default"].trigger(ActiveAnimatedElement.EVENTS.INACTIVATING,_this3);if(_this3.activeClass)(0,_utils.removeCssClass)(_this3.element,_this3.activeClass);if(_this3.inactiveClass)(0,_utils.addCssClass)(_this3.element,_this3.inactiveClass);if(_this3.shown)if(0==_this3.targetTransitionEvents.length)return resolve(_this3);else{var timerId=setTimeout(function(){_loglevel2["default"].warn(_this3.constructor.name+" did not completely inactivate (state: "+_this3.state+", activeState: "+_this3.activeState+").")},_this3.transitionCheckTimeout);(0,_utils.once)(_this3.element,"transitionend",function(event,destroyListenerFn){if(event.target===_this3.element&&(0,_utils.contains)(_this3.targetTransitionEvents,event.propertyName)){clearTimeout(timerId);destroyListenerFn();_this3.activeState="inactive";_events2["default"].trigger(ActiveAnimatedElement.EVENTS.INACTIVE,_this3);return resolve(_this3)}},true)}else{_this3.activeState="inactive";_events2["default"].trigger(ActiveAnimatedElement.EVENTS.INACTIVE,_this3);return resolve(_this3)}})}},{key:"waitUntilActive",value:function waitUntilActive(){var _this4=this;if(this.active)return Promise.resolve(this);else return new Promise(function(resolve){(0,_utils.once)(window,ActiveAnimatedElement.EVENTS.ACTIVE,function(event,destroyListenerFn){if(event.detail===_this4){destroyListenerFn();return resolve(_this4)}},true)})}},{key:"waitUntilInactive",value:function waitUntilInactive(){var _this5=this;if(this.inactive)return Promise.resolve(this);else return new Promise(function(resolve){(0,_utils.once)(window,ActiveAnimatedElement.EVENTS.INACTIVE,function(event,destroyListenerFn){if(event.detail===_this5){destroyListenerFn();return resolve(_this5)}},true)})}},{key:"activating",get:function get(){return"activating"===this.activeState}},{key:"active",get:function get(){return"active"===this.activeState}},{key:"inactivating",get:function get(){return"inactivating"===this.activeState}},{key:"inactive",get:function get(){return"inactive"===this.activeState}}],[{key:"EVENTS",get:function get(){return(0,_objectAssign2["default"])({},_AnimatedElement3["default"].EVENTS,{ACTIVATING:"onesignal.nb.activeanimatedelement.activating",ACTIVE:"onesignal.nb.activeanimatedelement.active",INACTIVATING:"onesignal.nb.activeanimatedelement.inactivating",INACTIVE:"onesignal.nb.activeanimatedelement.inactive"})}}]);return ActiveAnimatedElement}(_AnimatedElement3["default"]);exports["default"]=ActiveAnimatedElement},function(module,exports){"use strict";function toObject(val){if(null===val||void 0===val)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(val)}var hasOwnProperty=Object.prototype.hasOwnProperty;var propIsEnumerable=Object.prototype.propertyIsEnumerable;module.exports=Object.assign||function(target,source){var from;var to=toObject(target);var symbols;for(var s=1;s<arguments.length;s++){from=Object(arguments[s]);for(var key in from)if(hasOwnProperty.call(from,key))to[key]=from[key];if(Object.getOwnPropertySymbols){symbols=Object.getOwnPropertySymbols(from);for(var i=0;i<symbols.length;i++)if(propIsEnumerable.call(from,symbols[i]))to[symbols[i]]=from[symbols[i]]}}return to}},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return call&&("object"==typeof call||"function"==typeof call)?call:self}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass}Object.defineProperty(exports,"__esModule",{value:true});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();var _get=function get(object,property,receiver){if(null===object)object=Function.prototype;var desc=Object.getOwnPropertyDescriptor(object,property);if(void 0===desc){var parent=Object.getPrototypeOf(object);if(null===parent)return;else return get(parent,property,receiver)}else if("value"in desc)return desc.value;else{var getter=desc.get;if(void 0===getter)return;return getter.call(receiver)}};var _utils=__webpack_require__(2);var _loglevel=__webpack_require__(3);var _loglevel2=_interopRequireDefault(_loglevel);var _events=__webpack_require__(28);var _events2=_interopRequireDefault(_events);var _AnimatedElement=__webpack_require__(30);var _AnimatedElement2=_interopRequireDefault(_AnimatedElement);var _ActiveAnimatedElement=__webpack_require__(31);var _ActiveAnimatedElement2=_interopRequireDefault(_ActiveAnimatedElement);var Launcher=function(_ActiveAnimatedElemen){function Launcher(bell){_classCallCheck(this,Launcher);var _this=_possibleConstructorReturn(this,Object.getPrototypeOf(Launcher).call(this,".onesignal-bell-launcher","onesignal-bell-launcher-active",null,null,"onesignal-bell-launcher-inactive","hidden","active"));_this.bell=bell;_this.wasInactive=false;return _this}_inherits(Launcher,_ActiveAnimatedElemen);_createClass(Launcher,[{key:"resize",value:function resize(size){var _this2=this;if("small"===size&&(0,_utils.hasCssClass)(this.element,"onesignal-bell-launcher-sm")||"medium"===size&&(0,_utils.hasCssClass)(this.element,"onesignal-bell-launcher-md")||"large"===size&&(0,_utils.hasCssClass)(this.element,"onesignal-bell-launcher-lg"))return Promise.resolve(this);(0,_utils.removeCssClass)(this.element,"onesignal-bell-launcher-sm");(0,_utils.removeCssClass)(this.element,"onesignal-bell-launcher-md");(0,_utils.removeCssClass)(this.element,"onesignal-bell-launcher-lg");if("small"===size)(0,_utils.addCssClass)(this.element,"onesignal-bell-launcher-sm");else if("medium"===size)(0,_utils.addCssClass)(this.element,"onesignal-bell-launcher-md");else if("large"===size)(0,_utils.addCssClass)(this.element,"onesignal-bell-launcher-lg");else throw new Error("Invalid OneSignal bell size "+size);if(!this.shown)return Promise.resolve(this);else return new Promise(function(resolve){if(0==_this2.targetTransitionEvents.length)return resolve(_this2);else{var timerId=setTimeout(function(){_loglevel2["default"].warn(_this2.constructor.name+" did not completely resize (state: "+_this2.state+", activeState: "+_this2.activeState+").")},_this2.transitionCheckTimeout);(0,_utils.once)(_this2.element,"transitionend",function(event,destroyListenerFn){if(event.target===_this2.element&&(0,_utils.contains)(_this2.targetTransitionEvents,event.propertyName)){clearTimeout(timerId);destroyListenerFn();return resolve(_this2)}},true)}})}},{key:"activateIfInactive",value:function activateIfInactive(){if(this.inactive){this.wasInactive=true;return this.activate()}else return(0,_utils.nothing)()}},{key:"inactivateIfWasInactive",value:function inactivateIfWasInactive(){if(this.wasInactive){this.wasInactive=false;return this.inactivate()}else return(0,_utils.nothing)()}},{key:"clearIfWasInactive",value:function clearIfWasInactive(){this.wasInactive=false}},{key:"inactivate",value:function inactivate(){var _this3=this;return this.bell.message.hide().then(function(){if(_this3.bell.badge.content.length>0)return _this3.bell.badge.hide().then(function(){return Promise.all([_get(Object.getPrototypeOf(Launcher.prototype),"inactivate",_this3).call(_this3),_this3.resize("small")])}).then(function(){return _this3.bell.badge.show()})["catch"](function(e){return _loglevel2["default"].error(e)});else return Promise.all([_get(Object.getPrototypeOf(Launcher.prototype),"inactivate",_this3).call(_this3),_this3.resize("small")])})}},{key:"activate",value:function activate(){var _this4=this;if(this.bell.badge.content.length>0)return this.bell.badge.hide().then(function(){return Promise.all([_get(Object.getPrototypeOf(Launcher.prototype),"activate",_this4).call(_this4),_this4.resize(_this4.bell.options.size)])}).then(function(){return _this4.bell.badge.show()})["catch"](function(e){return _loglevel2["default"].error(e)});else return Promise.all([_get(Object.getPrototypeOf(Launcher.prototype),"activate",this).call(this),this.resize(this.bell.options.size)])}}]);return Launcher}(_ActiveAnimatedElement2["default"]);exports["default"]=Launcher},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return call&&("object"==typeof call||"function"==typeof call)?call:self}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass}Object.defineProperty(exports,"__esModule",{value:true});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();var _utils=__webpack_require__(2);var _loglevel=__webpack_require__(3);var _loglevel2=_interopRequireDefault(_loglevel);var _events=__webpack_require__(28);var _events2=_interopRequireDefault(_events);var _ActiveAnimatedElement=__webpack_require__(31);var _ActiveAnimatedElement2=_interopRequireDefault(_ActiveAnimatedElement);var Badge=function(_ActiveAnimatedElemen){function Badge(){_classCallCheck(this,Badge);return _possibleConstructorReturn(this,Object.getPrototypeOf(Badge).call(this,".onesignal-bell-launcher-badge","onesignal-bell-launcher-badge-opened",null,"onesignal-bell-launcher-badge-active",null,"hidden"))}_inherits(Badge,_ActiveAnimatedElemen);_createClass(Badge,[{key:"increment",value:function increment(){if(!isNaN(this.content)){var badgeNumber=+this.content;badgeNumber+=1;this.content=badgeNumber.toString();return badgeNumber}}},{key:"decrement",value:function decrement(){if(!isNaN(this.content)){var badgeNumber=+this.content;badgeNumber-=1;if(badgeNumber>0)this.content=badgeNumber.toString();else this.content="";return badgeNumber}}}]);return Badge}(_ActiveAnimatedElement2["default"]);exports["default"]=Badge},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return call&&("object"==typeof call||"function"==typeof call)?call:self}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass}Object.defineProperty(exports,"__esModule",{value:true});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();var _utils=__webpack_require__(2);var _loglevel=__webpack_require__(3);var _loglevel2=_interopRequireDefault(_loglevel);var _events=__webpack_require__(28);var _events2=_interopRequireDefault(_events);var _ActiveAnimatedElement=__webpack_require__(31);var _ActiveAnimatedElement2=_interopRequireDefault(_ActiveAnimatedElement);var _bell=__webpack_require__(29);var _bell2=_interopRequireDefault(_bell);var _limitStore=__webpack_require__(27);var _limitStore2=_interopRequireDefault(_limitStore);var _Message=__webpack_require__(36);var _Message2=_interopRequireDefault(_Message);var Button=function(_ActiveAnimatedElemen){function Button(bell){_classCallCheck(this,Button);var _this=_possibleConstructorReturn(this,Object.getPrototypeOf(Button).call(this,".onesignal-bell-launcher-button",null,null,"onesignal-bell-launcher-button-active",null,"shown",[]));_this.bell=bell;_this.events={mouse:"bell.launcher.button.mouse"};_this.element.addEventListener("touchstart",function(e){_this.onHovering(e);_this.onTap(e)});_this.element.addEventListener("mouseenter",function(e){_this.onHovering(e)});_this.element.addEventListener("mouseleave",function(e){_this.onHovered(e)});_this.element.addEventListener("touchmove",function(e){_this.onHovered(e)});_this.element.addEventListener("mousedown",function(e){_this.onTap(e)});_this.element.addEventListener("mouseup",function(e){_this.onEndTap(e)});_this.element.addEventListener("click",function(e){_this.onHovered(e);_this.onClick(e)});return _this}_inherits(Button,_ActiveAnimatedElemen);_createClass(Button,[{key:"onHovering",value:function onHovering(e){if(_limitStore2["default"].isEmpty(this.events.mouse)||"out"===_limitStore2["default"].getLast(this.events.mouse))_events2["default"].trigger(_bell2["default"].EVENTS.HOVERING);_limitStore2["default"].put(this.events.mouse,"over")}},{key:"onHovered",value:function onHovered(e){_limitStore2["default"].put(this.events.mouse,"out");_events2["default"].trigger(_bell2["default"].EVENTS.HOVERED)}},{key:"onTap",value:function onTap(e){this.pulse();this.activate();this.bell.badge.activate()}},{key:"onEndTap",value:function onEndTap(e){this.inactivate();this.bell.badge.inactivate()}},{key:"onClick",value:function onClick(e){var _this2=this;_events2["default"].trigger(_bell2["default"].EVENTS.BELL_CLICK);_events2["default"].trigger(_bell2["default"].EVENTS.LAUNCHER_CLICK);if(this.bell.message.shown&&this.bell.message.contentType==_Message2["default"].TYPES.MESSAGE)return;var setSubscriptionState=_limitStore2["default"].getLast("setsubscription.value");if(this.bell.unsubscribed)if(false===setSubscriptionState)this.bell.launcher.activateIfInactive().then(function(){_this2.bell.showDialogProcedure()});else{OneSignal.registerForPushNotifications();(0,_utils.once)(window,OneSignal.EVENTS.NATIVE_PROMPT_PERMISSIONCHANGED,function(event,destroyListenerFn){destroyListenerFn();var permission=event.detail.to;if("granted"===permission)_this2.bell.message.display(_Message2["default"].TYPES.MESSAGE,_this2.bell.text["message.action.subscribed"],_Message2["default"].TIMEOUT).then(function(){_this2.bell.launcher.inactivate()})["catch"](function(e){_loglevel2["default"].error(e)})},true)}else if(this.bell.subscribed)this.bell.launcher.activateIfInactive().then(function(){_this2.bell.showDialogProcedure()});else if(this.bell.blocked)this.bell.launcher.activateIfInactive().then(function(){_this2.bell.showDialogProcedure()});return this.bell.message.hide()["catch"](function(e){return _loglevel2["default"].error(e)})}},{key:"pulse",value:function pulse(){(0,_utils.removeDomElement)(".pulse-ring");addDomElement(this.element,"beforeend",'<div class="pulse-ring"></div>');this.bell.setCustomColorsIfSpecified()}}]);return Button}(_ActiveAnimatedElement2["default"]);exports["default"]=Button},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return call&&("object"==typeof call||"function"==typeof call)?call:self}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass}Object.defineProperty(exports,"__esModule",{value:true});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();var _utils=__webpack_require__(2);var _loglevel=__webpack_require__(3);var _loglevel2=_interopRequireDefault(_loglevel);var _events=__webpack_require__(28);var _events2=_interopRequireDefault(_events);var _AnimatedElement2=__webpack_require__(30);var _AnimatedElement3=_interopRequireDefault(_AnimatedElement2);var _bell=__webpack_require__(29);var _bell2=_interopRequireDefault(_bell);var Message=function(_AnimatedElement){function Message(bell){_classCallCheck(this,Message);var _this=_possibleConstructorReturn(this,Object.getPrototypeOf(Message).call(this,".onesignal-bell-launcher-message","onesignal-bell-launcher-message-opened",null,"hidden",["opacity","transform"],".onesignal-bell-launcher-message-body"));_this.bell=bell;_this.contentType="";_this.queued=[];return _this}_inherits(Message,_AnimatedElement);_createClass(Message,[{key:"display",value:function display(type,content){var _this2=this;var duration=arguments.length<=2||void 0===arguments[2]?0:arguments[2];_loglevel2["default"].debug("Calling %cdisplay("+type+", "+content+", "+duration+").",(0,_utils.getConsoleStyle)("code"));return new Promise(function(resolve,reject){(_this2.shown?_this2.hide():(0,_utils.nothing)()).then(function(){_this2.content=content;_this2.contentType=type}).then(function(){return _this2.show()}).then(function(){return(0,_utils.delay)(duration)}).then(function(){return _this2.hide()}).then(function(){_this2.content=_this2.getTipForState();_this2.contentType="tip"}).then(resolve)["catch"](function(e){return _loglevel2["default"].error(e)})})}},{key:"getTipForState",value:function getTipForState(){if(this.bell.state===_bell2["default"].STATES.UNSUBSCRIBED)return this.bell.text["tip.state.unsubscribed"];else if(this.bell.state===_bell2["default"].STATES.SUBSCRIBED)return this.bell.text["tip.state.subscribed"];else if(this.bell.state===_bell2["default"].STATES.BLOCKED)return this.bell.text["tip.state.blocked"]}},{key:"enqueue",value:function enqueue(message){var _this3=this;var notify=arguments.length<=1||void 0===arguments[1]?false:arguments[1];this.queued.push(message);return new Promise(function(resolve){if(_this3.bell.badge.shown)_this3.bell.badge.hide().then(function(){return _this3.bell.badge.increment()}).then(function(){return _this3.bell.badge.show()}).then(resolve);else{_this3.bell.badge.increment();if(_this3.bell.initialized)_this3.bell.badge.show().then(resolve);else resolve()}})}},{key:"dequeue",value:function dequeue(message){var _this4=this;var dequeuedMessage=this.queued.pop(message);return new Promise(function(resolve){if(_this4.bell.badge.shown)_this4.bell.badge.hide().then(function(){return _this4.bell.badge.decrement()}).then(function(numMessagesLeft){if(numMessagesLeft>0)return _this4.bell.badge.show();else return Promise.resolve(_this4)}).then(resolve(dequeuedMessage));else{_this4.bell.badge.decrement();resolve(dequeuedMessage)}})}}],[{key:"TIMEOUT",get:function get(){return 2500}},{key:"TYPES",get:function get(){return{TIP:"tip",MESSAGE:"message",QUEUED:"queued"}}}]);return Message}(_AnimatedElement3["default"]);exports["default"]=Message},function(module,exports,__webpack_require__){(function(fetch){"use strict";function _interopRequireWildcard(obj){if(obj&&obj.__esModule)return obj;else{var newObj={};if(null!=obj)for(var key in obj)if(Object.prototype.hasOwnProperty.call(obj,key))newObj[key]=obj[key];newObj["default"]=obj;return newObj}}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return call&&("object"==typeof call||"function"==typeof call)?call:self}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass}Object.defineProperty(exports,"__esModule",{value:true});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();var _get=function get(object,property,receiver){if(null===object)object=Function.prototype;var desc=Object.getOwnPropertyDescriptor(object,property);if(void 0===desc){var parent=Object.getPrototypeOf(object);if(null===parent)return;else return get(parent,property,receiver)}else if("value"in desc)return desc.value;else{var getter=desc.get;if(void 0===getter)return;return getter.call(receiver)}};var _utils=__webpack_require__(2);var _loglevel=__webpack_require__(3);var _loglevel2=_interopRequireDefault(_loglevel);var _events=__webpack_require__(28);var _events2=_interopRequireDefault(_events);var _AnimatedElement2=__webpack_require__(30);var _AnimatedElement3=_interopRequireDefault(_AnimatedElement2);var _bowser=__webpack_require__(20);var Browser=_interopRequireWildcard(_bowser);var _bell=__webpack_require__(29);var _bell2=_interopRequireDefault(_bell);var _vars=__webpack_require__(1);var _limitStore=__webpack_require__(27);var _limitStore2=_interopRequireDefault(_limitStore);var Dialog=function(_AnimatedElement){function Dialog(bell){_classCallCheck(this,Dialog);var _this=_possibleConstructorReturn(this,Object.getPrototypeOf(Dialog).call(this,".onesignal-bell-launcher-dialog","onesignal-bell-launcher-dialog-opened",null,"hidden",["opacity","transform"],".onesignal-bell-launcher-dialog-body"));_this.bell=bell;_this.subscribeButtonId="#onesignal-bell-container .onesignal-bell-launcher #subscribe-button";_this.unsubscribeButtonId="#onesignal-bell-container .onesignal-bell-launcher #unsubscribe-button";_this.notificationIcons=null;window.addEventListener(_bell2["default"].EVENTS.STATE_CHANGED,function(state){state=state.detail;if(state.to===_bell2["default"].STATES.SUBSCRIBED)if(null===_this.notificationIcons)_this.getNotificationIcons().then(function(icons){_this.notificationIcons=icons})});window.addEventListener("click",function(event){if(event.target===document.querySelector(_this.subscribeButtonId))_events2["default"].trigger(_bell2["default"].EVENTS.SUBSCRIBE_CLICK);else if(event.target===document.querySelector(_this.unsubscribeButtonId))_events2["default"].trigger(_bell2["default"].EVENTS.UNSUBSCRIBE_CLICK)});return _this}_inherits(Dialog,_AnimatedElement);_createClass(Dialog,[{key:"getNotificationIcons",value:function getNotificationIcons(){if(!OneSignal._app_id)return Promise.resolve(null);var url=OneSignal._API_URL+"apps/"+OneSignal._app_id+"/icon";return new Promise(function(resolve,reject){fetch(url).then(function(response){return response.json()}).then(function(data){if(data.errors){_loglevel2["default"].error("API call %c"+url,(0,_utils.getConsoleStyle)("code"),"failed with:",data.errors);reject(null)}resolve(data)})["catch"](function(ex){_loglevel2["default"].error("Call %cgetNotificationIcons()",(0,_utils.getConsoleStyle)("code"),"failed with:",ex);reject(null)})})}},{key:"getPlatformNotificationIcon",value:function getPlatformNotificationIcon(){if(this.notificationIcons){if(Browser.chrome||Browser.firefox)return this.notificationIcons.chrome||this.notificationIcons.safari;else if(Browser.safari)return this.notificationIcons.safari||this.notificationIcons.chrome}else return null}},{key:"show",value:function show(){var _this2=this;return this.updateBellLauncherDialogBody().then(function(){return _get(Object.getPrototypeOf(Dialog.prototype),"show",_this2).call(_this2)})["catch"](function(e){return(0,_utils.logError)(e)})}},{key:"updateBellLauncherDialogBody",value:function updateBellLauncherDialogBody(){var _this3=this;return OneSignal._getSubscription().then(function(currentSetSubscription){(0,_utils.clearDomElementChildren)(document.querySelector(_this3.nestedContentSelector));var contents="Nothing to show.";var footer="";if(_this3.bell.options.showCredit)footer='<div class="divider"></div>\n                  <div class="kickback">Powered by <a href="https://onesignal.com" class="kickback" target="_blank">OneSignal</a></div>';if(_this3.bell.state===_bell2["default"].STATES.SUBSCRIBED&&true===currentSetSubscription||_this3.bell.state===_bell2["default"].STATES.UNSUBSCRIBED&&false===currentSetSubscription){var notificationIconHtml="";var imageUrl=_this3.getPlatformNotificationIcon();if(imageUrl)notificationIconHtml='<div class="push-notification-icon"><img src="'+imageUrl+'"></div>';else notificationIconHtml='<div class="push-notification-icon push-notification-icon-default"></div>';var buttonHtml="";if(_this3.bell.state!==_bell2["default"].STATES.SUBSCRIBED)buttonHtml='<button type="button" class="action" id="'+_this3.subscribeButtonSelectorId+'">'+_this3.bell.text["dialog.main.button.subscribe"]+"</button>";else buttonHtml='<button type="button" class="action" id="'+_this3.unsubscribeButtonSelectorId+'">'+_this3.bell.text["dialog.main.button.unsubscribe"]+"</button>";
contents="\n                  <h1>"+_this3.bell.text["dialog.main.title"]+'</h1>\n                  <div class="divider"></div>\n                  <div class="push-notification">\n                    '+notificationIconHtml+'\n                    <div class="push-notification-text-container">\n                      <div class="push-notification-text push-notification-text-short"></div>\n                      <div class="push-notification-text"></div>\n                      <div class="push-notification-text push-notification-text-medium"></div>\n                      <div class="push-notification-text"></div>\n                      <div class="push-notification-text push-notification-text-medium"></div>\n                    </div>\n                  </div>\n                  <div class="action-container">\n                    '+buttonHtml+"\n                  </div>\n                  "+footer+"\n                "}else if(_this3.bell.state===_bell2["default"].STATES.BLOCKED){var imageUrl=null;if(Browser.chrome){if(!Browser.mobile&&!Browser.tablet)imageUrl=_vars.HOST_URL+"/bell/chrome-unblock.jpg"}else if(Browser.firefox)imageUrl=_vars.HOST_URL+"/bell/firefox-unblock.jpg";else if(Browser.safari)imageUrl=_vars.HOST_URL+"/bell/safari-unblock.jpg";var instructionsHtml="";if(imageUrl)instructionsHtml='\n\n            <a href="'+imageUrl+'" target="_blank"><img src="'+imageUrl+'"></a></div>\n            ';if((Browser.mobile||Browser.tablet)&&Browser.chrome)instructionsHtml="\n            <ol>\n            <li>Access <strong>Settings</strong> by tapping the three menu dots <strong>⋮</strong></li>\n            <li>Click <strong>Site settings</strong> under Advanced.</li>\n            <li>Click <strong>Notifications</strong>.</li>\n            <li>Find and click this entry for this website.</li>\n            <li>Click <strong>Notifications</strong> and set it to <strong>Allow</strong>.</li>\n            </ol>\n          ";contents="\n                  <h1>"+_this3.bell.text["dialog.blocked.title"]+'</h1>\n                  <div class="divider"></div>\n                  <div class="instructions">\n                  <p>'+_this3.bell.text["dialog.blocked.message"]+"</p>\n                  "+instructionsHtml+"\n                  </div>\n                  "+footer+"\n                "}addDomElement(document.querySelector(_this3.nestedContentSelector),"beforeend",contents);_this3.bell.setCustomColorsIfSpecified()})}},{key:"subscribeButtonSelectorId",get:function get(){return"subscribe-button"}},{key:"unsubscribeButtonSelectorId",get:function get(){return"unsubscribe-button"}},{key:"subscribeButton",get:function get(){return this.element.querySelector("#"+this.subscribeButtonSelectorId)}},{key:"unsubscribeButton",get:function get(){return this.element.querySelector("#"+this.unsubscribeButtonSelectorId)}}]);return Dialog}(_AnimatedElement3["default"]);exports["default"]=Dialog}).call(exports,__webpack_require__(24))},function(module,exports,__webpack_require__){var content=__webpack_require__(39);if("string"==typeof content)content=[[module.id,content,""]];var update=__webpack_require__(41)(content,{});if(content.locals)module.exports=content.locals;if(false){if(!content.locals)module.hot.accept("!!./../../node_modules/css-loader/index.js!./../../node_modules/autoprefixer-loader/index.js!./../../node_modules/sass-loader/index.js!./bell.scss",function(){var newContent=require("!!./../../node_modules/css-loader/index.js!./../../node_modules/autoprefixer-loader/index.js!./../../node_modules/sass-loader/index.js!./bell.scss");if("string"==typeof newContent)newContent=[[module.id,newContent,""]];update(newContent)});module.hot.dispose(function(){update()})}},function(module,exports,__webpack_require__){exports=module.exports=__webpack_require__(40)();exports.push([module.id,'/*!\n* CleanSlate\n*   github.com/premasagar/cleanslate\n*\n*/.onesignal-reset,.onesignal-reset a,.onesignal-reset abbr,.onesignal-reset acronym,.onesignal-reset address,.onesignal-reset applet,.onesignal-reset area,.onesignal-reset article,.onesignal-reset aside,.onesignal-reset audio,.onesignal-reset b,.onesignal-reset big,.onesignal-reset blockquote,.onesignal-reset button,.onesignal-reset canvas,.onesignal-reset caption,.onesignal-reset cite,.onesignal-reset code,.onesignal-reset col,.onesignal-reset colgroup,.onesignal-reset datalist,.onesignal-reset dd,.onesignal-reset del,.onesignal-reset dfn,.onesignal-reset div,.onesignal-reset dl,.onesignal-reset dt,.onesignal-reset em,.onesignal-reset fieldset,.onesignal-reset figcaption,.onesignal-reset figure,.onesignal-reset footer,.onesignal-reset form,.onesignal-reset h1,.onesignal-reset h2,.onesignal-reset h3,.onesignal-reset h4,.onesignal-reset h5,.onesignal-reset h6,.onesignal-reset header,.onesignal-reset hr,.onesignal-reset i,.onesignal-reset iframe,.onesignal-reset img,.onesignal-reset input,.onesignal-reset ins,.onesignal-reset kbd,.onesignal-reset label,.onesignal-reset legend,.onesignal-reset li,.onesignal-reset main,.onesignal-reset map,.onesignal-reset mark,.onesignal-reset menu,.onesignal-reset meta,.onesignal-reset nav,.onesignal-reset object,.onesignal-reset ol,.onesignal-reset optgroup,.onesignal-reset option,.onesignal-reset output,.onesignal-reset p,.onesignal-reset pre,.onesignal-reset progress,.onesignal-reset q,.onesignal-reset samp,.onesignal-reset section,.onesignal-reset select,.onesignal-reset small,.onesignal-reset span,.onesignal-reset strike,.onesignal-reset strong,.onesignal-reset sub,.onesignal-reset summary,.onesignal-reset sup,.onesignal-reset table,.onesignal-reset tbody,.onesignal-reset td,.onesignal-reset textarea,.onesignal-reset tfoot,.onesignal-reset th,.onesignal-reset thead,.onesignal-reset time,.onesignal-reset tr,.onesignal-reset tt,.onesignal-reset ul,.onesignal-reset var,.onesignal-reset video{background-attachment:scroll;background-color:transparent;background-image:none;background-position:0 0;background-repeat:repeat;border-color:#000;border:medium none currentColor;bottom:auto;clear:none;clip:auto;color:inherit;counter-increment:none;counter-reset:none;cursor:auto;direction:inherit;display:inline;float:none;font-family:inherit;font-size:inherit;font-style:inherit;font-variant:normal;font-weight:inherit;height:auto;left:auto;letter-spacing:normal;line-height:inherit;list-style-type:inherit;list-style-position:outside;list-style-image:none;margin:0;max-height:none;max-width:none;min-height:0;min-width:0;opacity:1;outline:medium none invert;overflow:visible;padding:0;position:static;quotes:"" "";right:auto;table-layout:auto;text-align:inherit;text-decoration:inherit;text-indent:0;text-transform:none;top:auto;unicode-bidi:normal;vertical-align:baseline;visibility:inherit;white-space:normal;width:auto;word-spacing:normal;z-index:auto;background-origin:padding-box;background-clip:border-box;background-size:auto;-o-border-image:none;border-image:none;border-radius:0;box-shadow:none;box-sizing:content-box;-webkit-column-count:auto;-moz-column-count:auto;column-count:auto;-webkit-column-gap:normal;-moz-column-gap:normal;column-gap:normal;-webkit-column-rule:medium none #000;-moz-column-rule:medium none #000;column-rule:medium none #000;-webkit-column-span:1;-moz-column-span:1;column-span:1;-webkit-column-width:auto;-moz-column-width:auto;column-width:auto;-webkit-font-feature-settings:normal;font-feature-settings:normal;overflow-x:visible;overflow-y:visible;-webkit-hyphens:manual;-moz-hyphens:manual;-ms-hyphens:manual;hyphens:manual;-webkit-perspective:none;-ms-perspective:none;-o-perspective:none;perspective:none;-webkit-perspective-origin:50% 50%;-ms-perspective-origin:50% 50%;-o-perspective-origin:50% 50%;perspective-origin:50% 50%;-webkit-backface-visibility:visible;backface-visibility:visible;text-shadow:none;-webkit-transition:all 0s ease 0s;transition:all 0s ease 0s;-webkit-transform:none;transform:none;-webkit-transform-origin:50% 50%;transform-origin:50% 50%;-webkit-transform-style:flat;transform-style:flat;word-break:normal}.onesignal-reset,.onesignal-reset address,.onesignal-reset article,.onesignal-reset audio,.onesignal-reset blockquote,.onesignal-reset caption,.onesignal-reset colgroup,.onesignal-reset dd,.onesignal-reset dialog,.onesignal-reset div,.onesignal-reset dl,.onesignal-reset dt,.onesignal-reset fieldset,.onesignal-reset figure,.onesignal-reset footer,.onesignal-reset form,.onesignal-reset h1,.onesignal-reset h2,.onesignal-reset h3,.onesignal-reset h4,.onesignal-reset h5,.onesignal-reset h6,.onesignal-reset header,.onesignal-reset hgroup,.onesignal-reset hr,.onesignal-reset main,.onesignal-reset menu,.onesignal-reset nav,.onesignal-reset ol,.onesignal-reset option,.onesignal-reset p,.onesignal-reset pre,.onesignal-reset progress,.onesignal-reset section,.onesignal-reset summary,.onesignal-reset ul,.onesignal-reset video{display:block}.onesignal-reset h1,.onesignal-reset h2,.onesignal-reset h3,.onesignal-reset h4,.onesignal-reset h5,.onesignal-reset h6{font-weight:700}.onesignal-reset h1{font-size:2em;padding:.67em 0}.onesignal-reset h2{font-size:1.5em;padding:.83em 0}.onesignal-reset h3{font-size:1.17em;padding:.83em 0}.onesignal-reset h4{font-size:1em}.onesignal-reset h5{font-size:.83em}.onesignal-reset p{margin:1em 0}.onesignal-reset table{display:table}.onesignal-reset thead{display:table-header-group}.onesignal-reset tbody{display:table-row-group}.onesignal-reset tfoot{display:table-footer-group}.onesignal-reset tr{display:table-row}.onesignal-reset td,.onesignal-reset th{display:table-cell;padding:2px}.onesignal-reset ol,.onesignal-reset ul{margin:1em 0}.onesignal-reset ol li,.onesignal-reset ol ol li,.onesignal-reset ol ol ol li,.onesignal-reset ol ol ul li,.onesignal-reset ol ul ul li,.onesignal-reset ul li,.onesignal-reset ul ol ol li,.onesignal-reset ul ul li,.onesignal-reset ul ul ol li,.onesignal-reset ul ul ul li{list-style-position:inside;margin-top:.08em}.onesignal-reset ol ol,.onesignal-reset ol ol ol,.onesignal-reset ol ol ul,.onesignal-reset ol ul,.onesignal-reset ol ul ul,.onesignal-reset ul ol,.onesignal-reset ul ol ol,.onesignal-reset ul ul,.onesignal-reset ul ul ol,.onesignal-reset ul ul ul{padding-left:40px;margin:0}.onesignal-reset nav ol,.onesignal-reset nav ul{list-style-type:none}.onesignal-reset menu,.onesignal-reset ul{list-style-type:disc}.onesignal-reset ol{list-style-type:decimal}.onesignal-reset menu menu,.onesignal-reset menu ul,.onesignal-reset ol menu,.onesignal-reset ol ul,.onesignal-reset ul menu,.onesignal-reset ul ul{list-style-type:circle}.onesignal-reset menu menu menu,.onesignal-reset menu menu ul,.onesignal-reset menu ol menu,.onesignal-reset menu ol ul,.onesignal-reset menu ul menu,.onesignal-reset menu ul ul,.onesignal-reset ol menu menu,.onesignal-reset ol menu ul,.onesignal-reset ol ol menu,.onesignal-reset ol ol ul,.onesignal-reset ol ul menu,.onesignal-reset ol ul ul,.onesignal-reset ul menu menu,.onesignal-reset ul menu ul,.onesignal-reset ul ol menu,.onesignal-reset ul ol ul,.onesignal-reset ul ul menu,.onesignal-reset ul ul ul{list-style-type:square}.onesignal-reset li{display:list-item;min-height:auto;min-width:auto;padding-left:20px}.onesignal-reset strong{font-weight:700}.onesignal-reset em{font-style:italic}.onesignal-reset code,.onesignal-reset kbd,.onesignal-reset pre,.onesignal-reset samp{font-family:monospace}.onesignal-reset a{color:blue;text-decoration:underline}.onesignal-reset a:visited{color:#529}.onesignal-reset a,.onesignal-reset a *,.onesignal-reset input[type=checkbox],.onesignal-reset input[type=radio],.onesignal-reset input[type=submit],.onesignal-reset select{cursor:pointer}.onesignal-reset button,.onesignal-reset input[type=submit]{text-align:center;padding:2px 6px 3px;border-radius:4px;text-decoration:none;font-family:arial,helvetica,sans-serif;font-size:small;-webkit-appearance:push-button;color:buttontext;border:1px solid #a6a6a6;background:#d3d3d3;background:#fff;background:-webkit-gradient(linear,left top,left bottom,color-stop(0,#fff),color-stop(100%,#ddd),color-stop(100%,#d1d1d1),color-stop(100%,#ddd));background:-webkit-linear-gradient(top,#fff,#ddd 100%,#d1d1d1 0,#ddd 0);background:linear-gradient(180deg,#fff 0,#ddd 100%,#d1d1d1 0,#ddd 0);filter:progid:DXImageTransform.Microsoft.gradient(startColorstr=\'#ffffff\',endColorstr=\'#dddddd\',GradientType=0);-o-box-shadow:1px 1px 0 #eee;box-shadow:1px 1px 0 #eee;outline:initial}.onesignal-reset button{padding:1px 6px 2px;margin-right:5px}.onesignal-reset input[type=hidden]{display:none}.onesignal-reset textarea{-webkit-appearance:textarea;background:#fff;padding:2px;margin-left:4px;word-wrap:break-word;white-space:pre-wrap;font-size:11px;font-family:arial,helvetica,sans-serif;line-height:13px;resize:both}.onesignal-reset input,.onesignal-reset select,.onesignal-reset textarea{border:1px solid #ccc}.onesignal-reset select{font-size:11px;font-family:helvetica,arial,sans-serif;display:inline-block}.onesignal-reset input:focus,.onesignal-reset textarea:focus{outline:5px auto -webkit-focus-ring-color;outline:initial}.onesignal-reset input[type=text]{background:#fff;padding:1px;font-family:initial;font-size:small}.onesignal-reset input[type=checkbox],.onesignal-reset input[type=radio]{border:1px solid #2b2b2b;border-radius:4px;outline:intial}.onesignal-reset input[type=radio]{margin:2px 2px 3px}.onesignal-reset button:active,.onesignal-reset input[type=submit]:active{background:#3b679e;background:-webkit-gradient(linear,left top,left bottom,color-stop(0,#3b679e),color-stop(50%,#2b88d9),color-stop(51%,#207cca),color-stop(100%,#7db9e8));background:-webkit-linear-gradient(top,#3b679e,#2b88d9 50%,#207cca 51%,#7db9e8);background:linear-gradient(180deg,#3b679e 0,#2b88d9 50%,#207cca 51%,#7db9e8);border-color:#5259b0}.onesignal-reset abbr[title],.onesignal-reset acronym[title],.onesignal-reset dfn[title]{cursor:help;border-bottom-width:1px;border-bottom-style:dotted}.onesignal-reset ins{background-color:#ff9;color:#000}.onesignal-reset del{text-decoration:line-through}.onesignal-reset blockquote,.onesignal-reset q{quotes:none}.onesignal-reset blockquote:after,.onesignal-reset blockquote:before,.onesignal-reset li:after,.onesignal-reset li:before,.onesignal-reset q:after,.onesignal-reset q:before{content:""}.onesignal-reset input,.onesignal-reset select{vertical-align:middle}.onesignal-reset table{border-collapse:collapse;border-spacing:0}.onesignal-reset hr{display:block;height:1px;border:0;border-top:1px solid #ccc;margin:1em 0}.onesignal-reset [dir=rtl]{direction:rtl}.onesignal-reset mark{background-color:#ff9;color:#000;font-style:italic;font-weight:700}.onesignal-reset menu{padding-left:40px;padding-top:8px}.onesignal-reset [hidden],.onesignal-reset template{display:none}.onesignal-reset abbr[title]{border-bottom:1px dotted}.onesignal-reset sub,.onesignal-reset sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}.onesignal-reset sup{top:-.5em}.onesignal-reset sub{bottom:-.25em}.onesignal-reset img{border:0}.onesignal-reset figure{margin:0}.onesignal-reset textarea{overflow:auto;vertical-align:top}.onesignal-reset{font-size:medium;line-height:1;direction:ltr;text-align:left;text-align:start;font-family:Times New Roman,Times,serif;color:#000;font-style:normal;font-weight:400;text-decoration:none;list-style-type:disc}.onesignal-reset pre{white-space:pre}#onesignal-bell-container.onesignal-reset{z-index:2147483000;position:fixed}#onesignal-bell-container.onesignal-reset.onesignal-bell-container-bottom-left{bottom:0;left:0}#onesignal-bell-container.onesignal-reset.onesignal-bell-container-bottom-right{bottom:0;right:0}#onesignal-bell-container.onesignal-reset .onesignal-bell-launcher{-webkit-touch-callout:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;position:absolute;z-index:2147483000;font-family:Helvetica Neue,Helvetica,Arial,sans-serif;-webkit-transform:scale(.01) translateZ(0);transform:scale(.01) translateZ(0);opacity:0;-webkit-transition:opacity 175ms ease-in-out,-webkit-transform 175ms ease-in-out;transition:opacity 175ms ease-in-out,-webkit-transform 175ms ease-in-out;transition:transform 175ms ease-in-out,opacity 175ms ease-in-out;transition:transform 175ms ease-in-out,opacity 175ms ease-in-out,-webkit-transform 175ms ease-in-out}#onesignal-bell-container.onesignal-reset .onesignal-bell-launcher.onesignal-bell-launcher-bottom-left{bottom:20px;left:20px}#onesignal-bell-container.onesignal-reset .onesignal-bell-launcher.onesignal-bell-launcher-bottom-left.onesignal-bell-launcher-sm{-webkit-transform-origin:center center;transform-origin:center center;width:32px}#onesignal-bell-container.onesignal-reset .onesignal-bell-launcher.onesignal-bell-launcher-bottom-left.onesignal-bell-launcher-sm .onesignal-bell-launcher-message{left:42px}#onesignal-bell-container.onesignal-reset .onesignal-bell-launcher.onesignal-bell-launcher-bottom-left.onesignal-bell-launcher-sm .onesignal-bell-launcher-dialog{bottom:39px;left:0;-webkit-transform-origin:left bottom;transform-origin:left bottom}#onesignal-bell-container.onesignal-reset .onesignal-bell-launcher.onesignal-bell-launcher-bottom-left.onesignal-bell-launcher-sm .onesignal-bell-launcher-dialog:before{left:5px}#onesignal-bell-container.onesignal-reset .onesignal-bell-launcher.onesignal-bell-launcher-bottom-left.onesignal-bell-launcher-sm .onesignal-bell-launcher-dialog:after{left:7px}#onesignal-bell-container.onesignal-reset .onesignal-bell-launcher.onesignal-bell-launcher-bottom-left.onesignal-bell-launcher-md{-webkit-transform-origin:center center;transform-origin:center center;width:48px}#onesignal-bell-container.onesignal-reset .onesignal-bell-launcher.onesignal-bell-launcher-bottom-left.onesignal-bell-launcher-md .onesignal-bell-launcher-message{left:61px}#onesignal-bell-container.onesignal-reset .onesignal-bell-launcher.onesignal-bell-launcher-bottom-left.onesignal-bell-launcher-md .onesignal-bell-launcher-dialog{bottom:58px;left:0;-webkit-transform-origin:left bottom;transform-origin:left bottom}#onesignal-bell-container.onesignal-reset .onesignal-bell-launcher.onesignal-bell-launcher-bottom-left.onesignal-bell-launcher-md .onesignal-bell-launcher-dialog:before{left:12px}#onesignal-bell-container.onesignal-reset .onesignal-bell-launcher.onesignal-bell-launcher-bottom-left.onesignal-bell-launcher-md .onesignal-bell-launcher-dialog:after{left:14px}#onesignal-bell-container.onesignal-reset .onesignal-bell-launcher.onesignal-bell-launcher-bottom-left.onesignal-bell-launcher-lg{-webkit-transform-origin:center center;transform-origin:center center;width:64px}#onesignal-bell-container.onesignal-reset .onesignal-bell-launcher.onesignal-bell-launcher-bottom-left.onesignal-bell-launcher-lg .onesignal-bell-launcher-message{left:81px}#onesignal-bell-container.onesignal-reset .onesignal-bell-launcher.onesignal-bell-launcher-bottom-left.onesignal-bell-launcher-lg .onesignal-bell-launcher-dialog{bottom:78px;left:0;-webkit-transform-origin:left bottom;transform-origin:left bottom}#onesignal-bell-container.onesignal-reset .onesignal-bell-launcher.onesignal-bell-launcher-bottom-left.onesignal-bell-launcher-lg .onesignal-bell-launcher-dialog:before{left:18px}#onesignal-bell-container.onesignal-reset .onesignal-bell-launcher.onesignal-bell-launcher-bottom-left.onesignal-bell-launcher-lg .onesignal-bell-launcher-dialog:after{left:20px}#onesignal-bell-container.onesignal-reset .onesignal-bell-launcher.onesignal-bell-launcher-bottom-left .onesignal-bell-launcher-badge{left:4px}#onesignal-bell-container.onesignal-reset .onesignal-bell-launcher.onesignal-bell-launcher-bottom-left .onesignal-bell-launcher-message{-webkit-transform-origin:left center;transform-origin:left center}#onesignal-bell-container.onesignal-reset .onesignal-bell-launcher.onesignal-bell-launcher-bottom-left .onesignal-bell-launcher-message:after{right:100%;border-right-color:#000}#onesignal-bell-container.onesignal-reset .onesignal-bell-launcher.onesignal-bell-launcher-bottom-left .onesignal-bell-launcher-button{left:0}#onesignal-bell-container.onesignal-reset .onesignal-bell-launcher.onesignal-bell-launcher-bottom-right{bottom:20px;right:20px}#onesignal-bell-container.onesignal-reset .onesignal-bell-launcher.onesignal-bell-launcher-bottom-right.onesignal-bell-launcher-sm{-webkit-transform-origin:center center;transform-origin:center center;width:32px}#onesignal-bell-container.onesignal-reset .onesignal-bell-launcher.onesignal-bell-launcher-bottom-right.onesignal-bell-launcher-sm .onesignal-bell-launcher-message{right:42px}#onesignal-bell-container.onesignal-reset .onesignal-bell-launcher.onesignal-bell-launcher-bottom-right.onesignal-bell-launcher-sm .onesignal-bell-launcher-dialog{bottom:39px;right:0;-webkit-transform-origin:right bottom;transform-origin:right bottom}#onesignal-bell-container.onesignal-reset .onesignal-bell-launcher.onesignal-bell-launcher-bottom-right.onesignal-bell-launcher-sm .onesignal-bell-launcher-dialog:before{right:5px}#onesignal-bell-container.onesignal-reset .onesignal-bell-launcher.onesignal-bell-launcher-bottom-right.onesignal-bell-launcher-sm .onesignal-bell-launcher-dialog:after{right:7px}#onesignal-bell-container.onesignal-reset .onesignal-bell-launcher.onesignal-bell-launcher-bottom-right.onesignal-bell-launcher-md{-webkit-transform-origin:center center;transform-origin:center center;width:48px}#onesignal-bell-container.onesignal-reset .onesignal-bell-launcher.onesignal-bell-launcher-bottom-right.onesignal-bell-launcher-md .onesignal-bell-launcher-message{right:61px}#onesignal-bell-container.onesignal-reset .onesignal-bell-launcher.onesignal-bell-launcher-bottom-right.onesignal-bell-launcher-md .onesignal-bell-launcher-dialog{bottom:58px;right:0;-webkit-transform-origin:right bottom;transform-origin:right bottom}#onesignal-bell-container.onesignal-reset .onesignal-bell-launcher.onesignal-bell-launcher-bottom-right.onesignal-bell-launcher-md .onesignal-bell-launcher-dialog:before{right:12px}#onesignal-bell-container.onesignal-reset .onesignal-bell-launcher.onesignal-bell-launcher-bottom-right.onesignal-bell-launcher-md .onesignal-bell-launcher-dialog:after{right:14px}#onesignal-bell-container.onesignal-reset .onesignal-bell-launcher.onesignal-bell-launcher-bottom-right.onesignal-bell-launcher-lg{-webkit-transform-origin:center center;transform-origin:center center;width:64px}#onesignal-bell-container.onesignal-reset .onesignal-bell-launcher.onesignal-bell-launcher-bottom-right.onesignal-bell-launcher-lg .onesignal-bell-launcher-message{right:81px}#onesignal-bell-container.onesignal-reset .onesignal-bell-launcher.onesignal-bell-launcher-bottom-right.onesignal-bell-launcher-lg .onesignal-bell-launcher-dialog{bottom:78px;right:0;-webkit-transform-origin:right bottom;transform-origin:right bottom}#onesignal-bell-container.onesignal-reset .onesignal-bell-launcher.onesignal-bell-launcher-bottom-right.onesignal-bell-launcher-lg .onesignal-bell-launcher-dialog:before{right:18px}#onesignal-bell-container.onesignal-reset .onesignal-bell-launcher.onesignal-bell-launcher-bottom-right.onesignal-bell-launcher-lg .onesignal-bell-launcher-dialog:after{right:20px}#onesignal-bell-container.onesignal-reset .onesignal-bell-launcher.onesignal-bell-launcher-bottom-right .onesignal-bell-launcher-badge{right:4px}#onesignal-bell-container.onesignal-reset .onesignal-bell-launcher.onesignal-bell-launcher-bottom-right .onesignal-bell-launcher-message{-webkit-transform-origin:right center;transform-origin:right center}#onesignal-bell-container.onesignal-reset .onesignal-bell-launcher.onesignal-bell-launcher-bottom-right .onesignal-bell-launcher-message:after{left:100%;border-left-color:#000}#onesignal-bell-container.onesignal-reset .onesignal-bell-launcher.onesignal-bell-launcher-bottom-right .onesignal-bell-launcher-button{right:0}#onesignal-bell-container.onesignal-reset .onesignal-bell-launcher .onesignal-bell-launcher-button{position:absolute;bottom:0;border-radius:50%;-webkit-transition:border 175ms ease-in-out,width 175ms ease-in-out,height 175ms ease-in-out,-webkit-transform 175ms ease-in-out;transition:border 175ms ease-in-out,width 175ms ease-in-out,height 175ms ease-in-out,-webkit-transform 175ms ease-in-out;transition:transform 175ms ease-in-out,border 175ms ease-in-out,width 175ms ease-in-out,height 175ms ease-in-out;transition:transform 175ms ease-in-out,border 175ms ease-in-out,width 175ms ease-in-out,height 175ms ease-in-out,-webkit-transform 175ms ease-in-out;cursor:pointer;z-index:2147483000}#onesignal-bell-container.onesignal-reset .onesignal-bell-launcher .onesignal-bell-launcher-button svg{width:100%;height:100%;-webkit-filter:drop-shadow(0 2px 4px rgba(34,36,38,.35));filter:drop-shadow(0 2px 4px rgba(34,36,38,.35))}#onesignal-bell-container.onesignal-reset .onesignal-bell-launcher .onesignal-bell-launcher-button.onesignal-bell-launcher-button-hover{cursor:pointer}#onesignal-bell-container.onesignal-reset .onesignal-bell-launcher .onesignal-bell-launcher-badge{position:absolute;bottom:0;border-radius:50%;text-align:center;top:0;cursor:pointer;-webkit-filter:drop-shadow(0 2px 4px rgba(34,36,38,0));filter:drop-shadow(0 2px 4px rgba(34,36,38,0));-webkit-transition:border 175ms ease-in-out,opacity .21s ease-in-out,width .21s ease-in-out,height .21s ease-in-out,position .21s ease-in-out,right .21s ease-in-out,top .21s ease-in-out,bottom .21s ease-in-out,left .21s ease-in-out,-webkit-transform 175ms ease-in-out;transition:border 175ms ease-in-out,opacity .21s ease-in-out,width .21s ease-in-out,height .21s ease-in-out,position .21s ease-in-out,right .21s ease-in-out,top .21s ease-in-out,bottom .21s ease-in-out,left .21s ease-in-out,-webkit-transform 175ms ease-in-out;transition:transform 175ms ease-in-out,border 175ms ease-in-out,opacity .21s ease-in-out,width .21s ease-in-out,height .21s ease-in-out,position .21s ease-in-out,right .21s ease-in-out,top .21s ease-in-out,bottom .21s ease-in-out,left .21s ease-in-out;transition:transform 175ms ease-in-out,border 175ms ease-in-out,opacity .21s ease-in-out,width .21s ease-in-out,height .21s ease-in-out,position .21s ease-in-out,right .21s ease-in-out,top .21s ease-in-out,bottom .21s ease-in-out,left .21s ease-in-out,-webkit-transform 175ms ease-in-out;z-index:2147483400;opacity:0;-webkit-transform:scale(.01);transform:scale(.01);pointer-events:none}#onesignal-bell-container.onesignal-reset .onesignal-bell-launcher .onesignal-bell-launcher-badge.onesignal-bell-launcher-badge-hover{cursor:pointer}#onesignal-bell-container.onesignal-reset .onesignal-bell-launcher .onesignal-bell-launcher-badge.onesignal-bell-launcher-badge-opened{opacity:1;-webkit-transform:scale(1);transform:scale(1)}#onesignal-bell-container.onesignal-reset .onesignal-bell-launcher .onesignal-bell-launcher-message{position:absolute;color:#fff;background:#000;cursor:pointer;border-radius:5px;-webkit-transform:translateY(-50%) scaleX(0) translateZ(0);transform:translateY(-50%) scaleX(0) translateZ(0);opacity:0;pointer-events:none;-webkit-transition:opacity 175ms ease-in-out,-webkit-transform 175ms ease-in-out;transition:opacity 175ms ease-in-out,-webkit-transform 175ms ease-in-out;transition:transform 175ms ease-in-out,opacity 175ms ease-in-out;transition:transform 175ms ease-in-out,opacity 175ms ease-in-out,-webkit-transform 175ms ease-in-out;top:50%;z-index:2147481000}#onesignal-bell-container.onesignal-reset .onesignal-bell-launcher .onesignal-bell-launcher-message:after{top:50%;border:solid transparent;content:" ";height:0;width:0;position:absolute;pointer-events:none;border-color:transparent}#onesignal-bell-container.onesignal-reset .onesignal-bell-launcher .onesignal-bell-launcher-message .onesignal-bell-launcher-message-body{z-index:2147482000;max-width:100%;white-space:nowrap;text-overflow:ellipsis}#onesignal-bell-container.onesignal-reset .onesignal-bell-launcher .onesignal-bell-launcher-message.onesignal-bell-launcher-message-opened{pointer-events:auto;opacity:1;-webkit-transform:translateY(-50%) scaleX(1) translateZ(0);transform:translateY(-50%) scaleX(1) translateZ(0)}#onesignal-bell-container.onesignal-reset .onesignal-bell-launcher .onesignal-bell-launcher-dialog{cursor:pointer;position:absolute;background-color:#fff;border-radius:5px;border:1px solid rgba(0,0,0,.1);-webkit-filter:drop-shadow(0 2px 2px rgba(34,36,38,.15));filter:drop-shadow(0 2px 2px rgba(34,36,38,.15));opacity:0;width:200px;-webkit-transform:scale(0) translateZ(0);transform:scale(0) translateZ(0);-webkit-transition:opacity 175ms ease-in-out,-webkit-transform 175ms ease-in-out;transition:opacity 175ms ease-in-out,-webkit-transform 175ms ease-in-out;transition:transform 175ms ease-in-out,opacity 175ms ease-in-out;transition:transform 175ms ease-in-out,opacity 175ms ease-in-out,-webkit-transform 175ms ease-in-out;z-index:2147481000}#onesignal-bell-container.onesignal-reset .onesignal-bell-launcher .onesignal-bell-launcher-dialog ol{counter-reset:foo;display:table;border-spacing:.3em .75em}#onesignal-bell-container.onesignal-reset .onesignal-bell-launcher .onesignal-bell-launcher-dialog ol>li{counter-increment:foo;display:table-row;margin-bottom:.75em}#onesignal-bell-container.onesignal-reset .onesignal-bell-launcher .onesignal-bell-launcher-dialog ol>li:before{content:counter(foo) ".";display:table-cell;text-align:right}#onesignal-bell-container.onesignal-reset .onesignal-bell-launcher .onesignal-bell-launcher-dialog:after,#onesignal-bell-container.onesignal-reset .onesignal-bell-launcher .onesignal-bell-launcher-dialog:before{top:100%;border:solid transparent;content:" ";height:0;width:0;position:absolute}#onesignal-bell-container.onesignal-reset .onesignal-bell-launcher .onesignal-bell-launcher-dialog .onesignal-bell-launcher-dialog-body{z-index:2147482000;max-width:100%;white-space:nowrap;text-overflow:ellipsis;font-family:Helvetica Neue,Helvetica,Arial,sans-serif}#onesignal-bell-container.onesignal-reset .onesignal-bell-launcher .onesignal-bell-launcher-dialog.onesignal-bell-launcher-dialog-opened{-webkit-transform:scale(1) translateZ(0);transform:scale(1) translateZ(0);opacity:1}#onesignal-bell-container.onesignal-reset .onesignal-bell-launcher .onesignal-bell-launcher-dialog a{box-sizing:border-box;text-decoration:none;color:initial}#onesignal-bell-container.onesignal-reset .onesignal-bell-launcher .onesignal-bell-launcher-dialog a:active,#onesignal-bell-container.onesignal-reset .onesignal-bell-launcher .onesignal-bell-launcher-dialog a:focus,#onesignal-bell-container.onesignal-reset .onesignal-bell-launcher .onesignal-bell-launcher-dialog a:hover,#onesignal-bell-container.onesignal-reset .onesignal-bell-launcher .onesignal-bell-launcher-dialog a:hover:active,#onesignal-bell-container.onesignal-reset .onesignal-bell-launcher .onesignal-bell-launcher-dialog a:visited{text-decoration:none;color:initial}#onesignal-bell-container.onesignal-reset .onesignal-bell-launcher .onesignal-bell-launcher-dialog button{box-sizing:border-box;border:1px solid transparent;padding:.625em 1em;box-shadow:none;border-radius:4px;font-weight:400;font-family:Helvetica Neue,Helvetica,Arial,sans-serif;font-size:12px;letter-spacing:.65px;cursor:pointer}#onesignal-bell-container.onesignal-reset .onesignal-bell-launcher .onesignal-bell-launcher-dialog button.action{color:#fff;background:#e54b4d;width:100%}#onesignal-bell-container.onesignal-reset .onesignal-bell-launcher .onesignal-bell-launcher-dialog button.action:hover{background:#dd2022}#onesignal-bell-container.onesignal-reset .onesignal-bell-launcher .onesignal-bell-launcher-dialog button.action:active{background:#b1191b}#onesignal-bell-container.onesignal-reset .onesignal-bell-launcher.onesignal-bell-launcher-sm{height:32px}#onesignal-bell-container.onesignal-reset .onesignal-bell-launcher.onesignal-bell-launcher-sm .onesignal-bell-launcher-button{width:32px;height:32px}#onesignal-bell-container.onesignal-reset .onesignal-bell-launcher.onesignal-bell-launcher-sm .onesignal-bell-launcher-badge{font-size:8px;width:12px;height:12px;line-height:12px}#onesignal-bell-container.onesignal-reset .onesignal-bell-launcher.onesignal-bell-launcher-sm .onesignal-bell-launcher-message{padding:9.6px}#onesignal-bell-container.onesignal-reset .onesignal-bell-launcher.onesignal-bell-launcher-sm .onesignal-bell-launcher-message:after{border-width:6.6px;margin-top:-6.6px}#onesignal-bell-container.onesignal-reset .onesignal-bell-launcher.onesignal-bell-launcher-sm .onesignal-bell-launcher-message .onesignal-bell-launcher-message-body{font-size:14px}#onesignal-bell-container.onesignal-reset .onesignal-bell-launcher.onesignal-bell-launcher-sm .onesignal-bell-launcher-dialog{padding:.3em .8em .6em;color:#333}#onesignal-bell-container.onesignal-reset .onesignal-bell-launcher.onesignal-bell-launcher-sm .onesignal-bell-launcher-dialog:after{border-top-color:#fff;border-width:6.6px}#onesignal-bell-container.onesignal-reset .onesignal-bell-launcher.onesignal-bell-launcher-sm .onesignal-bell-launcher-dialog:before{border-top-color:hsla(0,0%,71%,.1);border-width:8.6px}#onesignal-bell-container.onesignal-reset .onesignal-bell-launcher.onesignal-bell-launcher-sm .onesignal-bell-launcher-dialog .onesignal-bell-launcher-dialog-body{font-size:14px;font-family:Helvetica Neue,Helvetica,Arial,sans-serif}#onesignal-bell-container.onesignal-reset .onesignal-bell-launcher.onesignal-bell-launcher-sm .onesignal-bell-launcher-dialog .onesignal-bell-launcher-dialog-body h1{font-size:15px;line-height:1.2em;font-weight:500;font-family:Helvetica Neue,Helvetica,Arial,sans-serif;letter-spacing:.2px;text-align:center;color:#41090a}#onesignal-bell-container.onesignal-reset .onesignal-bell-launcher.onesignal-bell-launcher-sm .onesignal-bell-launcher-dialog .onesignal-bell-launcher-dialog-body p{font-size:14px;font-weight:400;font-family:Helvetica Neue,Helvetica,Arial,sans-serif}#onesignal-bell-container.onesignal-reset .onesignal-bell-launcher.onesignal-bell-launcher-sm .onesignal-bell-launcher-dialog .onesignal-bell-launcher-dialog-body .divider{border-bottom:1px solid rgba(0,0,0,.1);margin:.25em -.93em}#onesignal-bell-container.onesignal-reset .onesignal-bell-launcher.onesignal-bell-launcher-sm .onesignal-bell-launcher-dialog .onesignal-bell-launcher-dialog-body .kickback{text-align:center;font-family:Helvetica Neue,Helvetica,Arial,sans-serif;font-weight:300;font-size:9.8px;letter-spacing:.5px}#onesignal-bell-container.onesignal-reset .onesignal-bell-launcher.onesignal-bell-launcher-sm .onesignal-bell-launcher-dialog .onesignal-bell-launcher-dialog-body .instructions{max-width:95vw;max-height:70vh;font-family:Helvetica Neue,Helvetica,Arial,sans-serif;font-weight:400;font-size:14px}#onesignal-bell-container.onesignal-reset .onesignal-bell-launcher.onesignal-bell-launcher-sm .onesignal-bell-launcher-dialog .onesignal-bell-launcher-dialog-body .instructions img{width:100%}#onesignal-bell-container.onesignal-reset .onesignal-bell-launcher.onesignal-bell-launcher-sm .onesignal-bell-launcher-dialog .onesignal-bell-launcher-dialog-body .push-notification{display:-webkit-flex;display:-webkit-box;display:-ms-flexbox;display:flex;max-width:330px;border:1px solid rgba(0,0,0,.1);border-radius:3px;background:hsla(0,0%,98%,.5);overflow:auto;margin:.5em 0}#onesignal-bell-container.onesignal-reset .onesignal-bell-launcher.onesignal-bell-launcher-sm .onesignal-bell-launcher-dialog .onesignal-bell-launcher-dialog-body .push-notification .push-notification-icon{width:50px;height:50px;margin:6px;margin-right:3px;border-radius:2px}#onesignal-bell-container.onesignal-reset .onesignal-bell-launcher.onesignal-bell-launcher-sm .onesignal-bell-launcher-dialog .onesignal-bell-launcher-dialog-body .push-notification .push-notification-icon.push-notification-icon-default{background:#e3e4e5}#onesignal-bell-container.onesignal-reset .onesignal-bell-launcher.onesignal-bell-launcher-sm .onesignal-bell-launcher-dialog .onesignal-bell-launcher-dialog-body .push-notification .push-notification-icon img{width:50px;height:50px;border-radius:1px}#onesignal-bell-container.onesignal-reset .onesignal-bell-launcher.onesignal-bell-launcher-sm .onesignal-bell-launcher-dialog .onesignal-bell-launcher-dialog-body .push-notification .push-notification-text-container{margin:6px;margin-left:3px;-webkit-flex:1;-webkit-box-flex:1;-ms-flex:1;flex:1}#onesignal-bell-container.onesignal-reset .onesignal-bell-launcher.onesignal-bell-launcher-sm .onesignal-bell-launcher-dialog .onesignal-bell-launcher-dialog-body .push-notification .push-notification-text-container .push-notification-text{height:5px;width:100%;background:#e3e4e5;margin:5px 0;border-radius:1px}#onesignal-bell-container.onesignal-reset .onesignal-bell-launcher.onesignal-bell-launcher-sm .onesignal-bell-launcher-dialog .onesignal-bell-launcher-dialog-body .push-notification .push-notification-text-container .push-notification-text.push-notification-text-short{width:75%}#onesignal-bell-container.onesignal-reset .onesignal-bell-launcher.onesignal-bell-launcher-sm .onesignal-bell-launcher-dialog .onesignal-bell-launcher-dialog-body .push-notification .push-notification-text-container .push-notification-text.push-notification-text-medium{width:87%}#onesignal-bell-container.onesignal-reset .onesignal-bell-launcher.onesignal-bell-launcher-sm .onesignal-bell-launcher-dialog .onesignal-bell-launcher-dialog-body .push-notification .push-notification-text-container .push-notification-text:first-of-type{margin-top:2px}#onesignal-bell-container.onesignal-reset .onesignal-bell-launcher.onesignal-bell-launcher-sm .onesignal-bell-launcher-dialog .onesignal-bell-launcher-dialog-body .push-notification .push-notification-text-container .push-notification-text:last-of-type{margin-bottom:0}#onesignal-bell-container.onesignal-reset .onesignal-bell-launcher.onesignal-bell-launcher-md{height:48px}#onesignal-bell-container.onesignal-reset .onesignal-bell-launcher.onesignal-bell-launcher-md .onesignal-bell-launcher-button{width:48px;height:48px}#onesignal-bell-container.onesignal-reset .onesignal-bell-launcher.onesignal-bell-launcher-md .onesignal-bell-launcher-badge{font-size:12px;width:18px;height:18px;line-height:18px}#onesignal-bell-container.onesignal-reset .onesignal-bell-launcher.onesignal-bell-launcher-md .onesignal-bell-launcher-message{padding:14.4px}#onesignal-bell-container.onesignal-reset .onesignal-bell-launcher.onesignal-bell-launcher-md .onesignal-bell-launcher-message:after{border-width:9.9px;margin-top:-9.9px}#onesignal-bell-container.onesignal-reset .onesignal-bell-launcher.onesignal-bell-launcher-md .onesignal-bell-launcher-message .onesignal-bell-launcher-message-body{font-size:14px}#onesignal-bell-container.onesignal-reset .onesignal-bell-launcher.onesignal-bell-launcher-md .onesignal-bell-launcher-dialog{padding:.3em .8em .6em;color:#333}#onesignal-bell-container.onesignal-reset .onesignal-bell-launcher.onesignal-bell-launcher-md .onesignal-bell-launcher-dialog:after{border-top-color:#fff;border-width:9.9px}#onesignal-bell-container.onesignal-reset .onesignal-bell-launcher.onesignal-bell-launcher-md .onesignal-bell-launcher-dialog:before{border-top-color:hsla(0,0%,71%,.1);border-width:11.9px}#onesignal-bell-container.onesignal-reset .onesignal-bell-launcher.onesignal-bell-launcher-md .onesignal-bell-launcher-dialog .onesignal-bell-launcher-dialog-body{font-size:14px;font-family:Helvetica Neue,Helvetica,Arial,sans-serif}#onesignal-bell-container.onesignal-reset .onesignal-bell-launcher.onesignal-bell-launcher-md .onesignal-bell-launcher-dialog .onesignal-bell-launcher-dialog-body h1{font-size:15px;line-height:1.2em;font-weight:500;font-family:Helvetica Neue,Helvetica,Arial,sans-serif;letter-spacing:.2px;text-align:center;color:#41090a}#onesignal-bell-container.onesignal-reset .onesignal-bell-launcher.onesignal-bell-launcher-md .onesignal-bell-launcher-dialog .onesignal-bell-launcher-dialog-body p{font-size:14px;font-weight:400;font-family:Helvetica Neue,Helvetica,Arial,sans-serif}#onesignal-bell-container.onesignal-reset .onesignal-bell-launcher.onesignal-bell-launcher-md .onesignal-bell-launcher-dialog .onesignal-bell-launcher-dialog-body .divider{border-bottom:1px solid rgba(0,0,0,.1);margin:.25em -.93em}#onesignal-bell-container.onesignal-reset .onesignal-bell-launcher.onesignal-bell-launcher-md .onesignal-bell-launcher-dialog .onesignal-bell-launcher-dialog-body .kickback{text-align:center;font-family:Helvetica Neue,Helvetica,Arial,sans-serif;font-weight:300;font-size:9.8px;letter-spacing:.5px}#onesignal-bell-container.onesignal-reset .onesignal-bell-launcher.onesignal-bell-launcher-md .onesignal-bell-launcher-dialog .onesignal-bell-launcher-dialog-body .instructions{max-width:95vw;max-height:70vh;font-family:Helvetica Neue,Helvetica,Arial,sans-serif;font-weight:400;font-size:14px}#onesignal-bell-container.onesignal-reset .onesignal-bell-launcher.onesignal-bell-launcher-md .onesignal-bell-launcher-dialog .onesignal-bell-launcher-dialog-body .instructions img{width:100%}#onesignal-bell-container.onesignal-reset .onesignal-bell-launcher.onesignal-bell-launcher-md .onesignal-bell-launcher-dialog .onesignal-bell-launcher-dialog-body .push-notification{display:-webkit-flex;display:-webkit-box;display:-ms-flexbox;display:flex;max-width:330px;border:1px solid rgba(0,0,0,.1);border-radius:3px;background:hsla(0,0%,98%,.5);overflow:auto;margin:.5em 0}#onesignal-bell-container.onesignal-reset .onesignal-bell-launcher.onesignal-bell-launcher-md .onesignal-bell-launcher-dialog .onesignal-bell-launcher-dialog-body .push-notification .push-notification-icon{width:50px;height:50px;margin:6px;margin-right:3px;border-radius:2px}#onesignal-bell-container.onesignal-reset .onesignal-bell-launcher.onesignal-bell-launcher-md .onesignal-bell-launcher-dialog .onesignal-bell-launcher-dialog-body .push-notification .push-notification-icon.push-notification-icon-default{background:#e3e4e5}#onesignal-bell-container.onesignal-reset .onesignal-bell-launcher.onesignal-bell-launcher-md .onesignal-bell-launcher-dialog .onesignal-bell-launcher-dialog-body .push-notification .push-notification-icon img{width:50px;height:50px;border-radius:1px}#onesignal-bell-container.onesignal-reset .onesignal-bell-launcher.onesignal-bell-launcher-md .onesignal-bell-launcher-dialog .onesignal-bell-launcher-dialog-body .push-notification .push-notification-text-container{margin:6px;margin-left:3px;-webkit-flex:1;-webkit-box-flex:1;-ms-flex:1;flex:1}#onesignal-bell-container.onesignal-reset .onesignal-bell-launcher.onesignal-bell-launcher-md .onesignal-bell-launcher-dialog .onesignal-bell-launcher-dialog-body .push-notification .push-notification-text-container .push-notification-text{height:5px;width:100%;background:#e3e4e5;margin:5px 0;border-radius:1px}#onesignal-bell-container.onesignal-reset .onesignal-bell-launcher.onesignal-bell-launcher-md .onesignal-bell-launcher-dialog .onesignal-bell-launcher-dialog-body .push-notification .push-notification-text-container .push-notification-text.push-notification-text-short{width:75%}#onesignal-bell-container.onesignal-reset .onesignal-bell-launcher.onesignal-bell-launcher-md .onesignal-bell-launcher-dialog .onesignal-bell-launcher-dialog-body .push-notification .push-notification-text-container .push-notification-text.push-notification-text-medium{width:87%}#onesignal-bell-container.onesignal-reset .onesignal-bell-launcher.onesignal-bell-launcher-md .onesignal-bell-launcher-dialog .onesignal-bell-launcher-dialog-body .push-notification .push-notification-text-container .push-notification-text:first-of-type{margin-top:2px}#onesignal-bell-container.onesignal-reset .onesignal-bell-launcher.onesignal-bell-launcher-md .onesignal-bell-launcher-dialog .onesignal-bell-launcher-dialog-body .push-notification .push-notification-text-container .push-notification-text:last-of-type{margin-bottom:0}#onesignal-bell-container.onesignal-reset .onesignal-bell-launcher.onesignal-bell-launcher-lg{height:64px}#onesignal-bell-container.onesignal-reset .onesignal-bell-launcher.onesignal-bell-launcher-lg .onesignal-bell-launcher-button{width:64px;height:64px}#onesignal-bell-container.onesignal-reset .onesignal-bell-launcher.onesignal-bell-launcher-lg .onesignal-bell-launcher-badge{font-size:12px;width:24px;height:24px;line-height:24px}#onesignal-bell-container.onesignal-reset .onesignal-bell-launcher.onesignal-bell-launcher-lg .onesignal-bell-launcher-message{padding:19.2px}#onesignal-bell-container.onesignal-reset .onesignal-bell-launcher.onesignal-bell-launcher-lg .onesignal-bell-launcher-message:after{border-width:13.2px;margin-top:-13.2px}#onesignal-bell-container.onesignal-reset .onesignal-bell-launcher.onesignal-bell-launcher-lg .onesignal-bell-launcher-message .onesignal-bell-launcher-message-body{font-size:14px}#onesignal-bell-container.onesignal-reset .onesignal-bell-launcher.onesignal-bell-launcher-lg .onesignal-bell-launcher-dialog{padding:.3em .8em .6em;color:#333}#onesignal-bell-container.onesignal-reset .onesignal-bell-launcher.onesignal-bell-launcher-lg .onesignal-bell-launcher-dialog:after{border-top-color:#fff;border-width:13.2px}#onesignal-bell-container.onesignal-reset .onesignal-bell-launcher.onesignal-bell-launcher-lg .onesignal-bell-launcher-dialog:before{border-top-color:hsla(0,0%,71%,.1);border-width:15.2px}#onesignal-bell-container.onesignal-reset .onesignal-bell-launcher.onesignal-bell-launcher-lg .onesignal-bell-launcher-dialog .onesignal-bell-launcher-dialog-body{font-size:14px;font-family:Helvetica Neue,Helvetica,Arial,sans-serif}#onesignal-bell-container.onesignal-reset .onesignal-bell-launcher.onesignal-bell-launcher-lg .onesignal-bell-launcher-dialog .onesignal-bell-launcher-dialog-body h1{font-size:15px;line-height:1.2em;font-weight:500;font-family:Helvetica Neue,Helvetica,Arial,sans-serif;letter-spacing:.2px;text-align:center;color:#41090a}#onesignal-bell-container.onesignal-reset .onesignal-bell-launcher.onesignal-bell-launcher-lg .onesignal-bell-launcher-dialog .onesignal-bell-launcher-dialog-body p{font-size:14px;font-weight:400;font-family:Helvetica Neue,Helvetica,Arial,sans-serif}#onesignal-bell-container.onesignal-reset .onesignal-bell-launcher.onesignal-bell-launcher-lg .onesignal-bell-launcher-dialog .onesignal-bell-launcher-dialog-body .divider{border-bottom:1px solid rgba(0,0,0,.1);margin:.25em -.93em}#onesignal-bell-container.onesignal-reset .onesignal-bell-launcher.onesignal-bell-launcher-lg .onesignal-bell-launcher-dialog .onesignal-bell-launcher-dialog-body .kickback{text-align:center;font-family:Helvetica Neue,Helvetica,Arial,sans-serif;font-weight:300;font-size:9.8px;letter-spacing:.5px}#onesignal-bell-container.onesignal-reset .onesignal-bell-launcher.onesignal-bell-launcher-lg .onesignal-bell-launcher-dialog .onesignal-bell-launcher-dialog-body .instructions{max-width:95vw;max-height:70vh;font-family:Helvetica Neue,Helvetica,Arial,sans-serif;font-weight:400;font-size:14px}#onesignal-bell-container.onesignal-reset .onesignal-bell-launcher.onesignal-bell-launcher-lg .onesignal-bell-launcher-dialog .onesignal-bell-launcher-dialog-body .instructions img{width:100%}#onesignal-bell-container.onesignal-reset .onesignal-bell-launcher.onesignal-bell-launcher-lg .onesignal-bell-launcher-dialog .onesignal-bell-launcher-dialog-body .push-notification{display:-webkit-flex;display:-webkit-box;display:-ms-flexbox;display:flex;max-width:330px;border:1px solid rgba(0,0,0,.1);border-radius:3px;background:hsla(0,0%,98%,.5);overflow:auto;margin:.5em 0}#onesignal-bell-container.onesignal-reset .onesignal-bell-launcher.onesignal-bell-launcher-lg .onesignal-bell-launcher-dialog .onesignal-bell-launcher-dialog-body .push-notification .push-notification-icon{width:50px;height:50px;margin:6px;margin-right:3px;border-radius:2px}#onesignal-bell-container.onesignal-reset .onesignal-bell-launcher.onesignal-bell-launcher-lg .onesignal-bell-launcher-dialog .onesignal-bell-launcher-dialog-body .push-notification .push-notification-icon.push-notification-icon-default{background:#e3e4e5}#onesignal-bell-container.onesignal-reset .onesignal-bell-launcher.onesignal-bell-launcher-lg .onesignal-bell-launcher-dialog .onesignal-bell-launcher-dialog-body .push-notification .push-notification-icon img{width:50px;height:50px;border-radius:1px}#onesignal-bell-container.onesignal-reset .onesignal-bell-launcher.onesignal-bell-launcher-lg .onesignal-bell-launcher-dialog .onesignal-bell-launcher-dialog-body .push-notification .push-notification-text-container{margin:6px;margin-left:3px;-webkit-flex:1;-webkit-box-flex:1;-ms-flex:1;flex:1}#onesignal-bell-container.onesignal-reset .onesignal-bell-launcher.onesignal-bell-launcher-lg .onesignal-bell-launcher-dialog .onesignal-bell-launcher-dialog-body .push-notification .push-notification-text-container .push-notification-text{height:5px;width:100%;background:#e3e4e5;margin:5px 0;border-radius:1px}#onesignal-bell-container.onesignal-reset .onesignal-bell-launcher.onesignal-bell-launcher-lg .onesignal-bell-launcher-dialog .onesignal-bell-launcher-dialog-body .push-notification .push-notification-text-container .push-notification-text.push-notification-text-short{width:75%}#onesignal-bell-container.onesignal-reset .onesignal-bell-launcher.onesignal-bell-launcher-lg .onesignal-bell-launcher-dialog .onesignal-bell-launcher-dialog-body .push-notification .push-notification-text-container .push-notification-text.push-notification-text-medium{width:87%}#onesignal-bell-container.onesignal-reset .onesignal-bell-launcher.onesignal-bell-launcher-lg .onesignal-bell-launcher-dialog .onesignal-bell-launcher-dialog-body .push-notification .push-notification-text-container .push-notification-text:first-of-type{margin-top:2px}#onesignal-bell-container.onesignal-reset .onesignal-bell-launcher.onesignal-bell-launcher-lg .onesignal-bell-launcher-dialog .onesignal-bell-launcher-dialog-body .push-notification .push-notification-text-container .push-notification-text:last-of-type{margin-bottom:0}#onesignal-bell-container.onesignal-reset .onesignal-bell-launcher.onesignal-bell-launcher-theme-default .onesignal-bell-launcher-button svg .background{fill:#e54b4d}#onesignal-bell-container.onesignal-reset .onesignal-bell-launcher.onesignal-bell-launcher-theme-default .onesignal-bell-launcher-button svg .foreground{fill:#fff}#onesignal-bell-container.onesignal-reset .onesignal-bell-launcher.onesignal-bell-launcher-theme-default .onesignal-bell-launcher-button svg .stroke{fill:none;stroke:#fff;stroke-width:3px;stroke-miterlimit:10}#onesignal-bell-container.onesignal-reset .onesignal-bell-launcher.onesignal-bell-launcher-theme-default .onesignal-bell-launcher-button.onesignal-bell-launcher-badge-active svg .background,#onesignal-bell-container.onesignal-reset .onesignal-bell-launcher.onesignal-bell-launcher-theme-default .onesignal-bell-launcher-button.onesignal-bell-launcher-button-active svg .background{fill:#dd2022!important}#onesignal-bell-container.onesignal-reset .onesignal-bell-launcher.onesignal-bell-launcher-theme-default .onesignal-bell-launcher-button .pulse-ring{border:7px solid hsla(0,0%,100%,.4)}#onesignal-bell-container.onesignal-reset .onesignal-bell-launcher.onesignal-bell-launcher-theme-default .onesignal-bell-launcher-badge{border:1px solid #fff;background:#000;color:#fff}#onesignal-bell-container.onesignal-reset .onesignal-bell-launcher.onesignal-bell-launcher-theme-inverse .onesignal-bell-launcher-button svg .background{fill:#fff}#onesignal-bell-container.onesignal-reset .onesignal-bell-launcher.onesignal-bell-launcher-theme-inverse .onesignal-bell-launcher-button svg .foreground{fill:#e54b4d}#onesignal-bell-container.onesignal-reset .onesignal-bell-launcher.onesignal-bell-launcher-theme-inverse .onesignal-bell-launcher-button svg .stroke{fill:none;stroke:#e54b4d;stroke-width:3px;stroke-miterlimit:10}#onesignal-bell-container.onesignal-reset .onesignal-bell-launcher.onesignal-bell-launcher-theme-inverse .onesignal-bell-launcher-button.onesignal-bell-launcher-badge-active svg .background,#onesignal-bell-container.onesignal-reset .onesignal-bell-launcher.onesignal-bell-launcher-theme-inverse .onesignal-bell-launcher-button.onesignal-bell-launcher-button-active svg .background{fill:#f2f2f2!important}#onesignal-bell-container.onesignal-reset .onesignal-bell-launcher.onesignal-bell-launcher-theme-inverse .onesignal-bell-launcher-button .pulse-ring{border:7px solid rgba(229,75,77,.4)}#onesignal-bell-container.onesignal-reset .onesignal-bell-launcher.onesignal-bell-launcher-theme-inverse .onesignal-bell-launcher-badge{border:1px solid #fff;background:#e54b4d;color:#fff}#onesignal-bell-container.onesignal-reset .onesignal-bell-launcher-active,#onesignal-bell-container.onesignal-reset .onesignal-bell-launcher-enabled{-webkit-transform:scale(1);transform:scale(1);opacity:1}#onesignal-bell-container.onesignal-reset .onesignal-bell-launcher-disabled{visibility:hidden}#onesignal-bell-container.onesignal-reset .onesignal-bell-launcher-inactive{opacity:.5}#onesignal-bell-container.onesignal-reset .pulse-ring{border-radius:50%;position:absolute;left:0;top:0;bottom:0;right:0;-webkit-animation:pulse .35s ease-in-out;animation:pulse .35s ease-in-out;-webkit-animation-iteration-count:1;animation-iteration-count:1;opacity:0;z-index:1000;pointer-events:none}@media print{#onesignal-bell-container{display:none}}@-webkit-keyframes pulse{0%{-webkit-transform:scale(.1);transform:scale(.1);opacity:0;border-width:10px}50%{opacity:1;border-width:5px}to{-webkit-transform:scale(1.2);transform:scale(1.2);opacity:0;border-width:1px}}',""]);
},function(module,exports){module.exports=function(){var list=[];list.toString=function toString(){var result=[];for(var i=0;i<this.length;i++){var item=this[i];if(item[2])result.push("@media "+item[2]+"{"+item[1]+"}");else result.push(item[1])}return result.join("")};list.i=function(modules,mediaQuery){if("string"==typeof modules)modules=[[null,modules,""]];var alreadyImportedModules={};for(var i=0;i<this.length;i++){var id=this[i][0];if("number"==typeof id)alreadyImportedModules[id]=true}for(i=0;i<modules.length;i++){var item=modules[i];if("number"!=typeof item[0]||!alreadyImportedModules[item[0]]){if(mediaQuery&&!item[2])item[2]=mediaQuery;else if(mediaQuery)item[2]="("+item[2]+") and ("+mediaQuery+")";list.push(item)}}};return list}},function(module,exports,__webpack_require__){function addStylesToDom(styles,options){for(var i=0;i<styles.length;i++){var item=styles[i];var domStyle=stylesInDom[item.id];if(domStyle){domStyle.refs++;for(var j=0;j<domStyle.parts.length;j++)domStyle.parts[j](item.parts[j]);for(;j<item.parts.length;j++)domStyle.parts.push(addStyle(item.parts[j],options))}else{var parts=[];for(var j=0;j<item.parts.length;j++)parts.push(addStyle(item.parts[j],options));stylesInDom[item.id]={id:item.id,refs:1,parts:parts}}}}function listToStyles(list){var styles=[];var newStyles={};for(var i=0;i<list.length;i++){var item=list[i];var id=item[0];var css=item[1];var media=item[2];var sourceMap=item[3];var part={css:css,media:media,sourceMap:sourceMap};if(!newStyles[id])styles.push(newStyles[id]={id:id,parts:[part]});else newStyles[id].parts.push(part)}return styles}function insertStyleElement(options,styleElement){var head=getHeadElement();var lastStyleElementInsertedAtTop=styleElementsInsertedAtTop[styleElementsInsertedAtTop.length-1];if("top"===options.insertAt){if(!lastStyleElementInsertedAtTop)head.insertBefore(styleElement,head.firstChild);else if(lastStyleElementInsertedAtTop.nextSibling)head.insertBefore(styleElement,lastStyleElementInsertedAtTop.nextSibling);else head.appendChild(styleElement);styleElementsInsertedAtTop.push(styleElement)}else if("bottom"===options.insertAt)head.appendChild(styleElement);else throw new Error("Invalid value for parameter 'insertAt'. Must be 'top' or 'bottom'.")}function removeStyleElement(styleElement){styleElement.parentNode.removeChild(styleElement);var idx=styleElementsInsertedAtTop.indexOf(styleElement);if(idx>=0)styleElementsInsertedAtTop.splice(idx,1)}function createStyleElement(options){var styleElement=document.createElement("style");styleElement.type="text/css";insertStyleElement(options,styleElement);return styleElement}function createLinkElement(options){var linkElement=document.createElement("link");linkElement.rel="stylesheet";insertStyleElement(options,linkElement);return linkElement}function addStyle(obj,options){var styleElement,update,remove;if(options.singleton){var styleIndex=singletonCounter++;styleElement=singletonElement||(singletonElement=createStyleElement(options));update=applyToSingletonTag.bind(null,styleElement,styleIndex,false);remove=applyToSingletonTag.bind(null,styleElement,styleIndex,true)}else if(obj.sourceMap&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&"function"==typeof URL.revokeObjectURL&&"function"==typeof Blob&&"function"==typeof btoa){styleElement=createLinkElement(options);update=updateLink.bind(null,styleElement);remove=function(){removeStyleElement(styleElement);if(styleElement.href)URL.revokeObjectURL(styleElement.href)}}else{styleElement=createStyleElement(options);update=applyToTag.bind(null,styleElement);remove=function(){removeStyleElement(styleElement)}}update(obj);return function updateStyle(newObj){if(newObj){if(newObj.css===obj.css&&newObj.media===obj.media&&newObj.sourceMap===obj.sourceMap)return;update(obj=newObj)}else remove()}}function applyToSingletonTag(styleElement,index,remove,obj){var css=remove?"":obj.css;if(styleElement.styleSheet)styleElement.styleSheet.cssText=replaceText(index,css);else{var cssNode=document.createTextNode(css);var childNodes=styleElement.childNodes;if(childNodes[index])styleElement.removeChild(childNodes[index]);if(childNodes.length)styleElement.insertBefore(cssNode,childNodes[index]);else styleElement.appendChild(cssNode)}}function applyToTag(styleElement,obj){var css=obj.css;var media=obj.media;var sourceMap=obj.sourceMap;if(media)styleElement.setAttribute("media",media);if(styleElement.styleSheet)styleElement.styleSheet.cssText=css;else{for(;styleElement.firstChild;)styleElement.removeChild(styleElement.firstChild);styleElement.appendChild(document.createTextNode(css))}}function updateLink(linkElement,obj){var css=obj.css;var media=obj.media;var sourceMap=obj.sourceMap;if(sourceMap)css+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap))))+" */";var blob=new Blob([css],{type:"text/css"});var oldSrc=linkElement.href;linkElement.href=URL.createObjectURL(blob);if(oldSrc)URL.revokeObjectURL(oldSrc)}var stylesInDom={},memoize=function(fn){var memo;return function(){if("undefined"==typeof memo)memo=fn.apply(this,arguments);return memo}},isOldIE=memoize(function(){return/msie [6-9]\b/.test(window.navigator.userAgent.toLowerCase())}),getHeadElement=memoize(function(){return document.head||document.getElementsByTagName("head")[0]}),singletonElement=null,singletonCounter=0,styleElementsInsertedAtTop=[];module.exports=function(list,options){if(false)if("object"!=typeof document)throw new Error("The style-loader cannot be used in a non-browser environment");options=options||{};if("undefined"==typeof options.singleton)options.singleton=isOldIE();if("undefined"==typeof options.insertAt)options.insertAt="bottom";var styles=listToStyles(list);addStylesToDom(styles,options);return function update(newList){var mayRemove=[];for(var i=0;i<styles.length;i++){var item=styles[i];var domStyle=stylesInDom[item.id];domStyle.refs--;mayRemove.push(domStyle)}if(newList){var newStyles=listToStyles(newList);addStylesToDom(newStyles,options)}for(var i=0;i<mayRemove.length;i++){var domStyle=mayRemove[i];if(0===domStyle.refs){for(var j=0;j<domStyle.parts.length;j++)domStyle.parts[j]();delete stylesInDom[domStyle.id]}}}};var replaceText=function(){var textStore=[];return function(index,replacement){textStore[index]=replacement;return textStore.filter(Boolean).join("\n")}}()},function(module,exports){module.exports='<?xml version="1.0" encoding="utf-8"?>\n<!-- Generator: Adobe Illustrator 19.1.0, SVG Export Plug-In . SVG Version: 6.00 Build 0)  -->\n<svg version="1.1" class="onesignal-bell-svg" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"\n	 width="99.7px" height="99.7px" viewBox="0 0 99.7 99.7" style="enable-background:new 0 0 99.7 99.7;" xml:space="preserve">\n<g>\n	<circle class="background" cx="49.9" cy="49.9" r="49.9"/>\n	<g id="Layer_2">\n		<g>\n			<path class="foreground" d="M50.1,66.2H27.7c0,0-2-0.2-2-2.1c0-1.9,1.7-2,1.7-2s6.7-3.2,6.7-5.5c0-2.3-1.1-3.9-1.1-13.3\n				s6-16.6,13.2-16.6c0,0,1-2.4,3.9-2.4c2.8,0,3.8,2.4,3.8,2.4c7.2,0,13.2,7.2,13.2,16.6s-1,11-1,13.3c0,2.3,6.7,5.5,6.7,5.5\n				s1.7,0.1,1.7,2c0,1.8-2.1,2.1-2.1,2.1H50.1z"/>\n			<path class="foreground" d="M42.9,68.5h14.5c0,0-1,6.3-7.2,6.3S42.9,68.5,42.9,68.5z"/>\n			<ellipse class="stroke" cx="49.9" cy="49.9" rx="37.4" ry="36.9"/>\n		</g>\n	</g>\n</g>\n</svg>\n'},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:true});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();var _loglevel=__webpack_require__(3);var _loglevel2=_interopRequireDefault(_loglevel);var _events=__webpack_require__(28);var _events2=_interopRequireDefault(_events);var _utils=__webpack_require__(2);var Database=function(){function Database(){_classCallCheck(this,Database)}_createClass(Database,null,[{key:"getInstance",value:function getInstance(){return new Promise(function(resolve,reject){if(Database._instance)resolve(Database._instance);else{var request=indexedDB.open("ONE_SIGNAL_SDK_DB",1);request.onsuccess=function(event){if(Database._instance){var redundantDb=event.target.result;redundantDb.close();resolve(Database._instance)}else{var database=event.target.result;Database._instance=database;_loglevel2["default"].debug("Opening IndexedDB instance.");resolve(database)}};request.onerror=function(event){_loglevel2["default"].error("Unable to open IndexedDB.",event);reject(event)};request.onupgradeneeded=function(event){_loglevel2["default"].info("OneSignal: IndexedDB is being rebuilt or upgraded.",event);var db=event.target.result;db.createObjectStore("Ids",{keyPath:"type"});db.createObjectStore("NotificationOpened",{keyPath:"url"});db.createObjectStore("Options",{keyPath:"key"});_events2["default"].trigger(Database.EVENTS.REBUILT)};request.onversionchange=function(event){_loglevel2["default"].warn("The database is about to be deleted.")}}})}},{key:"get",value:function get(table,key){if(key)return Database.getInstance().then(function(database){return new Promise(function(resolve,reject){var request=database.transaction(table).objectStore(table).get(key);request.onsuccess=function(){_events2["default"].trigger(Database.EVENTS.RETRIEVED,{table:table,key:key,result:request.result});resolve(request.result)};request.onerror=function(){reject(request.errorCode)}})});else return Database.getInstance().then(function(database){return new Promise(function(resolve,reject){var jsonResult={};var cursor=database.transaction(table).objectStore(table).openCursor();cursor.onsuccess=function(event){var cursorResult=event.target.result;if(cursorResult){_events2["default"].trigger(Database.EVENTS.RETRIEVED,cursorResult.value);jsonResult[cursorResult.key]=cursorResult.value.value;cursorResult["continue"]()}else resolve(jsonResult)};cursor.onerror=function(event){reject(cursor.errorCode)}})})}},{key:"put",value:function put(table,key){return Database.getInstance().then(function(database){return new Promise(function(resolve,reject){try{var request=database.transaction([table],"readwrite").objectStore(table).put(key);request.onsuccess=function(event){_events2["default"].trigger(Database.EVENTS.SET,key);resolve(key)};request.onerror=function(e){_loglevel2["default"].error("Database PUT Transaction Error:",e);reject(e)}}catch(e){_loglevel2["default"].error("Database PUT Error:",e);reject(e)}})})}},{key:"remove",value:function remove(table,key){if(key)var method="delete";else var method="clear";return Database.getInstance().then(function(database){return new Promise(function(resolve,reject){try{var request=database.transaction([table],"readwrite").objectStore(table)[method](key);request.onsuccess=function(event){_events2["default"].trigger(Database.EVENTS.REMOVED,[table,key]);resolve(key)};request.onerror=function(e){_loglevel2["default"].error("Database REMOVE Transaction Error:",e);reject(e)}}catch(e){_loglevel2["default"].error("Database REMOVE Error:",e);reject(e)}})})}},{key:"rebuild",value:function rebuild(){return Promise.all([Database.remove("Ids"),Database.remove("NotificationOpened"),Database.remove("Options")])}},{key:"printIds",value:function printIds(){Promise.all([Database.get("Ids","appId"),Database.get("Ids","registrationId"),Database.get("Ids","userId")]).then(function(contents){console.info("appId:",contents[0]);console.info("registrationId:",contents[1]);console.info("userId:",contents[2])})}},{key:"printPushLog",value:function printPushLog(){Database.get("Options","pushLog").then(function(pushLogResult){if(pushLogResult)console.info("Push Log:",pushLogResult.value);else console.info("No push log found.")})}},{key:"getPushLog",value:function getPushLog(){return new Promise(function(resolve){Database.get("Options","pushLog").then(function(pushLogResult){if(pushLogResult){if("undefined"!=typeof window)window.pushlog=pushLogResult.value;else self.pushlog=pushLogResult.value;console.info("Push log stored in variable %cpushlog",(0,_utils.getConsoleStyle)("code"),".");resolve(pushLogResult.value)}else{_loglevel2["default"].info("No push log found.");resolve(null)}})})}},{key:"clearPushLog",value:function clearPushLog(){Database.put("Options",{key:"pushLog",value:{}}).then(function(){return console.info("Push log cleared.")})}},{key:"copyPushLog",value:function copyPushLog(){Database.get("Options","pushLog").then(function(pushLogResult){if(pushLogResult)if("undefined"!=typeof window){window.pushlog=pushLogResult.value;console.info("Push log set into variable. Please run this code now to copy the push log to your clipboard: %ccopy(window.pushlog)",(0,_utils.getConsoleStyle)("code"),". You should see 'undefined' but the contents will be copied to your clipboard.")}else{self.pushlog=pushLogResult.value;console.info("Push log set into variable. Please run this code now to copy the push log to your clipboard: %ccopy(self.pushlog)",(0,_utils.getConsoleStyle)("code"))}else console.warn("No push log found.")})}},{key:"readPushLog",value:function readPushLog(pushLog){if(!pushLog||""==pushLog){console.warn('Please pass in the entire stringified push log as a parameter. Example usage: %cOneSignal.database.readPushLog(`{ "ff5fb87e-40d9-4232-8df8-9300f3a0feaf": { "retrieved": "2016-02-24T05:43:25.705Z", "displayed": "2016-02-24T05:43:25.709Z" }}`)',(0,_utils.getConsoleStyle)("code"));return}var pushLog=JSON.parse(pushLog);var pushLogKeys=Object.keys(pushLog);var actions=["retrieved","displayed","clicked"];var _iteratorNormalCompletion=true;var _didIteratorError=false;var _iteratorError=void 0;try{for(var _iterator=pushLogKeys[Symbol.iterator](),_step;!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=true){var key=_step.value;var _iteratorNormalCompletion2=true;var _didIteratorError2=false;var _iteratorError2=void 0;try{for(var _iterator2=actions[Symbol.iterator](),_step2;!(_iteratorNormalCompletion2=(_step2=_iterator2.next()).done);_iteratorNormalCompletion2=true){var action=_step2.value;if(pushLog[key][action])pushLog[key][action]=new Date(pushLog[key][action])}}catch(err){_didIteratorError2=true;_iteratorError2=err}finally{try{if(!_iteratorNormalCompletion2&&_iterator2["return"])_iterator2["return"]()}finally{if(_didIteratorError2)throw _iteratorError2}}}}catch(err){_didIteratorError=true;_iteratorError=err}finally{try{if(!_iteratorNormalCompletion&&_iterator["return"])_iterator["return"]()}finally{if(_didIteratorError)throw _iteratorError}}return pushLog}},{key:"_wipeBetaSettings",value:function _wipeBetaSettings(){Promise.all([Database.remove("Options","persistNotification"),Database.remove("Options","webhooks.cors"),Database.remove("Options","webhooks.notification.displayed"),Database.remove("Options","webhooks.notification.clicked")])}},{key:"EVENTS",get:function get(){return{REBUILT:"onesignal.db.rebuilt",RETRIEVED:"onesignal.db.retrieved",SET:"onesignal.db.set",REMOVED:"onesignal.db.removed"}}}]);return Database}();exports["default"]=Database},function(module,exports,__webpack_require__){"use strict";function complain(){throw new Error("Swivel couldn't detect ServiceWorker support. Please feature detect before using Swivel in your web pages!")}var page=__webpack_require__(45);var worker=__webpack_require__(53);var api;if("serviceWorker"in navigator)api=page();else if("clients"in self)api=worker();else api={on:complain,once:complain,off:complain,emit:complain,broadcast:complain};module.exports=api},function(module,exports,__webpack_require__){"use strict";function createChannel(){function at(worker){function selfed(method){return function selfish(){internalEmitter[method].apply(null,arguments);return api}}function postToWorker(){if(!worker)return Promise.reject(new Error("ServiceWorker not found."));var payload=serialization.parsePayload(atoa(arguments));var messageChannel=new MessageChannel;messageChannel.port1.addEventListener("message",postFromWorker);return worker.postMessage(payload,[messageChannel.port2])}function broadcastHandler(e){if(e.source!==worker)return;var data=e.data;if(data)if(data.__broadcast)serialization.emission(internalEmitter,{broadcast:true})(e);else serialization.emission(internalEmitter,{broadcast:false})(e)}var internalEmitter=emitter();var api={on:selfed("on"),once:selfed("once"),off:selfed("off"),emit:postToWorker,at:at};var postFromWorker=serialization.emission(internalEmitter,{broadcast:false});navigator.serviceWorker.addEventListener("message",broadcastHandler);return api}var channel=at(navigator.serviceWorker.controller);return channel}var atoa=__webpack_require__(46);var serialization=__webpack_require__(47);var emitter=__webpack_require__(48);module.exports=createChannel},function(module,exports){module.exports=function atoa(a,n){return Array.prototype.slice.call(a,n)}},function(module,exports){"use strict";function serializeError(err){return err?err.toString():null}function deserializeError(err){return err?new Error(err):null}function parsePayload(payload){var type=payload.shift();if("error"===type)return{error:serializeError(payload[0]),type:type,payload:[]};return{error:null,type:type,payload:payload}}function emission(emitter,context){function emit(e){var data=e.data;if("error"===data.type)emitter.emit.call(null,"error",context,deserializeError(data.error));else emitter.emit.apply(null,[data.type,context].concat(data.payload))}return emit}module.exports={parsePayload:parsePayload,emission:emission}},function(module,exports,__webpack_require__){"use strict";var atoa=__webpack_require__(46);var debounce=__webpack_require__(49);module.exports=function emitter(thing,options){var opts=options||{};var evt={};if(void 0===thing)thing={};thing.on=function(type,fn){if(!evt[type])evt[type]=[fn];else evt[type].push(fn);return thing};thing.once=function(type,fn){fn._once=true;thing.on(type,fn);return thing};thing.off=function(type,fn){var c=arguments.length;if(1===c)delete evt[type];else if(0===c)evt={};else{var et=evt[type];if(!et)return thing;et.splice(et.indexOf(fn),1)}return thing};thing.emit=function(){var args=atoa(arguments);return thing.emitterSnapshot(args.shift()).apply(this,args)};thing.emitterSnapshot=function(type){var et=(evt[type]||[]).slice(0);return function(){var args=atoa(arguments);var ctx=this||thing;if("error"===type&&false!==opts["throws"]&&!et.length)throw 1===args.length?args[0]:args;et.forEach(function emitter(listen){if(opts.async)debounce(listen,args,ctx);else listen.apply(ctx,args);if(listen._once)thing.off(type,listen)});return thing}};return thing}},function(module,exports,__webpack_require__){"use strict";var ticky=__webpack_require__(50);module.exports=function debounce(fn,args,ctx){if(!fn)return;ticky(function run(){fn.apply(ctx||null,args||[])})}},function(module,exports,__webpack_require__){(function(setImmediate){var si="function"==typeof setImmediate,tick;if(si)tick=function(fn){setImmediate(fn)};else tick=function(fn){setTimeout(fn,0)};module.exports=tick}).call(exports,__webpack_require__(51).setImmediate)},function(module,exports,__webpack_require__){(function(setImmediate,clearImmediate){function Timeout(id,clearFn){this._id=id;this._clearFn=clearFn}var nextTick=__webpack_require__(52).nextTick;var apply=Function.prototype.apply;var slice=Array.prototype.slice;var immediateIds={};var nextImmediateId=0;exports.setTimeout=function(){return new Timeout(apply.call(setTimeout,window,arguments),clearTimeout)};exports.setInterval=function(){return new Timeout(apply.call(setInterval,window,arguments),clearInterval)};exports.clearTimeout=exports.clearInterval=function(timeout){timeout.close()};Timeout.prototype.unref=Timeout.prototype.ref=function(){};Timeout.prototype.close=function(){this._clearFn.call(window,this._id)};exports.enroll=function(item,msecs){clearTimeout(item._idleTimeoutId);item._idleTimeout=msecs};exports.unenroll=function(item){clearTimeout(item._idleTimeoutId);item._idleTimeout=-1};exports._unrefActive=exports.active=function(item){clearTimeout(item._idleTimeoutId);var msecs=item._idleTimeout;if(msecs>=0)item._idleTimeoutId=setTimeout(function onTimeout(){if(item._onTimeout)item._onTimeout()},msecs)};exports.setImmediate="function"==typeof setImmediate?setImmediate:function(fn){var id=nextImmediateId++;var args=arguments.length<2?false:slice.call(arguments,1);immediateIds[id]=true;nextTick(function onNextTick(){if(immediateIds[id]){if(args)fn.apply(null,args);else fn.call(null);exports.clearImmediate(id)}});return id};exports.clearImmediate="function"==typeof clearImmediate?clearImmediate:function(id){delete immediateIds[id]}}).call(exports,__webpack_require__(51).setImmediate,__webpack_require__(51).clearImmediate)},function(module,exports){function cleanUpNextTick(){draining=false;if(currentQueue.length)queue=currentQueue.concat(queue);else queueIndex=-1;if(queue.length)drainQueue()}function drainQueue(){if(draining)return;var timeout=setTimeout(cleanUpNextTick);draining=true;var len=queue.length;for(;len;){currentQueue=queue;queue=[];for(;++queueIndex<len;)if(currentQueue)currentQueue[queueIndex].run();queueIndex=-1;len=queue.length}currentQueue=null;draining=false;clearTimeout(timeout)}function Item(fun,array){this.fun=fun;this.array=array}function noop(){}var process=module.exports={};var queue=[];var draining=false;var currentQueue;var queueIndex=-1;process.nextTick=function(fun){var args=new Array(arguments.length-1);if(arguments.length>1)for(var i=1;i<arguments.length;i++)args[i-1]=arguments[i];queue.push(new Item(fun,args));if(1===queue.length&&!draining)setTimeout(drainQueue,0)};Item.prototype.run=function(){this.fun.apply(null,this.array)};process.title="browser";process.browser=true;process.env={};process.argv=[];process.version="";process.versions={};process.on=noop;process.addListener=noop;process.once=noop;process.off=noop;process.removeListener=noop;process.removeAllListeners=noop;process.emit=noop;process.binding=function(name){throw new Error("process.binding is not supported")};process.cwd=function(){return"/"};process.chdir=function(dir){throw new Error("process.chdir is not supported")};process.umask=function(){return 0}},function(module,exports,__webpack_require__){"use strict";function createChannel(){function selfed(method){return function selfish(){internalEmitter[method].apply(null,arguments);return api}}function postFromPage(e){var context={reply:replyToPage(e)};serialization.emission(internalEmitter,context)(e)}function broadcastToPages(type){function gotClients(clients){return clients.map(emitToClient)}function emitToClient(client){return client.postMessage({type:type,payload:payload,__broadcast:true})}var payload=atoa(arguments,1);return self.clients.matchAll().then(gotClients)}function replyTo(client){var payload=serialization.parsePayload(atoa(arguments,1));return client.postMessage(payload)}function replyToPage(e){return replyTo.bind(null,e.ports[0])}function replyToClient(clientId){var payload=serialization.parsePayload(atoa(arguments,1));return self.clients.matchAll().then(function(clients){var wasClientFound=false;clients.forEach(function(client){if(client.id===clientId){wasClientFound=true;return client.postMessage(payload)}});if(!wasClientFound)return Promise.reject("Could not find service worker client with ID "+clientId+" to reply to.")})}var internalEmitter=emitter();var api={on:selfed("on"),once:selfed("once"),off:selfed("off"),broadcast:broadcastToPages,emit:replyToClient};self.addEventListener("message",postFromPage);return api}var atoa=__webpack_require__(46);var serialization=__webpack_require__(47);var emitter=__webpack_require__(48);module.exports=createChannel},function(module,exports,__webpack_require__){(function(global){module.exports=global.ServiceWorker=__webpack_require__(55)}).call(exports,function(){return this}())},function(module,exports,__webpack_require__){(function(fetch){"use strict";function _interopRequireWildcard(obj){if(obj&&obj.__esModule)return obj;else{var newObj={};if(null!=obj)for(var key in obj)if(Object.prototype.hasOwnProperty.call(obj,key))newObj[key]=obj[key];newObj["default"]=obj;return newObj}}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}var _slicedToArray=function(){function sliceIterator(arr,i){var _arr=[];var _n=true;var _d=false;var _e=void 0;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"])_i["return"]()}finally{if(_d)throw _e}}return _arr}return function(arr,i){if(Array.isArray(arr))return arr;else if(Symbol.iterator in Object(arr))return sliceIterator(arr,i);else throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();var _vars=__webpack_require__(1);var _environment=__webpack_require__(21);var _environment2=_interopRequireDefault(_environment);var _api=__webpack_require__(26);var _loglevel=__webpack_require__(3);var _loglevel2=_interopRequireDefault(_loglevel);var _database=__webpack_require__(43);var _database2=_interopRequireDefault(_database);var _utils=__webpack_require__(2);var _objectAssign=__webpack_require__(32);var _objectAssign2=_interopRequireDefault(_objectAssign);var _swivel=__webpack_require__(44);var _swivel2=_interopRequireDefault(_swivel);var _bowser=__webpack_require__(20);var Browser=_interopRequireWildcard(_bowser);var ServiceWorker=function(){function ServiceWorker(){_classCallCheck(this,ServiceWorker)}_createClass(ServiceWorker,null,[{key:"run",value:function run(){self.addEventListener("push",ServiceWorker.onPushReceived);self.addEventListener("notificationclick",ServiceWorker.onNotificationClicked);self.addEventListener("install",ServiceWorker.onServiceWorkerInstalled);self.addEventListener("activate",ServiceWorker.onServiceWorkerActivated);_swivel2["default"].on("data",ServiceWorker.onMessageReceived);if(Browser.firefox&&Browser.version&&(0,_utils.contains)(Browser.version,"44"))_database2["default"].get("Options","serviceWorkerRefetchRequests").then(function(refetchRequestsResult){if(refetchRequestsResult&&true==refetchRequestsResult.value){_loglevel2["default"].info("Detected Firefox v44; installing fetch handler to refetch all requests.");self.REFETCH_REQUESTS=true;self.addEventListener("fetch",ServiceWorker.onFetch)}else{self.SKIP_REFETCH_REQUESTS=true;_loglevel2["default"].info("Detected Firefox v44 but not refetching requests because option is set to false.")}})["catch"](function(e){_loglevel2["default"].error(e);self.REFETCH_REQUESTS=true;self.addEventListener("fetch",ServiceWorker.onFetch)})}},{key:"onMessageReceived",value:function onMessageReceived(context,data){_loglevel2["default"].debug("%c"+_environment2["default"].getEnv().capitalize()+" ⬸ Host:",(0,_utils.getConsoleStyle)("serviceworkermessage"),data,context);if("notification.closeall"===data)self.registration.getNotifications().then(function(notifications){var _iteratorNormalCompletion=true;var _didIteratorError=false;var _iteratorError=void 0;try{for(var _iterator=notifications[Symbol.iterator](),_step;!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=true){var notification=_step.value;notification.close()}}catch(err){_didIteratorError=true;_iteratorError=err}finally{try{if(!_iteratorNormalCompletion&&_iterator["return"])_iterator["return"]()}finally{if(_didIteratorError)throw _iteratorError}}});else if("push.mute"===data)ServiceWorker._breakOnPushReceived=true;else if("push.restore"===data)ServiceWorker._breakOnPushReceived=false;else if("push.status"===data)_database2["default"].get("Ids","backupNotification").then(function(backupNotificationResult){if(backupNotificationResult&&backupNotificationResult.id)var backupNotification=backupNotificationResult.id;_swivel2["default"].broadcast("data",{backupNotification:backupNotification,isPushIntentionallyBroken:ServiceWorker._breakOnPushReceived})})}},{key:"onPushReceived",value:function onPushReceived(event){_loglevel2["default"].debug("Called %conPushReceived("+JSON.stringify(event,null,4)+"):",(0,_utils.getConsoleStyle)("code"),event);event.waitUntil(new Promise(function(resolve,reject){var extra={};var promise=Promise.resolve();Promise.all([ServiceWorker._getTitle(),_database2["default"].get("Options","defaultIcon"),_database2["default"].get("Options","persistNotification"),_database2["default"].get("Ids","appId")]).then(function(results){extra.title=results[0];extra.defaultIconResult=results[1];if(extra.defaultIconResult)extra.defaultIconResult=extra.defaultIconResult.value;extra.persistNotification=results[2];if(extra.persistNotification)extra.persistNotification=extra.persistNotification.value;extra.appId=results[3];if(extra.appId)extra.appId=extra.appId.id;else _loglevel2["default"].error("There was no app ID stored when trying to display the notification. An app ID is required.")}).then(function(){return ServiceWorker._getLastNotifications()}).then(function(notifications){if(!notifications||0==notifications.length){_loglevel2["default"].warn("Push signal received, but there were no messages after calling chromeweb_notification().");ServiceWorker.logPush("chromeweb_notification_no_results","last_occurred")}var notificationEventPromiseFns=[];var _iteratorNormalCompletion2=true;var _didIteratorError2=false;var _iteratorError2=void 0;try{var _loop=function _loop(){var notification=_step2.value;var data={id:notification.custom.i,message:notification.alert,additionalData:notification.custom.a};var retrievedPushLogPromise=ServiceWorker.logPush(data.id,"retrieved");if(notification.title)data.title=notification.title;else data.title=extra.title;if(notification.custom.u)data.launchURL=notification.custom.u;if(notification.icon)data.icon=notification.icon;else if(extra.defaultIconResult)data.icon=extra.defaultIconResult;var saveAsBackupNotification=true;var isOneSignalWelcomeNotification=data.additionalData&&data.additionalData.__isOneSignalWelcomeNotification;if(isOneSignalWelcomeNotification)saveAsBackupNotification=false;if(saveAsBackupNotification){var backupData=(0,_objectAssign2["default"])({},data,{displayedTime:Date.now()});_database2["default"].put("Ids",{type:"backupNotification",id:data})}notificationEventPromiseFns.push(function(data){var showNotificationPromise=self.registration.showNotification(data.title,{requireInteraction:extra.persistNotification,body:data.message,icon:data.icon,tag:"notification-tag-"+extra.appId,data:data});return showNotificationPromise.then(function(){return retrievedPushLogPromise}).then(function(){return ServiceWorker.logPush(data.id,"displayed")})}.bind(null,data));notificationEventPromiseFns.push(function(data){return ServiceWorker.executeWebhooks("notification.displayed",data);
}.bind(null,data))};for(var _iterator2=notifications[Symbol.iterator](),_step2;!(_iteratorNormalCompletion2=(_step2=_iterator2.next()).done);_iteratorNormalCompletion2=true)_loop()}catch(err){_didIteratorError2=true;_iteratorError2=err}finally{try{if(!_iteratorNormalCompletion2&&_iterator2["return"])_iterator2["return"]()}finally{if(_didIteratorError2)throw _iteratorError2}}return notificationEventPromiseFns.reduce(function(p,fn){return p=p.then(fn)},promise)}).then(resolve)["catch"](function(e){_loglevel2["default"].error("Failed to display a notification:",e);_loglevel2["default"].warn("Because a notification failed to display, we'll display the last known notification, so long as it isn't the welcome notification.");_database2["default"].get("Ids","backupNotification").then(function(backupNotificationResult){if(backupNotificationResult&&backupNotificationResult.id){var backupNotification=backupNotificationResult.id;self.registration.showNotification(backupNotification.title,{requireInteraction:false,body:backupNotification.message,icon:backupNotification.icon,tag:"notification-tag-"+extra.appId,data:backupNotification})}else self.registration.showNotification(extra.title,{requireInteraction:false,body:"You have new updates.",icon:extra.defaultIconResult,tag:"notification-tag-"+extra.appId,data:{backupNotification:true}})})})}))}},{key:"logPush",value:function logPush(notificationId,action){var currentPushLog={};return _database2["default"].get("Options","pushLog").then(function(pushLogResult){if(pushLogResult){currentPushLog=pushLogResult.value;var estimateBytesPerUnicodeChar=655360;if(JSON.stringify(currentPushLog).length>78e3){_loglevel2["default"].warn("Clearing push log because it grew too large.");currentPushLog={}}}if(!currentPushLog.hasOwnProperty(notificationId))currentPushLog[notificationId]={};currentPushLog[notificationId][action]=new Date}).then(function(){return _database2["default"].put("Options",{key:"pushLog",value:currentPushLog})})}},{key:"executeWebhooks",value:function executeWebhooks(event,notification){var isServerCorsEnabled=false;var userId=null;return _database2["default"].get("Ids","userId").then(function(userIdResult){if(userIdResult)userId=userIdResult.id}).then(function(){return _database2["default"].get("Options","webhooks.cors")}).then(function(corsResult){isServerCorsEnabled=corsResult&&corsResult.value}).then(function(){return _database2["default"].get("Options","webhooks."+event)}).then(function(webhookUrlQuery){if(webhookUrlQuery&&webhookUrlQuery.value){var url=webhookUrlQuery.value;var postData={event:event,id:notification.id,userId:userId,heading:notification.title,content:notification.message,url:notification.launchURL,icon:notification.icon,data:notification.additionalData};var fetchOptions={method:"post",mode:"no-cors",body:JSON.stringify(postData)};if(isServerCorsEnabled){fetchOptions.mode="cors";fetchOptions.headers={"X-OneSignal-Event":event,"Content-Type":"application/json"}}_loglevel2["default"].debug("Executing "+event+" webhook "+(isServerCorsEnabled?"with":"without")+" CORS %cPOST "+url,(0,_utils.getConsoleStyle)("code"),":",postData);return fetch(url,fetchOptions)}})}},{key:"onNotificationClicked",value:function onNotificationClicked(event){_loglevel2["default"].debug("Called %conNotificationClicked("+JSON.stringify(event,null,4)+"):",(0,_utils.getConsoleStyle)("code"),event);var notificationData=event.notification.data;event.notification.close();var notificationClickHandlerMatch="exact";event.waitUntil(ServiceWorker.logPush(notificationData.id,"clicked").then(function(){return _database2["default"].get("Options","defaultUrl")}).then(function(defaultUrlResult){if(defaultUrlResult)ServiceWorker.defaultLaunchUrl=defaultUrlResult.value}).then(function(){return _database2["default"].get("Options","notificationClickHandlerMatch")}).then(function(matchPreferenceResult){if(matchPreferenceResult)notificationClickHandlerMatch=matchPreferenceResult.value}).then(function(){return clients.matchAll({type:"window"})}).then(function(clientList){var launchUrl=registration.scope;if(ServiceWorker.defaultLaunchUrl)launchUrl=ServiceWorker.defaultLaunchUrl;if(notificationData.launchURL)launchUrl=notificationData.launchURL;var launchUrlObj=new URL(launchUrl);var notificationOpensLink="javascript:void(0);"!==launchUrl&&"do_not_open"!==launchUrl&&!(0,_utils.contains)(launchUrlObj.search,"_osp=do_not_open");var eventData={id:notificationData.id,heading:notificationData.title,content:notificationData.message,url:notificationData.launchURL,icon:notificationData.icon,data:notificationData.additionalData};(0,_utils.trimUndefined)(eventData);for(var i=0;i<clientList.length;i++){var client=clientList[i];if("focus"in client)if("exact"===notificationClickHandlerMatch&&client.url===launchUrl){client.focus();_swivel2["default"].emit(client.id,"notification.clicked",eventData);return}else if("origin"===notificationClickHandlerMatch){var clientOrigin=new URL(client.url).origin;var launchUrlOrigin=null;try{launchUrlOrigin=new URL(launchUrl).origin}catch(e){}_loglevel2["default"].debug("Client Origin:",clientOrigin);_loglevel2["default"].debug("Launch URL Origin:",launchUrlOrigin);if(clientOrigin===launchUrlOrigin){client.focus();_swivel2["default"].emit(client.id,"notification.clicked",eventData);return}}}return _database2["default"].put("NotificationOpened",{url:launchUrl,data:eventData,timestamp:Date.now()}).then(function(){if(notificationOpensLink)clients.openWindow(launchUrl)["catch"](function(error){clients.openWindow(registration.scope+"redirector.html?url="+launchUrl)})})}).then(function(){return Promise.all([_database2["default"].get("Ids","appId"),_database2["default"].get("Ids","userId")])}).then(function(results){var _results=_slicedToArray(results,2);var appIdResult=_results[0];var userIdResult=_results[1];if(appIdResult&&userIdResult)return(0,_api.apiCall)("notifications/"+notificationData.id,"PUT",{app_id:appIdResult.id,player_id:userIdResult.id,opened:true})}).then(function(){return ServiceWorker.executeWebhooks("notification.clicked",notificationData)})["catch"](function(e){return _loglevel2["default"].error(e)}))}},{key:"onServiceWorkerInstalled",value:function onServiceWorkerInstalled(event){_loglevel2["default"].debug("Called %conServiceWorkerInstalled("+JSON.stringify(event,null,4)+"):",(0,_utils.getConsoleStyle)("code"),event);_loglevel2["default"].info("Installing service worker: %c"+self.location.pathname,(0,_utils.getConsoleStyle)("code"),"(version 109160)");if((0,_utils.contains)(self.location.pathname,"OneSignalSDKWorker.js"))var serviceWorkerVersionType="WORKER1_ONE_SIGNAL_SW_VERSION";else var serviceWorkerVersionType="WORKER2_ONE_SIGNAL_SW_VERSION";if(ServiceWorker.onOurSubdomain)event.waitUntil(_database2["default"].put("Ids",{type:serviceWorkerVersionType,id:"109160"}).then(function(){return self.skipWaiting()})["catch"](function(e){return _loglevel2["default"].error(e)}));else event.waitUntil(_database2["default"].put("Ids",{type:serviceWorkerVersionType,id:"109160"}).then(function(){return self.skipWaiting()}))}},{key:"onServiceWorkerActivated",value:function onServiceWorkerActivated(event){_loglevel2["default"].debug("Called %conServiceWorkerActivated("+JSON.stringify(event,null,4)+"):",(0,_utils.getConsoleStyle)("code"),event);var deleteCachePromise=caches.keys().then(function(keys){return Promise.all(keys.map(function(key){if(0==key.indexOf("OneSignal_")){_loglevel2["default"].info("Deleting old OneSignal cache:",key);return caches["delete"](key)}}))});var claimPromise=self.clients.claim();event.waitUntil(deleteCachePromise.then(claimPromise))}},{key:"onFetch",value:function onFetch(event){event.respondWith(fetch(event.request))}},{key:"_getTitle",value:function _getTitle(){return new Promise(function(resolve,reject){Promise.all([_database2["default"].get("Options","defaultTitle"),_database2["default"].get("Options","pageTitle")]).then(function(results){var _results2=_slicedToArray(results,2);var defaultTitleResult=_results2[0];var pageTitleResult=_results2[1];if(defaultTitleResult)resolve(defaultTitleResult.value);else if(pageTitleResult&&null!=pageTitleResult.value)resolve(pageTitleResult.value);else resolve("")})["catch"](function(e){_loglevel2["default"].error(e);reject(e)})})}},{key:"_getLastNotifications",value:function _getLastNotifications(){return new Promise(function(resolve,reject){var notifications=[];_database2["default"].get("Ids","userId").then(function(userIdResult){if(userIdResult)return(0,_api.apiCall)("players/"+userIdResult.id+"/chromeweb_notification","GET");else{_loglevel2["default"].error("Tried to get last notifications, but there was no userId found in the database.");reject(new Error("Tried to get last notifications, but there was no userId found in the database."))}}).then(function(response){for(var i=0;i<response.length;i++)notifications.push(JSON.parse(response[i]));if(ServiceWorker._breakOnPushReceived){_loglevel2["default"].warn("Received notifications from server, but intentionally breaking %conPushReceived",(0,_utils.getConsoleStyle)("code"),"without displaying a notification.",response);throw new Error("push.mute intentionally not returning any notifications.")}else resolve(notifications)})["catch"](function(e){_loglevel2["default"].error(e);reject(e)})})}},{key:"VERSION",get:function get(){return"109160"}},{key:"environment",get:function get(){return _environment2["default"]}},{key:"log",get:function get(){return _loglevel2["default"]}},{key:"swivel",get:function get(){return _swivel2["default"]}},{key:"database",get:function get(){return _database2["default"]}},{key:"apiUrl",get:function get(){return _vars.API_URL}},{key:"onOurSubdomain",get:function get(){return false||null!==location.href.match(/https:\/\/.*\.onesignal.com\/sdks\//)}}]);return ServiceWorker}();self.OneSignalWorker=ServiceWorker;_loglevel2["default"].setDefaultLevel(false?_loglevel2["default"].levels.TRACE:_loglevel2["default"].levels.ERROR);_loglevel2["default"].info("%cOneSignal Service Worker loaded (version 109160, "+_environment2["default"].getEnv()+" environment).",(0,_utils.getConsoleStyle)("bold"));ServiceWorker.run()}).call(exports,__webpack_require__(24))}]);
//# sourceMappingURL=OneSignalSDK.js.map